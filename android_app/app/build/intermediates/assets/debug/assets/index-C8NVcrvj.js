(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();function aw(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var zd={exports:{}},Pl={};var G0;function ow(){if(G0)return Pl;G0=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,l,u){var d=null;if(u!==void 0&&(d=""+u),l.key!==void 0&&(d=""+l.key),"key"in l){u={};for(var p in l)p!=="key"&&(u[p]=l[p])}else u=l;return l=u.ref,{$$typeof:s,type:r,key:d,ref:l!==void 0?l:null,props:u}}return Pl.Fragment=e,Pl.jsx=n,Pl.jsxs=n,Pl}var K0;function lw(){return K0||(K0=1,zd.exports=ow()),zd.exports}var E=lw(),Bd={exports:{}},Ne={};var Q0;function uw(){if(Q0)return Ne;Q0=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),D=Symbol.iterator;function V(I){return I===null||typeof I!="object"?null:(I=D&&I[D]||I["@@iterator"],typeof I=="function"?I:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,F={};function ie(I,X,re){this.props=I,this.context=X,this.refs=F,this.updater=re||q}ie.prototype.isReactComponent={},ie.prototype.setState=function(I,X){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,X,"setState")},ie.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function fe(){}fe.prototype=ie.prototype;function me(I,X,re){this.props=I,this.context=X,this.refs=F,this.updater=re||q}var Oe=me.prototype=new fe;Oe.constructor=me,B(Oe,ie.prototype),Oe.isPureReactComponent=!0;var Ee=Array.isArray;function we(){}var C={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function x(I,X,re){var le=re.ref;return{$$typeof:s,type:I,key:X,ref:le!==void 0?le:null,props:re}}function k(I,X){return x(I.type,X,I.props)}function O(I){return typeof I=="object"&&I!==null&&I.$$typeof===s}function j(I){var X={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(re){return X[re]})}var R=/\/+/g;function Xe(I,X){return typeof I=="object"&&I!==null&&I.key!=null?j(""+I.key):X.toString(36)}function et(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(we,we):(I.status="pending",I.then(function(X){I.status==="pending"&&(I.status="fulfilled",I.value=X)},function(X){I.status==="pending"&&(I.status="rejected",I.reason=X)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function Y(I,X,re,le,he){var _e=typeof I;(_e==="undefined"||_e==="boolean")&&(I=null);var ve=!1;if(I===null)ve=!0;else switch(_e){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(I.$$typeof){case s:case e:ve=!0;break;case T:return ve=I._init,Y(ve(I._payload),X,re,le,he)}}if(ve)return he=he(I),ve=le===""?"."+Xe(I,0):le,Ee(he)?(re="",ve!=null&&(re=ve.replace(R,"$&/")+"/"),Y(he,X,re,"",function(Nn){return Nn})):he!=null&&(O(he)&&(he=k(he,re+(he.key==null||I&&I.key===he.key?"":(""+he.key).replace(R,"$&/")+"/")+ve)),X.push(he)),1;ve=0;var ze=le===""?".":le+":";if(Ee(I))for(var it=0;it<I.length;it++)le=I[it],_e=ze+Xe(le,it),ve+=Y(le,X,re,_e,he);else if(it=V(I),typeof it=="function")for(I=it.call(I),it=0;!(le=I.next()).done;)le=le.value,_e=ze+Xe(le,it++),ve+=Y(le,X,re,_e,he);else if(_e==="object"){if(typeof I.then=="function")return Y(et(I),X,re,le,he);throw X=String(I),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return ve}function Q(I,X,re){if(I==null)return I;var le=[],he=0;return Y(I,le,"","",function(_e){return X.call(re,_e,he++)}),le}function se(I){if(I._status===-1){var X=I._result;X=X(),X.then(function(re){(I._status===0||I._status===-1)&&(I._status=1,I._result=re)},function(re){(I._status===0||I._status===-1)&&(I._status=2,I._result=re)}),I._status===-1&&(I._status=0,I._result=X)}if(I._status===1)return I._result.default;throw I._result}var ce=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)},Ce={map:Q,forEach:function(I,X,re){Q(I,function(){X.apply(this,arguments)},re)},count:function(I){var X=0;return Q(I,function(){X++}),X},toArray:function(I){return Q(I,function(X){return X})||[]},only:function(I){if(!O(I))throw Error("React.Children.only expected to receive a single React element child.");return I}};return Ne.Activity=S,Ne.Children=Ce,Ne.Component=ie,Ne.Fragment=n,Ne.Profiler=l,Ne.PureComponent=me,Ne.StrictMode=r,Ne.Suspense=y,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(I){return C.H.useMemoCache(I)}},Ne.cache=function(I){return function(){return I.apply(null,arguments)}},Ne.cacheSignal=function(){return null},Ne.cloneElement=function(I,X,re){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var le=B({},I.props),he=I.key;if(X!=null)for(_e in X.key!==void 0&&(he=""+X.key),X)!A.call(X,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&X.ref===void 0||(le[_e]=X[_e]);var _e=arguments.length-2;if(_e===1)le.children=re;else if(1<_e){for(var ve=Array(_e),ze=0;ze<_e;ze++)ve[ze]=arguments[ze+2];le.children=ve}return x(I.type,he,le)},Ne.createContext=function(I){return I={$$typeof:d,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:u,_context:I},I},Ne.createElement=function(I,X,re){var le,he={},_e=null;if(X!=null)for(le in X.key!==void 0&&(_e=""+X.key),X)A.call(X,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(he[le]=X[le]);var ve=arguments.length-2;if(ve===1)he.children=re;else if(1<ve){for(var ze=Array(ve),it=0;it<ve;it++)ze[it]=arguments[it+2];he.children=ze}if(I&&I.defaultProps)for(le in ve=I.defaultProps,ve)he[le]===void 0&&(he[le]=ve[le]);return x(I,_e,he)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(I){return{$$typeof:p,render:I}},Ne.isValidElement=O,Ne.lazy=function(I){return{$$typeof:T,_payload:{_status:-1,_result:I},_init:se}},Ne.memo=function(I,X){return{$$typeof:g,type:I,compare:X===void 0?null:X}},Ne.startTransition=function(I){var X=C.T,re={};C.T=re;try{var le=I(),he=C.S;he!==null&&he(re,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(we,ce)}catch(_e){ce(_e)}finally{X!==null&&re.types!==null&&(X.types=re.types),C.T=X}},Ne.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Ne.use=function(I){return C.H.use(I)},Ne.useActionState=function(I,X,re){return C.H.useActionState(I,X,re)},Ne.useCallback=function(I,X){return C.H.useCallback(I,X)},Ne.useContext=function(I){return C.H.useContext(I)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(I,X){return C.H.useDeferredValue(I,X)},Ne.useEffect=function(I,X){return C.H.useEffect(I,X)},Ne.useEffectEvent=function(I){return C.H.useEffectEvent(I)},Ne.useId=function(){return C.H.useId()},Ne.useImperativeHandle=function(I,X,re){return C.H.useImperativeHandle(I,X,re)},Ne.useInsertionEffect=function(I,X){return C.H.useInsertionEffect(I,X)},Ne.useLayoutEffect=function(I,X){return C.H.useLayoutEffect(I,X)},Ne.useMemo=function(I,X){return C.H.useMemo(I,X)},Ne.useOptimistic=function(I,X){return C.H.useOptimistic(I,X)},Ne.useReducer=function(I,X,re){return C.H.useReducer(I,X,re)},Ne.useRef=function(I){return C.H.useRef(I)},Ne.useState=function(I){return C.H.useState(I)},Ne.useSyncExternalStore=function(I,X,re){return C.H.useSyncExternalStore(I,X,re)},Ne.useTransition=function(){return C.H.useTransition()},Ne.version="19.2.3",Ne}var Y0;function Om(){return Y0||(Y0=1,Bd.exports=uw()),Bd.exports}var te=Om();const Gi=aw(te);var qd={exports:{}},Ul={},Hd={exports:{}},Fd={};var X0;function cw(){return X0||(X0=1,(function(s){function e(Y,Q){var se=Y.length;Y.push(Q);e:for(;0<se;){var ce=se-1>>>1,Ce=Y[ce];if(0<l(Ce,Q))Y[ce]=Q,Y[se]=Ce,se=ce;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var Q=Y[0],se=Y.pop();if(se!==Q){Y[0]=se;e:for(var ce=0,Ce=Y.length,I=Ce>>>1;ce<I;){var X=2*(ce+1)-1,re=Y[X],le=X+1,he=Y[le];if(0>l(re,se))le<Ce&&0>l(he,re)?(Y[ce]=he,Y[le]=se,ce=le):(Y[ce]=re,Y[X]=se,ce=X);else if(le<Ce&&0>l(he,se))Y[ce]=he,Y[le]=se,ce=le;else break e}}return Q}function l(Y,Q){var se=Y.sortIndex-Q.sortIndex;return se!==0?se:Y.id-Q.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var d=Date,p=d.now();s.unstable_now=function(){return d.now()-p}}var y=[],g=[],T=1,S=null,D=3,V=!1,q=!1,B=!1,F=!1,ie=typeof setTimeout=="function"?setTimeout:null,fe=typeof clearTimeout=="function"?clearTimeout:null,me=typeof setImmediate<"u"?setImmediate:null;function Oe(Y){for(var Q=n(g);Q!==null;){if(Q.callback===null)r(g);else if(Q.startTime<=Y)r(g),Q.sortIndex=Q.expirationTime,e(y,Q);else break;Q=n(g)}}function Ee(Y){if(B=!1,Oe(Y),!q)if(n(y)!==null)q=!0,we||(we=!0,j());else{var Q=n(g);Q!==null&&et(Ee,Q.startTime-Y)}}var we=!1,C=-1,A=5,x=-1;function k(){return F?!0:!(s.unstable_now()-x<A)}function O(){if(F=!1,we){var Y=s.unstable_now();x=Y;var Q=!0;try{e:{q=!1,B&&(B=!1,fe(C),C=-1),V=!0;var se=D;try{t:{for(Oe(Y),S=n(y);S!==null&&!(S.expirationTime>Y&&k());){var ce=S.callback;if(typeof ce=="function"){S.callback=null,D=S.priorityLevel;var Ce=ce(S.expirationTime<=Y);if(Y=s.unstable_now(),typeof Ce=="function"){S.callback=Ce,Oe(Y),Q=!0;break t}S===n(y)&&r(y),Oe(Y)}else r(y);S=n(y)}if(S!==null)Q=!0;else{var I=n(g);I!==null&&et(Ee,I.startTime-Y),Q=!1}}break e}finally{S=null,D=se,V=!1}Q=void 0}}finally{Q?j():we=!1}}}var j;if(typeof me=="function")j=function(){me(O)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,Xe=R.port2;R.port1.onmessage=O,j=function(){Xe.postMessage(null)}}else j=function(){ie(O,0)};function et(Y,Q){C=ie(function(){Y(s.unstable_now())},Q)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Y){Y.callback=null},s.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<Y?Math.floor(1e3/Y):5},s.unstable_getCurrentPriorityLevel=function(){return D},s.unstable_next=function(Y){switch(D){case 1:case 2:case 3:var Q=3;break;default:Q=D}var se=D;D=Q;try{return Y()}finally{D=se}},s.unstable_requestPaint=function(){F=!0},s.unstable_runWithPriority=function(Y,Q){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var se=D;D=Y;try{return Q()}finally{D=se}},s.unstable_scheduleCallback=function(Y,Q,se){var ce=s.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?ce+se:ce):se=ce,Y){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=se+Ce,Y={id:T++,callback:Q,priorityLevel:Y,startTime:se,expirationTime:Ce,sortIndex:-1},se>ce?(Y.sortIndex=se,e(g,Y),n(y)===null&&Y===n(g)&&(B?(fe(C),C=-1):B=!0,et(Ee,se-ce))):(Y.sortIndex=Ce,e(y,Y),q||V||(q=!0,we||(we=!0,j()))),Y},s.unstable_shouldYield=k,s.unstable_wrapCallback=function(Y){var Q=D;return function(){var se=D;D=Q;try{return Y.apply(this,arguments)}finally{D=se}}}})(Fd)),Fd}var $0;function hw(){return $0||($0=1,Hd.exports=cw()),Hd.exports}var Gd={exports:{}},an={};var J0;function fw(){if(J0)return an;J0=1;var s=Om();function e(y){var g="https://react.dev/errors/"+y;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)g+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+y+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(y,g,T){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:S==null?null:""+S,children:y,containerInfo:g,implementation:T}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(y,g){if(y==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return an.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,an.createPortal=function(y,g){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(y,g,null,T)},an.flushSync=function(y){var g=d.T,T=r.p;try{if(d.T=null,r.p=2,y)return y()}finally{d.T=g,r.p=T,r.d.f()}},an.preconnect=function(y,g){typeof y=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(y,g))},an.prefetchDNS=function(y){typeof y=="string"&&r.d.D(y)},an.preinit=function(y,g){if(typeof y=="string"&&g&&typeof g.as=="string"){var T=g.as,S=p(T,g.crossOrigin),D=typeof g.integrity=="string"?g.integrity:void 0,V=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;T==="style"?r.d.S(y,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:S,integrity:D,fetchPriority:V}):T==="script"&&r.d.X(y,{crossOrigin:S,integrity:D,fetchPriority:V,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},an.preinitModule=function(y,g){if(typeof y=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var T=p(g.as,g.crossOrigin);r.d.M(y,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(y)},an.preload=function(y,g){if(typeof y=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var T=g.as,S=p(T,g.crossOrigin);r.d.L(y,T,{crossOrigin:S,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},an.preloadModule=function(y,g){if(typeof y=="string")if(g){var T=p(g.as,g.crossOrigin);r.d.m(y,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(y)},an.requestFormReset=function(y){r.d.r(y)},an.unstable_batchedUpdates=function(y,g){return y(g)},an.useFormState=function(y,g,T){return d.H.useFormState(y,g,T)},an.useFormStatus=function(){return d.H.useHostTransitionStatus()},an.version="19.2.3",an}var W0;function dw(){if(W0)return Gd.exports;W0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Gd.exports=fw(),Gd.exports}var Z0;function mw(){if(Z0)return Ul;Z0=1;var s=hw(),e=Om(),n=dw();function r(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function d(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function p(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function y(t){if(u(t)!==t)throw Error(r(188))}function g(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(r(188));return i!==t?null:t}for(var a=t,o=i;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return y(h),t;if(f===o)return y(h),i;f=f.sibling}throw Error(r(188))}if(a.return!==o.return)a=h,o=f;else{for(var _=!1,b=h.child;b;){if(b===a){_=!0,a=h,o=f;break}if(b===o){_=!0,o=h,a=f;break}b=b.sibling}if(!_){for(b=f.child;b;){if(b===a){_=!0,a=f,o=h;break}if(b===o){_=!0,o=f,a=h;break}b=b.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==o)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:i}function T(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=T(t),i!==null)return i;t=t.sibling}return null}var S=Object.assign,D=Symbol.for("react.element"),V=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),ie=Symbol.for("react.profiler"),fe=Symbol.for("react.consumer"),me=Symbol.for("react.context"),Oe=Symbol.for("react.forward_ref"),Ee=Symbol.for("react.suspense"),we=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function j(t){return t===null||typeof t!="object"?null:(t=O&&t[O]||t["@@iterator"],typeof t=="function"?t:null)}var R=Symbol.for("react.client.reference");function Xe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===R?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case B:return"Fragment";case ie:return"Profiler";case F:return"StrictMode";case Ee:return"Suspense";case we:return"SuspenseList";case x:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case q:return"Portal";case me:return t.displayName||"Context";case fe:return(t._context.displayName||"Context")+".Consumer";case Oe:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case C:return i=t.displayName||null,i!==null?i:Xe(t.type)||"Memo";case A:i=t._payload,t=t._init;try{return Xe(t(i))}catch{}}return null}var et=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},ce=[],Ce=-1;function I(t){return{current:t}}function X(t){0>Ce||(t.current=ce[Ce],ce[Ce]=null,Ce--)}function re(t,i){Ce++,ce[Ce]=t.current,t.current=i}var le=I(null),he=I(null),_e=I(null),ve=I(null);function ze(t,i){switch(re(_e,i),re(he,t),re(le,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?m0(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=m0(i),t=p0(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}X(le),re(le,t)}function it(){X(le),X(he),X(_e)}function Nn(t){t.memoizedState!==null&&re(ve,t);var i=le.current,a=p0(i,t.type);i!==a&&(re(he,t),re(le,a))}function Qn(t){he.current===t&&(X(le),X(he)),ve.current===t&&(X(ve),kl._currentValue=se)}var Dn,pi;function Yt(t){if(Dn===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Dn=i&&i[1]||"",pi=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Dn+t+pi}var Ii=!1;function On(t,i){if(!t||Ii)return"";Ii=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(K){var H=K}Reflect.construct(t,[],W)}else{try{W.call()}catch(K){H=K}t.call(W.prototype)}}else{try{throw Error()}catch(K){H=K}(W=t())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(K){if(K&&H&&typeof K.stack=="string")return[K.stack,H.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),_=f[0],b=f[1];if(_&&b){var N=_.split(`
`),z=b.split(`
`);for(h=o=0;o<N.length&&!N[o].includes("DetermineComponentFrameRoot");)o++;for(;h<z.length&&!z[h].includes("DetermineComponentFrameRoot");)h++;if(o===N.length||h===z.length)for(o=N.length-1,h=z.length-1;1<=o&&0<=h&&N[o]!==z[h];)h--;for(;1<=o&&0<=h;o--,h--)if(N[o]!==z[h]){if(o!==1||h!==1)do if(o--,h--,0>h||N[o]!==z[h]){var $=`
`+N[o].replace(" at new "," at ");return t.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",t.displayName)),$}while(1<=o&&0<=h);break}}}finally{Ii=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Yt(a):""}function Mn(t,i){switch(t.tag){case 26:case 27:case 5:return Yt(t.type);case 16:return Yt("Lazy");case 13:return t.child!==i&&i!==null?Yt("Suspense Fallback"):Yt("Suspense");case 19:return Yt("SuspenseList");case 0:case 15:return On(t.type,!1);case 11:return On(t.type.render,!1);case 1:return On(t.type,!0);case 31:return Yt("Activity");default:return""}}function ke(t){try{var i="",a=null;do i+=Mn(t,a),a=t,t=t.return;while(t);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Me=Object.prototype.hasOwnProperty,Ke=s.unstable_scheduleCallback,zt=s.unstable_cancelCallback,Yn=s.unstable_shouldYield,Ls=s.unstable_requestPaint,Gt=s.unstable_now,Dt=s.unstable_getCurrentPriorityLevel,hn=s.unstable_ImmediatePriority,Pr=s.unstable_UserBlockingPriority,Ni=s.unstable_NormalPriority,Go=s.unstable_LowPriority,Ur=s.unstable_IdlePriority,zr=s.log,Zi=s.unstable_setDisableYieldValue,fn=null,ot=null;function dn(t){if(typeof zr=="function"&&Zi(t),ot&&typeof ot.setStrictMode=="function")try{ot.setStrictMode(fn,t)}catch{}}var vt=Math.clz32?Math.clz32:Ps,Ca=Math.log,gi=Math.LN2;function Ps(t){return t>>>=0,t===0?32:31-(Ca(t)/gi|0)|0}var mn=256,Di=262144,wt=4194304;function kn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function En(t,i,a){var o=t.pendingLanes;if(o===0)return 0;var h=0,f=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var b=o&134217727;return b!==0?(o=b&~f,o!==0?h=kn(o):(_&=b,_!==0?h=kn(_):a||(a=b&~t,a!==0&&(h=kn(a))))):(b=o&~f,b!==0?h=kn(b):_!==0?h=kn(_):a||(a=o&~t,a!==0&&(h=kn(a)))),h===0?0:i!==0&&i!==h&&(i&f)===0&&(f=h&-h,a=i&-i,f>=a||f===32&&(a&4194048)!==0)?i:h}function bn(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Ra(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ia(){var t=wt;return wt<<=1,(wt&62914560)===0&&(wt=4194304),t}function Xn(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function es(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ko(t,i,a,o,h,f){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var b=t.entanglements,N=t.expirationTimes,z=t.hiddenUpdates;for(a=_&~a;0<a;){var $=31-vt(a),W=1<<$;b[$]=0,N[$]=-1;var H=z[$];if(H!==null)for(z[$]=null,$=0;$<H.length;$++){var K=H[$];K!==null&&(K.lane&=-536870913)}a&=~W}o!==0&&ts(t,o,0),f!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=f&~(_&~i))}function ts(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var o=31-vt(i);t.entangledLanes|=i,t.entanglements[o]=t.entanglements[o]|1073741824|a&261930}function Vn(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var o=31-vt(a),h=1<<o;h&i|t[o]&i&&(t[o]|=i),a&=~h}}function ns(t,i){var a=i&-i;return a=(a&42)!==0?1:is(a),(a&(t.suspendedLanes|i))!==0?0:a}function is(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function yi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Na(){var t=Q.p;return t!==0?t:(t=window.event,t===void 0?32:P0(t.type))}function jn(t,i){var a=Q.p;try{return Q.p=t,i()}finally{Q.p=a}}var Ln=Math.random().toString(36).slice(2),St="__reactFiber$"+Ln,Ot="__reactProps$"+Ln,$n="__reactContainer$"+Ln,Us="__reactEvents$"+Ln,Da="__reactListeners$"+Ln,Oa="__reactHandles$"+Ln,Ma="__reactResources$"+Ln,Jn="__reactMarker$"+Ln;function zs(t){delete t[St],delete t[Ot],delete t[Us],delete t[Da],delete t[Oa]}function Wn(t){var i=t[St];if(i)return i;for(var a=t.parentNode;a;){if(i=a[$n]||a[St]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=T0(t);t!==null;){if(a=t[St])return a;t=T0(t)}return i}t=a,a=t.parentNode}return null}function Tn(t){if(t=t[St]||t[$n]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function pn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(r(33))}function Pn(t){var i=t[Ma];return i||(i=t[Ma]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Et(t){t[Jn]=!0}var Bs=new Set,Br={};function Zn(t,i){ei(t,i),ei(t+"Capture",i)}function ei(t,i){for(Br[t]=i,t=0;t<i.length;t++)Bs.add(i[t])}var qs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qr={},Hr={};function ka(t){return Me.call(Hr,t)?!0:Me.call(qr,t)?!1:qs.test(t)?Hr[t]=!0:(qr[t]=!0,!1)}function Hs(t,i,a){if(ka(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function sn(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function bt(t,i,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+o)}}function Mt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Z(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function oe(t,i,a){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,f=o.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(_){a=""+_,f.call(this,_)}}),Object.defineProperty(t,i,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function ae(t){if(!t._valueTracker){var i=Z(t)?"checked":"value";t._valueTracker=oe(t,i,""+t[i])}}function Ie(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return t&&(o=Z(t)?t.checked?"true":"false":t.value),t=o,t!==a?(i.setValue(t),!0):!1}function $e(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var gn=/[\n"\\]/g;function rn(t){return t.replace(gn,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Va(t,i,a,o,h,f,_,b){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),i!=null?_==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+Mt(i)):t.value!==""+Mt(i)&&(t.value=""+Mt(i)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),i!=null?Qo(t,_,Mt(i)):a!=null?Qo(t,_,Mt(a)):o!=null&&t.removeAttribute("value"),h==null&&f!=null&&(t.defaultChecked=!!f),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+Mt(b):t.removeAttribute("name")}function bu(t,i,a,o,h,f,_,b){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),i!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||i!=null)){ae(t);return}a=a!=null?""+Mt(a):"",i=i!=null?""+Mt(i):a,b||i===t.value||(t.value=i),t.defaultValue=i}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=b?t.checked:!!o,t.defaultChecked=!!o,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),ae(t)}function Qo(t,i,a){i==="number"&&$e(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Fs(t,i,a,o){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&o&&(t[a].defaultSelected=!0)}else{for(a=""+Mt(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,o&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function Tu(t,i,a){if(i!=null&&(i=""+Mt(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+Mt(a):""}function Gs(t,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(r(92));if(et(o)){if(1<o.length)throw Error(r(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=Mt(i),t.defaultValue=a,o=t.textContent,o===a&&o!==""&&o!==null&&(t.value=o),ae(t)}function wn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var wu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yo(t,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":o?t.setProperty(i,a):typeof a!="number"||a===0||wu.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Xo(t,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(t=t.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var h in i)o=i[h],i.hasOwnProperty(h)&&a[h]!==o&&Yo(t,h,o)}else for(var f in i)i.hasOwnProperty(f)&&Yo(t,f,i[f])}function ja(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Su=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ks=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function La(t){return Ks.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function _i(){}var $o=null;function ti(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Qs=null,Oi=null;function Fr(t){var i=Tn(t);if(i&&(t=i.stateNode)){var a=t[Ot]||null;e:switch(t=i.stateNode,i.type){case"input":if(Va(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+rn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==t&&o.form===t.form){var h=o[Ot]||null;if(!h)throw Error(r(90));Va(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===t.form&&Ie(o)}break e;case"textarea":Tu(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Fs(t,!!a.multiple,i,!1)}}}var Pa=!1;function Ys(t,i,a){if(Pa)return t(i,a);Pa=!0;try{var o=t(i);return o}finally{if(Pa=!1,(Qs!==null||Oi!==null)&&(yc(),Qs&&(i=Qs,t=Oi,Oi=Qs=null,Fr(i),t)))for(i=0;i<t.length;i++)Fr(t[i])}}function vi(t,i){var a=t.stateNode;if(a===null)return null;var o=a[Ot]||null;if(o===null)return null;a=o[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gr=!1;if(ni)try{var lt={};Object.defineProperty(lt,"passive",{get:function(){Gr=!0}}),window.addEventListener("test",lt,lt),window.removeEventListener("test",lt,lt)}catch{Gr=!1}var Mi=null,Jo=null,Kr=null;function Wo(){if(Kr)return Kr;var t,i=Jo,a=i.length,o,h="value"in Mi?Mi.value:Mi.textContent,f=h.length;for(t=0;t<a&&i[t]===h[t];t++);var _=a-t;for(o=1;o<=_&&i[a-o]===h[f-o];o++);return Kr=h.slice(t,1<o?1-o:void 0)}function Qr(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function ss(){return!0}function Ei(){return!1}function Xt(t){function i(a,o,h,f,_){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=f,this.target=_,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(a=t[b],this[b]=a?a(f):f[b]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ss:Ei,this.isPropagationStopped=Ei,this}return S(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ss)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ss)},persist:function(){},isPersistent:ss}),i}var rs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ki=Xt(rs),Xs=S({},rs,{view:0,detail:0}),Zo=Xt(Xs),$s,Ua,Vi,za=S({},Xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Js,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vi&&(Vi&&t.type==="mousemove"?($s=t.screenX-Vi.screenX,Ua=t.screenY-Vi.screenY):Ua=$s=0,Vi=t),$s)},movementY:function(t){return"movementY"in t?t.movementY:Ua}}),el=Xt(za),Yr=S({},za,{dataTransfer:0}),Au=Xt(Yr),xu=S({},Xs,{relatedTarget:0}),Xr=Xt(xu),tl=S({},rs,{animationName:0,elapsedTime:0,pseudoElement:0}),Cu=Xt(tl),Ba=S({},rs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ru=Xt(Ba),Iu=S({},rs,{data:0}),ji=Xt(Iu),Nu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Du={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ou={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mu(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Ou[t])?!!i[t]:!1}function Js(){return Mu}var yn=S({},Xs,{key:function(t){if(t.key){var i=Nu[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Qr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Du[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Js,charCode:function(t){return t.type==="keypress"?Qr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Qr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ku=Xt(yn),Vu=S({},za,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),as=Xt(Vu),c=S({},Xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Js}),m=Xt(c),v=S({},rs,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=Xt(v),P=S({},za,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),G=Xt(P),ue=S({},rs,{newState:0,oldState:0}),Ve=Xt(ue),Ct=[9,13,27,32],tt=ni&&"CompositionEvent"in window,yt=null;ni&&"documentMode"in document&&(yt=document.documentMode);var ii=ni&&"TextEvent"in window&&!yt,Li=ni&&(!tt||yt&&8<yt&&11>=yt),bi=" ",Ti=!1;function $r(t,i){switch(t){case"keyup":return Ct.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qa(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ha=!1;function Nb(t,i){switch(t){case"compositionend":return qa(i);case"keypress":return i.which!==32?null:(Ti=!0,bi);case"textInput":return t=i.data,t===bi&&Ti?null:t;default:return null}}function Db(t,i){if(Ha)return t==="compositionend"||!tt&&$r(t,i)?(t=Wo(),Kr=Jo=Mi=null,Ha=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Li&&i.locale!=="ko"?null:i.data;default:return null}}var Ob={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ap(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Ob[t.type]:i==="textarea"}function xp(t,i,a,o){Qs?Oi?Oi.push(o):Oi=[o]:Qs=o,i=Sc(i,"onChange"),0<i.length&&(a=new ki("onChange","change",null,a,o),t.push({event:a,listeners:i}))}var nl=null,il=null;function Mb(t){l0(t,0)}function ju(t){var i=pn(t);if(Ie(i))return t}function Cp(t,i){if(t==="change")return i}var Rp=!1;if(ni){var Kh;if(ni){var Qh="oninput"in document;if(!Qh){var Ip=document.createElement("div");Ip.setAttribute("oninput","return;"),Qh=typeof Ip.oninput=="function"}Kh=Qh}else Kh=!1;Rp=Kh&&(!document.documentMode||9<document.documentMode)}function Np(){nl&&(nl.detachEvent("onpropertychange",Dp),il=nl=null)}function Dp(t){if(t.propertyName==="value"&&ju(il)){var i=[];xp(i,il,t,ti(t)),Ys(Mb,i)}}function kb(t,i,a){t==="focusin"?(Np(),nl=i,il=a,nl.attachEvent("onpropertychange",Dp)):t==="focusout"&&Np()}function Vb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ju(il)}function jb(t,i){if(t==="click")return ju(i)}function Lb(t,i){if(t==="input"||t==="change")return ju(i)}function Pb(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Un=typeof Object.is=="function"?Object.is:Pb;function sl(t,i){if(Un(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!Me.call(i,h)||!Un(t[h],i[h]))return!1}return!0}function Op(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Mp(t,i){var a=Op(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=i&&o>=i)return{node:a,offset:i-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Op(a)}}function kp(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?kp(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Vp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=$e(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=$e(t.document)}return i}function Yh(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var Ub=ni&&"documentMode"in document&&11>=document.documentMode,Fa=null,Xh=null,rl=null,$h=!1;function jp(t,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;$h||Fa==null||Fa!==$e(o)||(o=Fa,"selectionStart"in o&&Yh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),rl&&sl(rl,o)||(rl=o,o=Sc(Xh,"onSelect"),0<o.length&&(i=new ki("onSelect","select",null,i,a),t.push({event:i,listeners:o}),i.target=Fa)))}function Jr(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var Ga={animationend:Jr("Animation","AnimationEnd"),animationiteration:Jr("Animation","AnimationIteration"),animationstart:Jr("Animation","AnimationStart"),transitionrun:Jr("Transition","TransitionRun"),transitionstart:Jr("Transition","TransitionStart"),transitioncancel:Jr("Transition","TransitionCancel"),transitionend:Jr("Transition","TransitionEnd")},Jh={},Lp={};ni&&(Lp=document.createElement("div").style,"AnimationEvent"in window||(delete Ga.animationend.animation,delete Ga.animationiteration.animation,delete Ga.animationstart.animation),"TransitionEvent"in window||delete Ga.transitionend.transition);function Wr(t){if(Jh[t])return Jh[t];if(!Ga[t])return t;var i=Ga[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Lp)return Jh[t]=i[a];return t}var Pp=Wr("animationend"),Up=Wr("animationiteration"),zp=Wr("animationstart"),zb=Wr("transitionrun"),Bb=Wr("transitionstart"),qb=Wr("transitioncancel"),Bp=Wr("transitionend"),qp=new Map,Wh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wh.push("scrollEnd");function wi(t,i){qp.set(t,i),Zn(i,[t])}var Lu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},si=[],Ka=0,Zh=0;function Pu(){for(var t=Ka,i=Zh=Ka=0;i<t;){var a=si[i];si[i++]=null;var o=si[i];si[i++]=null;var h=si[i];si[i++]=null;var f=si[i];if(si[i++]=null,o!==null&&h!==null){var _=o.pending;_===null?h.next=h:(h.next=_.next,_.next=h),o.pending=h}f!==0&&Hp(a,h,f)}}function Uu(t,i,a,o){si[Ka++]=t,si[Ka++]=i,si[Ka++]=a,si[Ka++]=o,Zh|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function ef(t,i,a,o){return Uu(t,i,a,o),zu(t)}function Zr(t,i){return Uu(t,null,null,i),zu(t)}function Hp(t,i,a){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a);for(var h=!1,f=t.return;f!==null;)f.childLanes|=a,o=f.alternate,o!==null&&(o.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(h=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,h&&i!==null&&(h=31-vt(a),t=f.hiddenUpdates,o=t[h],o===null?t[h]=[i]:o.push(i),i.lane=a|536870912),f):null}function zu(t){if(50<Cl)throw Cl=0,cd=null,Error(r(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Qa={};function Hb(t,i,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zn(t,i,a,o){return new Hb(t,i,a,o)}function tf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function os(t,i){var a=t.alternate;return a===null?(a=zn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Fp(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Bu(t,i,a,o,h,f){var _=0;if(o=t,typeof t=="function")tf(t)&&(_=1);else if(typeof t=="string")_=YT(t,a,le.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case x:return t=zn(31,a,i,h),t.elementType=x,t.lanes=f,t;case B:return ea(a.children,h,f,i);case F:_=8,h|=24;break;case ie:return t=zn(12,a,i,h|2),t.elementType=ie,t.lanes=f,t;case Ee:return t=zn(13,a,i,h),t.elementType=Ee,t.lanes=f,t;case we:return t=zn(19,a,i,h),t.elementType=we,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case me:_=10;break e;case fe:_=9;break e;case Oe:_=11;break e;case C:_=14;break e;case A:_=16,o=null;break e}_=29,a=Error(r(130,t===null?"null":typeof t,"")),o=null}return i=zn(_,a,i,h),i.elementType=t,i.type=o,i.lanes=f,i}function ea(t,i,a,o){return t=zn(7,t,o,i),t.lanes=a,t}function nf(t,i,a){return t=zn(6,t,null,i),t.lanes=a,t}function Gp(t){var i=zn(18,null,null,0);return i.stateNode=t,i}function sf(t,i,a){return i=zn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Kp=new WeakMap;function ri(t,i){if(typeof t=="object"&&t!==null){var a=Kp.get(t);return a!==void 0?a:(i={value:t,source:i,stack:ke(i)},Kp.set(t,i),i)}return{value:t,source:i,stack:ke(i)}}var Ya=[],Xa=0,qu=null,al=0,ai=[],oi=0,Ws=null,Pi=1,Ui="";function ls(t,i){Ya[Xa++]=al,Ya[Xa++]=qu,qu=t,al=i}function Qp(t,i,a){ai[oi++]=Pi,ai[oi++]=Ui,ai[oi++]=Ws,Ws=t;var o=Pi;t=Ui;var h=32-vt(o)-1;o&=~(1<<h),a+=1;var f=32-vt(i)+h;if(30<f){var _=h-h%5;f=(o&(1<<_)-1).toString(32),o>>=_,h-=_,Pi=1<<32-vt(i)+h|a<<h|o,Ui=f+t}else Pi=1<<f|a<<h|o,Ui=t}function rf(t){t.return!==null&&(ls(t,1),Qp(t,1,0))}function af(t){for(;t===qu;)qu=Ya[--Xa],Ya[Xa]=null,al=Ya[--Xa],Ya[Xa]=null;for(;t===Ws;)Ws=ai[--oi],ai[oi]=null,Ui=ai[--oi],ai[oi]=null,Pi=ai[--oi],ai[oi]=null}function Yp(t,i){ai[oi++]=Pi,ai[oi++]=Ui,ai[oi++]=Ws,Pi=i.id,Ui=i.overflow,Ws=t}var $t=null,dt=null,Qe=!1,Zs=null,li=!1,of=Error(r(519));function er(t){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ol(ri(i,t)),of}function Xp(t){var i=t.stateNode,a=t.type,o=t.memoizedProps;switch(i[St]=t,i[Ot]=o,a){case"dialog":Ue("cancel",i),Ue("close",i);break;case"iframe":case"object":case"embed":Ue("load",i);break;case"video":case"audio":for(a=0;a<Il.length;a++)Ue(Il[a],i);break;case"source":Ue("error",i);break;case"img":case"image":case"link":Ue("error",i),Ue("load",i);break;case"details":Ue("toggle",i);break;case"input":Ue("invalid",i),bu(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Ue("invalid",i);break;case"textarea":Ue("invalid",i),Gs(i,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||f0(i.textContent,a)?(o.popover!=null&&(Ue("beforetoggle",i),Ue("toggle",i)),o.onScroll!=null&&Ue("scroll",i),o.onScrollEnd!=null&&Ue("scrollend",i),o.onClick!=null&&(i.onclick=_i),i=!0):i=!1,i||er(t,!0)}function $p(t){for($t=t.return;$t;)switch($t.tag){case 5:case 31:case 13:li=!1;return;case 27:case 3:li=!0;return;default:$t=$t.return}}function $a(t){if(t!==$t)return!1;if(!Qe)return $p(t),Qe=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Ad(t.type,t.memoizedProps)),a=!a),a&&dt&&er(t),$p(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));dt=b0(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));dt=b0(t)}else i===27?(i=dt,mr(t.type)?(t=Nd,Nd=null,dt=t):dt=i):dt=$t?ci(t.stateNode.nextSibling):null;return!0}function ta(){dt=$t=null,Qe=!1}function lf(){var t=Zs;return t!==null&&(Cn===null?Cn=t:Cn.push.apply(Cn,t),Zs=null),t}function ol(t){Zs===null?Zs=[t]:Zs.push(t)}var uf=I(null),na=null,us=null;function tr(t,i,a){re(uf,i._currentValue),i._currentValue=a}function cs(t){t._currentValue=uf.current,X(uf)}function cf(t,i,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),t===a)break;t=t.return}}function hf(t,i,a,o){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var f=h.dependencies;if(f!==null){var _=h.child;f=f.firstContext;e:for(;f!==null;){var b=f;f=h;for(var N=0;N<i.length;N++)if(b.context===i[N]){f.lanes|=a,b=f.alternate,b!==null&&(b.lanes|=a),cf(f.return,a,t),o||(_=null);break e}f=b.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(r(341));_.lanes|=a,f=_.alternate,f!==null&&(f.lanes|=a),cf(_,a,t),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===t){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function Ja(t,i,a,o){t=null;for(var h=i,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var b=h.type;Un(h.pendingProps.value,_.value)||(t!==null?t.push(b):t=[b])}}else if(h===ve.current){if(_=h.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(kl):t=[kl])}h=h.return}t!==null&&hf(i,t,a,o),i.flags|=262144}function Hu(t){for(t=t.firstContext;t!==null;){if(!Un(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ia(t){na=t,us=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Jt(t){return Jp(na,t)}function Fu(t,i){return na===null&&ia(t),Jp(t,i)}function Jp(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},us===null){if(t===null)throw Error(r(308));us=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else us=us.next=i;return a}var Fb=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,o){t.push(o)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},Gb=s.unstable_scheduleCallback,Kb=s.unstable_NormalPriority,kt={$$typeof:me,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ff(){return{controller:new Fb,data:new Map,refCount:0}}function ll(t){t.refCount--,t.refCount===0&&Gb(Kb,function(){t.controller.abort()})}var ul=null,df=0,Wa=0,Za=null;function Qb(t,i){if(ul===null){var a=ul=[];df=0,Wa=gd(),Za={status:"pending",value:void 0,then:function(o){a.push(o)}}}return df++,i.then(Wp,Wp),i}function Wp(){if(--df===0&&ul!==null){Za!==null&&(Za.status="fulfilled");var t=ul;ul=null,Wa=0,Za=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function Yb(t,i){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){o.status="fulfilled",o.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var Zp=Y.S;Y.S=function(t,i){jy=Gt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Qb(t,i),Zp!==null&&Zp(t,i)};var sa=I(null);function mf(){var t=sa.current;return t!==null?t:ft.pooledCache}function Gu(t,i){i===null?re(sa,sa.current):re(sa,i.pool)}function eg(){var t=mf();return t===null?null:{parent:kt._currentValue,pool:t}}var eo=Error(r(460)),pf=Error(r(474)),Ku=Error(r(542)),Qu={then:function(){}};function tg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function ng(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(_i,_i),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,sg(t),t;default:if(typeof i.status=="string")i.then(_i,_i);else{if(t=ft,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=i,t.status="pending",t.then(function(o){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=o}},function(o){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,sg(t),t}throw aa=i,eo}}function ra(t){try{var i=t._init;return i(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(aa=a,eo):a}}var aa=null;function ig(){if(aa===null)throw Error(r(459));var t=aa;return aa=null,t}function sg(t){if(t===eo||t===Ku)throw Error(r(483))}var to=null,cl=0;function Yu(t){var i=cl;return cl+=1,to===null&&(to=[]),ng(to,t,i)}function hl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Xu(t,i){throw i.$$typeof===D?Error(r(525)):(t=Object.prototype.toString.call(i),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function rg(t){function i(L,M){if(t){var U=L.deletions;U===null?(L.deletions=[M],L.flags|=16):U.push(M)}}function a(L,M){if(!t)return null;for(;M!==null;)i(L,M),M=M.sibling;return null}function o(L){for(var M=new Map;L!==null;)L.key!==null?M.set(L.key,L):M.set(L.index,L),L=L.sibling;return M}function h(L,M){return L=os(L,M),L.index=0,L.sibling=null,L}function f(L,M,U){return L.index=U,t?(U=L.alternate,U!==null?(U=U.index,U<M?(L.flags|=67108866,M):U):(L.flags|=67108866,M)):(L.flags|=1048576,M)}function _(L){return t&&L.alternate===null&&(L.flags|=67108866),L}function b(L,M,U,J){return M===null||M.tag!==6?(M=nf(U,L.mode,J),M.return=L,M):(M=h(M,U),M.return=L,M)}function N(L,M,U,J){var be=U.type;return be===B?$(L,M,U.props.children,J,U.key):M!==null&&(M.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===A&&ra(be)===M.type)?(M=h(M,U.props),hl(M,U),M.return=L,M):(M=Bu(U.type,U.key,U.props,null,L.mode,J),hl(M,U),M.return=L,M)}function z(L,M,U,J){return M===null||M.tag!==4||M.stateNode.containerInfo!==U.containerInfo||M.stateNode.implementation!==U.implementation?(M=sf(U,L.mode,J),M.return=L,M):(M=h(M,U.children||[]),M.return=L,M)}function $(L,M,U,J,be){return M===null||M.tag!==7?(M=ea(U,L.mode,J,be),M.return=L,M):(M=h(M,U),M.return=L,M)}function W(L,M,U){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=nf(""+M,L.mode,U),M.return=L,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case V:return U=Bu(M.type,M.key,M.props,null,L.mode,U),hl(U,M),U.return=L,U;case q:return M=sf(M,L.mode,U),M.return=L,M;case A:return M=ra(M),W(L,M,U)}if(et(M)||j(M))return M=ea(M,L.mode,U,null),M.return=L,M;if(typeof M.then=="function")return W(L,Yu(M),U);if(M.$$typeof===me)return W(L,Fu(L,M),U);Xu(L,M)}return null}function H(L,M,U,J){var be=M!==null?M.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return be!==null?null:b(L,M,""+U,J);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case V:return U.key===be?N(L,M,U,J):null;case q:return U.key===be?z(L,M,U,J):null;case A:return U=ra(U),H(L,M,U,J)}if(et(U)||j(U))return be!==null?null:$(L,M,U,J,null);if(typeof U.then=="function")return H(L,M,Yu(U),J);if(U.$$typeof===me)return H(L,M,Fu(L,U),J);Xu(L,U)}return null}function K(L,M,U,J,be){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return L=L.get(U)||null,b(M,L,""+J,be);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case V:return L=L.get(J.key===null?U:J.key)||null,N(M,L,J,be);case q:return L=L.get(J.key===null?U:J.key)||null,z(M,L,J,be);case A:return J=ra(J),K(L,M,U,J,be)}if(et(J)||j(J))return L=L.get(U)||null,$(M,L,J,be,null);if(typeof J.then=="function")return K(L,M,U,Yu(J),be);if(J.$$typeof===me)return K(L,M,U,Fu(M,J),be);Xu(M,J)}return null}function pe(L,M,U,J){for(var be=null,Je=null,ge=M,Le=M=0,qe=null;ge!==null&&Le<U.length;Le++){ge.index>Le?(qe=ge,ge=null):qe=ge.sibling;var We=H(L,ge,U[Le],J);if(We===null){ge===null&&(ge=qe);break}t&&ge&&We.alternate===null&&i(L,ge),M=f(We,M,Le),Je===null?be=We:Je.sibling=We,Je=We,ge=qe}if(Le===U.length)return a(L,ge),Qe&&ls(L,Le),be;if(ge===null){for(;Le<U.length;Le++)ge=W(L,U[Le],J),ge!==null&&(M=f(ge,M,Le),Je===null?be=ge:Je.sibling=ge,Je=ge);return Qe&&ls(L,Le),be}for(ge=o(ge);Le<U.length;Le++)qe=K(ge,L,Le,U[Le],J),qe!==null&&(t&&qe.alternate!==null&&ge.delete(qe.key===null?Le:qe.key),M=f(qe,M,Le),Je===null?be=qe:Je.sibling=qe,Je=qe);return t&&ge.forEach(function(vr){return i(L,vr)}),Qe&&ls(L,Le),be}function Se(L,M,U,J){if(U==null)throw Error(r(151));for(var be=null,Je=null,ge=M,Le=M=0,qe=null,We=U.next();ge!==null&&!We.done;Le++,We=U.next()){ge.index>Le?(qe=ge,ge=null):qe=ge.sibling;var vr=H(L,ge,We.value,J);if(vr===null){ge===null&&(ge=qe);break}t&&ge&&vr.alternate===null&&i(L,ge),M=f(vr,M,Le),Je===null?be=vr:Je.sibling=vr,Je=vr,ge=qe}if(We.done)return a(L,ge),Qe&&ls(L,Le),be;if(ge===null){for(;!We.done;Le++,We=U.next())We=W(L,We.value,J),We!==null&&(M=f(We,M,Le),Je===null?be=We:Je.sibling=We,Je=We);return Qe&&ls(L,Le),be}for(ge=o(ge);!We.done;Le++,We=U.next())We=K(ge,L,Le,We.value,J),We!==null&&(t&&We.alternate!==null&&ge.delete(We.key===null?Le:We.key),M=f(We,M,Le),Je===null?be=We:Je.sibling=We,Je=We);return t&&ge.forEach(function(rw){return i(L,rw)}),Qe&&ls(L,Le),be}function ht(L,M,U,J){if(typeof U=="object"&&U!==null&&U.type===B&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case V:e:{for(var be=U.key;M!==null;){if(M.key===be){if(be=U.type,be===B){if(M.tag===7){a(L,M.sibling),J=h(M,U.props.children),J.return=L,L=J;break e}}else if(M.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===A&&ra(be)===M.type){a(L,M.sibling),J=h(M,U.props),hl(J,U),J.return=L,L=J;break e}a(L,M);break}else i(L,M);M=M.sibling}U.type===B?(J=ea(U.props.children,L.mode,J,U.key),J.return=L,L=J):(J=Bu(U.type,U.key,U.props,null,L.mode,J),hl(J,U),J.return=L,L=J)}return _(L);case q:e:{for(be=U.key;M!==null;){if(M.key===be)if(M.tag===4&&M.stateNode.containerInfo===U.containerInfo&&M.stateNode.implementation===U.implementation){a(L,M.sibling),J=h(M,U.children||[]),J.return=L,L=J;break e}else{a(L,M);break}else i(L,M);M=M.sibling}J=sf(U,L.mode,J),J.return=L,L=J}return _(L);case A:return U=ra(U),ht(L,M,U,J)}if(et(U))return pe(L,M,U,J);if(j(U)){if(be=j(U),typeof be!="function")throw Error(r(150));return U=be.call(U),Se(L,M,U,J)}if(typeof U.then=="function")return ht(L,M,Yu(U),J);if(U.$$typeof===me)return ht(L,M,Fu(L,U),J);Xu(L,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,M!==null&&M.tag===6?(a(L,M.sibling),J=h(M,U),J.return=L,L=J):(a(L,M),J=nf(U,L.mode,J),J.return=L,L=J),_(L)):a(L,M)}return function(L,M,U,J){try{cl=0;var be=ht(L,M,U,J);return to=null,be}catch(ge){if(ge===eo||ge===Ku)throw ge;var Je=zn(29,ge,null,L.mode);return Je.lanes=J,Je.return=L,Je}finally{}}}var oa=rg(!0),ag=rg(!1),nr=!1;function gf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ir(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function sr(t,i,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(nt&2)!==0){var h=o.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),o.pending=i,i=zu(t),Hp(t,null,a),i}return Uu(t,o,i,a),zu(t)}function fl(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,Vn(t,a)}}function _f(t,i){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=_:f=f.next=_,a=a.next}while(a!==null);f===null?h=f=i:f=f.next=i}else h=f=i;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var vf=!1;function dl(){if(vf){var t=Za;if(t!==null)throw t}}function ml(t,i,a,o){vf=!1;var h=t.updateQueue;nr=!1;var f=h.firstBaseUpdate,_=h.lastBaseUpdate,b=h.shared.pending;if(b!==null){h.shared.pending=null;var N=b,z=N.next;N.next=null,_===null?f=z:_.next=z,_=N;var $=t.alternate;$!==null&&($=$.updateQueue,b=$.lastBaseUpdate,b!==_&&(b===null?$.firstBaseUpdate=z:b.next=z,$.lastBaseUpdate=N))}if(f!==null){var W=h.baseState;_=0,$=z=N=null,b=f;do{var H=b.lane&-536870913,K=H!==b.lane;if(K?(Be&H)===H:(o&H)===H){H!==0&&H===Wa&&(vf=!0),$!==null&&($=$.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var pe=t,Se=b;H=i;var ht=a;switch(Se.tag){case 1:if(pe=Se.payload,typeof pe=="function"){W=pe.call(ht,W,H);break e}W=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=Se.payload,H=typeof pe=="function"?pe.call(ht,W,H):pe,H==null)break e;W=S({},W,H);break e;case 2:nr=!0}}H=b.callback,H!==null&&(t.flags|=64,K&&(t.flags|=8192),K=h.callbacks,K===null?h.callbacks=[H]:K.push(H))}else K={lane:H,tag:b.tag,payload:b.payload,callback:b.callback,next:null},$===null?(z=$=K,N=W):$=$.next=K,_|=H;if(b=b.next,b===null){if(b=h.shared.pending,b===null)break;K=b,b=K.next,K.next=null,h.lastBaseUpdate=K,h.shared.pending=null}}while(!0);$===null&&(N=W),h.baseState=N,h.firstBaseUpdate=z,h.lastBaseUpdate=$,f===null&&(h.shared.lanes=0),ur|=_,t.lanes=_,t.memoizedState=W}}function og(t,i){if(typeof t!="function")throw Error(r(191,t));t.call(i)}function lg(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)og(a[t],i)}var no=I(null),$u=I(0);function ug(t,i){t=vs,re($u,t),re(no,i),vs=t|i.baseLanes}function Ef(){re($u,vs),re(no,no.current)}function bf(){vs=$u.current,X(no),X($u)}var Bn=I(null),ui=null;function rr(t){var i=t.alternate;re(Rt,Rt.current&1),re(Bn,t),ui===null&&(i===null||no.current!==null||i.memoizedState!==null)&&(ui=t)}function Tf(t){re(Rt,Rt.current),re(Bn,t),ui===null&&(ui=t)}function cg(t){t.tag===22?(re(Rt,Rt.current),re(Bn,t),ui===null&&(ui=t)):ar()}function ar(){re(Rt,Rt.current),re(Bn,Bn.current)}function qn(t){X(Bn),ui===t&&(ui=null),X(Rt)}var Rt=I(0);function Ju(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Rd(a)||Id(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var hs=0,je=null,ut=null,Vt=null,Wu=!1,io=!1,la=!1,Zu=0,pl=0,so=null,Xb=0;function At(){throw Error(r(321))}function wf(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!Un(t[a],i[a]))return!1;return!0}function Sf(t,i,a,o,h,f){return hs=f,je=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Y.H=t===null||t.memoizedState===null?Qg:Uf,la=!1,f=a(o,h),la=!1,io&&(f=fg(i,a,o,h)),hg(t),f}function hg(t){Y.H=_l;var i=ut!==null&&ut.next!==null;if(hs=0,Vt=ut=je=null,Wu=!1,pl=0,so=null,i)throw Error(r(300));t===null||jt||(t=t.dependencies,t!==null&&Hu(t)&&(jt=!0))}function fg(t,i,a,o){je=t;var h=0;do{if(io&&(so=null),pl=0,io=!1,25<=h)throw Error(r(301));if(h+=1,Vt=ut=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}Y.H=Yg,f=i(a,o)}while(io);return f}function $b(){var t=Y.H,i=t.useState()[0];return i=typeof i.then=="function"?gl(i):i,t=t.useState()[0],(ut!==null?ut.memoizedState:null)!==t&&(je.flags|=1024),i}function Af(){var t=Zu!==0;return Zu=0,t}function xf(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Cf(t){if(Wu){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Wu=!1}hs=0,Vt=ut=je=null,io=!1,pl=Zu=0,so=null}function _n(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?je.memoizedState=Vt=t:Vt=Vt.next=t,Vt}function It(){if(ut===null){var t=je.alternate;t=t!==null?t.memoizedState:null}else t=ut.next;var i=Vt===null?je.memoizedState:Vt.next;if(i!==null)Vt=i,ut=t;else{if(t===null)throw je.alternate===null?Error(r(467)):Error(r(310));ut=t,t={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},Vt===null?je.memoizedState=Vt=t:Vt=Vt.next=t}return Vt}function ec(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gl(t){var i=pl;return pl+=1,so===null&&(so=[]),t=ng(so,t,i),i=je,(Vt===null?i.memoizedState:Vt.next)===null&&(i=i.alternate,Y.H=i===null||i.memoizedState===null?Qg:Uf),t}function tc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return gl(t);if(t.$$typeof===me)return Jt(t)}throw Error(r(438,String(t)))}function Rf(t){var i=null,a=je.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=je.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=ec(),je.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),o=0;o<t;o++)a[o]=k;return i.index++,a}function fs(t,i){return typeof i=="function"?i(t):i}function nc(t){var i=It();return If(i,ut,t)}function If(t,i,a){var o=t.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=a;var h=t.baseQueue,f=o.pending;if(f!==null){if(h!==null){var _=h.next;h.next=f.next,f.next=_}i.baseQueue=h=f,o.pending=null}if(f=t.baseState,h===null)t.memoizedState=f;else{i=h.next;var b=_=null,N=null,z=i,$=!1;do{var W=z.lane&-536870913;if(W!==z.lane?(Be&W)===W:(hs&W)===W){var H=z.revertLane;if(H===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),W===Wa&&($=!0);else if((hs&H)===H){z=z.next,H===Wa&&($=!0);continue}else W={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},N===null?(b=N=W,_=f):N=N.next=W,je.lanes|=H,ur|=H;W=z.action,la&&a(f,W),f=z.hasEagerState?z.eagerState:a(f,W)}else H={lane:W,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},N===null?(b=N=H,_=f):N=N.next=H,je.lanes|=W,ur|=W;z=z.next}while(z!==null&&z!==i);if(N===null?_=f:N.next=b,!Un(f,t.memoizedState)&&(jt=!0,$&&(a=Za,a!==null)))throw a;t.memoizedState=f,t.baseState=_,t.baseQueue=N,o.lastRenderedState=f}return h===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Nf(t){var i=It(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var o=a.dispatch,h=a.pending,f=i.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do f=t(f,_.action),_=_.next;while(_!==h);Un(f,i.memoizedState)||(jt=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),a.lastRenderedState=f}return[f,o]}function dg(t,i,a){var o=je,h=It(),f=Qe;if(f){if(a===void 0)throw Error(r(407));a=a()}else a=i();var _=!Un((ut||h).memoizedState,a);if(_&&(h.memoizedState=a,jt=!0),h=h.queue,Mf(gg.bind(null,o,h,t),[t]),h.getSnapshot!==i||_||Vt!==null&&Vt.memoizedState.tag&1){if(o.flags|=2048,ro(9,{destroy:void 0},pg.bind(null,o,h,a,i),null),ft===null)throw Error(r(349));f||(hs&127)!==0||mg(o,i,a)}return a}function mg(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=je.updateQueue,i===null?(i=ec(),je.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function pg(t,i,a,o){i.value=a,i.getSnapshot=o,yg(i)&&_g(t)}function gg(t,i,a){return a(function(){yg(i)&&_g(t)})}function yg(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!Un(t,a)}catch{return!0}}function _g(t){var i=Zr(t,2);i!==null&&Rn(i,t,2)}function Df(t){var i=_n();if(typeof t=="function"){var a=t;if(t=a(),la){dn(!0);try{a()}finally{dn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:t},i}function vg(t,i,a,o){return t.baseState=a,If(t,ut,typeof o=="function"?o:fs)}function Jb(t,i,a,o,h){if(rc(t))throw Error(r(485));if(t=i.action,t!==null){var f={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){f.listeners.push(_)}};Y.T!==null?a(!0):f.isTransition=!1,o(f),a=i.pending,a===null?(f.next=i.pending=f,Eg(i,f)):(f.next=a.next,i.pending=a.next=f)}}function Eg(t,i){var a=i.action,o=i.payload,h=t.state;if(i.isTransition){var f=Y.T,_={};Y.T=_;try{var b=a(h,o),N=Y.S;N!==null&&N(_,b),bg(t,i,b)}catch(z){Of(t,i,z)}finally{f!==null&&_.types!==null&&(f.types=_.types),Y.T=f}}else try{f=a(h,o),bg(t,i,f)}catch(z){Of(t,i,z)}}function bg(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Tg(t,i,o)},function(o){return Of(t,i,o)}):Tg(t,i,a)}function Tg(t,i,a){i.status="fulfilled",i.value=a,wg(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,Eg(t,a)))}function Of(t,i,a){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,wg(i),i=i.next;while(i!==o)}t.action=null}function wg(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Sg(t,i){return i}function Ag(t,i){if(Qe){var a=ft.formState;if(a!==null){e:{var o=je;if(Qe){if(dt){t:{for(var h=dt,f=li;h.nodeType!==8;){if(!f){h=null;break t}if(h=ci(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){dt=ci(h.nextSibling),o=h.data==="F!";break e}}er(o)}o=!1}o&&(i=a[0])}}return a=_n(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sg,lastRenderedState:i},a.queue=o,a=Fg.bind(null,je,o),o.dispatch=a,o=Df(!1),f=Pf.bind(null,je,!1,o.queue),o=_n(),h={state:i,dispatch:null,action:t,pending:null},o.queue=h,a=Jb.bind(null,je,h,f,a),h.dispatch=a,o.memoizedState=t,[i,a,!1]}function xg(t){var i=It();return Cg(i,ut,t)}function Cg(t,i,a){if(i=If(t,i,Sg)[0],t=nc(fs)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=gl(i)}catch(_){throw _===eo?Ku:_}else o=i;i=It();var h=i.queue,f=h.dispatch;return a!==i.memoizedState&&(je.flags|=2048,ro(9,{destroy:void 0},Wb.bind(null,h,a),null)),[o,f,t]}function Wb(t,i){t.action=i}function Rg(t){var i=It(),a=ut;if(a!==null)return Cg(i,a,t);It(),i=i.memoizedState,a=It();var o=a.queue.dispatch;return a.memoizedState=t,[i,o,!1]}function ro(t,i,a,o){return t={tag:t,create:a,deps:o,inst:i,next:null},i=je.updateQueue,i===null&&(i=ec(),je.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,i.lastEffect=t),t}function Ig(){return It().memoizedState}function ic(t,i,a,o){var h=_n();je.flags|=t,h.memoizedState=ro(1|i,{destroy:void 0},a,o===void 0?null:o)}function sc(t,i,a,o){var h=It();o=o===void 0?null:o;var f=h.memoizedState.inst;ut!==null&&o!==null&&wf(o,ut.memoizedState.deps)?h.memoizedState=ro(i,f,a,o):(je.flags|=t,h.memoizedState=ro(1|i,f,a,o))}function Ng(t,i){ic(8390656,8,t,i)}function Mf(t,i){sc(2048,8,t,i)}function Zb(t){je.flags|=4;var i=je.updateQueue;if(i===null)i=ec(),je.updateQueue=i,i.events=[t];else{var a=i.events;a===null?i.events=[t]:a.push(t)}}function Dg(t){var i=It().memoizedState;return Zb({ref:i,nextImpl:t}),function(){if((nt&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function Og(t,i){return sc(4,2,t,i)}function Mg(t,i){return sc(4,4,t,i)}function kg(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Vg(t,i,a){a=a!=null?a.concat([t]):null,sc(4,4,kg.bind(null,i,t),a)}function kf(){}function jg(t,i){var a=It();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&wf(i,o[1])?o[0]:(a.memoizedState=[t,i],t)}function Lg(t,i){var a=It();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&wf(i,o[1]))return o[0];if(o=t(),la){dn(!0);try{t()}finally{dn(!1)}}return a.memoizedState=[o,i],o}function Vf(t,i,a){return a===void 0||(hs&1073741824)!==0&&(Be&261930)===0?t.memoizedState=i:(t.memoizedState=a,t=Py(),je.lanes|=t,ur|=t,a)}function Pg(t,i,a,o){return Un(a,i)?a:no.current!==null?(t=Vf(t,a,o),Un(t,i)||(jt=!0),t):(hs&42)===0||(hs&1073741824)!==0&&(Be&261930)===0?(jt=!0,t.memoizedState=a):(t=Py(),je.lanes|=t,ur|=t,i)}function Ug(t,i,a,o,h){var f=Q.p;Q.p=f!==0&&8>f?f:8;var _=Y.T,b={};Y.T=b,Pf(t,!1,i,a);try{var N=h(),z=Y.S;if(z!==null&&z(b,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var $=Yb(N,o);yl(t,i,$,Gn(t))}else yl(t,i,o,Gn(t))}catch(W){yl(t,i,{then:function(){},status:"rejected",reason:W},Gn())}finally{Q.p=f,_!==null&&b.types!==null&&(_.types=b.types),Y.T=_}}function eT(){}function jf(t,i,a,o){if(t.tag!==5)throw Error(r(476));var h=zg(t).queue;Ug(t,h,i,se,a===null?eT:function(){return Bg(t),a(o)})}function zg(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:se},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Bg(t){var i=zg(t);i.next===null&&(i=t.alternate.memoizedState),yl(t,i.next.queue,{},Gn())}function Lf(){return Jt(kl)}function qg(){return It().memoizedState}function Hg(){return It().memoizedState}function tT(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=Gn();t=ir(a);var o=sr(i,t,a);o!==null&&(Rn(o,i,a),fl(o,i,a)),i={cache:ff()},t.payload=i;return}i=i.return}}function nT(t,i,a){var o=Gn();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},rc(t)?Gg(i,a):(a=ef(t,i,a,o),a!==null&&(Rn(a,t,o),Kg(a,i,o)))}function Fg(t,i,a){var o=Gn();yl(t,i,a,o)}function yl(t,i,a,o){var h={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(rc(t))Gg(i,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var _=i.lastRenderedState,b=f(_,a);if(h.hasEagerState=!0,h.eagerState=b,Un(b,_))return Uu(t,i,h,0),ft===null&&Pu(),!1}catch{}finally{}if(a=ef(t,i,h,o),a!==null)return Rn(a,t,o),Kg(a,i,o),!0}return!1}function Pf(t,i,a,o){if(o={lane:2,revertLane:gd(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},rc(t)){if(i)throw Error(r(479))}else i=ef(t,a,o,2),i!==null&&Rn(i,t,2)}function rc(t){var i=t.alternate;return t===je||i!==null&&i===je}function Gg(t,i){io=Wu=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function Kg(t,i,a){if((a&4194048)!==0){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,Vn(t,a)}}var _l={readContext:Jt,use:tc,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useLayoutEffect:At,useInsertionEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useSyncExternalStore:At,useId:At,useHostTransitionStatus:At,useFormState:At,useActionState:At,useOptimistic:At,useMemoCache:At,useCacheRefresh:At};_l.useEffectEvent=At;var Qg={readContext:Jt,use:tc,useCallback:function(t,i){return _n().memoizedState=[t,i===void 0?null:i],t},useContext:Jt,useEffect:Ng,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,ic(4194308,4,kg.bind(null,i,t),a)},useLayoutEffect:function(t,i){return ic(4194308,4,t,i)},useInsertionEffect:function(t,i){ic(4,2,t,i)},useMemo:function(t,i){var a=_n();i=i===void 0?null:i;var o=t();if(la){dn(!0);try{t()}finally{dn(!1)}}return a.memoizedState=[o,i],o},useReducer:function(t,i,a){var o=_n();if(a!==void 0){var h=a(i);if(la){dn(!0);try{a(i)}finally{dn(!1)}}}else h=i;return o.memoizedState=o.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},o.queue=t,t=t.dispatch=nT.bind(null,je,t),[o.memoizedState,t]},useRef:function(t){var i=_n();return t={current:t},i.memoizedState=t},useState:function(t){t=Df(t);var i=t.queue,a=Fg.bind(null,je,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:kf,useDeferredValue:function(t,i){var a=_n();return Vf(a,t,i)},useTransition:function(){var t=Df(!1);return t=Ug.bind(null,je,t.queue,!0,!1),_n().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var o=je,h=_n();if(Qe){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),ft===null)throw Error(r(349));(Be&127)!==0||mg(o,i,a)}h.memoizedState=a;var f={value:a,getSnapshot:i};return h.queue=f,Ng(gg.bind(null,o,f,t),[t]),o.flags|=2048,ro(9,{destroy:void 0},pg.bind(null,o,f,a,i),null),a},useId:function(){var t=_n(),i=ft.identifierPrefix;if(Qe){var a=Ui,o=Pi;a=(o&~(1<<32-vt(o)-1)).toString(32)+a,i="_"+i+"R_"+a,a=Zu++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=Xb++,i="_"+i+"r_"+a.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:Lf,useFormState:Ag,useActionState:Ag,useOptimistic:function(t){var i=_n();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Pf.bind(null,je,!0,a),a.dispatch=i,[t,i]},useMemoCache:Rf,useCacheRefresh:function(){return _n().memoizedState=tT.bind(null,je)},useEffectEvent:function(t){var i=_n(),a={impl:t};return i.memoizedState=a,function(){if((nt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Uf={readContext:Jt,use:tc,useCallback:jg,useContext:Jt,useEffect:Mf,useImperativeHandle:Vg,useInsertionEffect:Og,useLayoutEffect:Mg,useMemo:Lg,useReducer:nc,useRef:Ig,useState:function(){return nc(fs)},useDebugValue:kf,useDeferredValue:function(t,i){var a=It();return Pg(a,ut.memoizedState,t,i)},useTransition:function(){var t=nc(fs)[0],i=It().memoizedState;return[typeof t=="boolean"?t:gl(t),i]},useSyncExternalStore:dg,useId:qg,useHostTransitionStatus:Lf,useFormState:xg,useActionState:xg,useOptimistic:function(t,i){var a=It();return vg(a,ut,t,i)},useMemoCache:Rf,useCacheRefresh:Hg};Uf.useEffectEvent=Dg;var Yg={readContext:Jt,use:tc,useCallback:jg,useContext:Jt,useEffect:Mf,useImperativeHandle:Vg,useInsertionEffect:Og,useLayoutEffect:Mg,useMemo:Lg,useReducer:Nf,useRef:Ig,useState:function(){return Nf(fs)},useDebugValue:kf,useDeferredValue:function(t,i){var a=It();return ut===null?Vf(a,t,i):Pg(a,ut.memoizedState,t,i)},useTransition:function(){var t=Nf(fs)[0],i=It().memoizedState;return[typeof t=="boolean"?t:gl(t),i]},useSyncExternalStore:dg,useId:qg,useHostTransitionStatus:Lf,useFormState:Rg,useActionState:Rg,useOptimistic:function(t,i){var a=It();return ut!==null?vg(a,ut,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Rf,useCacheRefresh:Hg};Yg.useEffectEvent=Dg;function zf(t,i,a,o){i=t.memoizedState,a=a(o,i),a=a==null?i:S({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Bf={enqueueSetState:function(t,i,a){t=t._reactInternals;var o=Gn(),h=ir(o);h.payload=i,a!=null&&(h.callback=a),i=sr(t,h,o),i!==null&&(Rn(i,t,o),fl(i,t,o))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var o=Gn(),h=ir(o);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=sr(t,h,o),i!==null&&(Rn(i,t,o),fl(i,t,o))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=Gn(),o=ir(a);o.tag=2,i!=null&&(o.callback=i),i=sr(t,o,a),i!==null&&(Rn(i,t,a),fl(i,t,a))}};function Xg(t,i,a,o,h,f,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,f,_):i.prototype&&i.prototype.isPureReactComponent?!sl(a,o)||!sl(h,f):!0}function $g(t,i,a,o){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==t&&Bf.enqueueReplaceState(i,i.state,null)}function ua(t,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(t=t.defaultProps){a===i&&(a=S({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function Jg(t){Lu(t)}function Wg(t){console.error(t)}function Zg(t){Lu(t)}function ac(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function ey(t,i,a){try{var o=t.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function qf(t,i,a){return a=ir(a),a.tag=3,a.payload={element:null},a.callback=function(){ac(t,i)},a}function ty(t){return t=ir(t),t.tag=3,t}function ny(t,i,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=o.value;t.payload=function(){return h(f)},t.callback=function(){ey(i,a,o)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){ey(i,a,o),typeof h!="function"&&(cr===null?cr=new Set([this]):cr.add(this));var b=o.stack;this.componentDidCatch(o.value,{componentStack:b!==null?b:""})})}function iT(t,i,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&Ja(i,a,h,!0),a=Bn.current,a!==null){switch(a.tag){case 31:case 13:return ui===null?_c():a.alternate===null&&xt===0&&(xt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===Qu?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),dd(t,o,h)),!1;case 22:return a.flags|=65536,o===Qu?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),dd(t,o,h)),!1}throw Error(r(435,a.tag))}return dd(t,o,h),_c(),!1}if(Qe)return i=Bn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,o!==of&&(t=Error(r(422),{cause:o}),ol(ri(t,a)))):(o!==of&&(i=Error(r(423),{cause:o}),ol(ri(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,o=ri(o,a),h=qf(t.stateNode,o,h),_f(t,h),xt!==4&&(xt=2)),!1;var f=Error(r(520),{cause:o});if(f=ri(f,a),xl===null?xl=[f]:xl.push(f),xt!==4&&(xt=2),i===null)return!0;o=ri(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=qf(a.stateNode,o,t),_f(a,t),!1;case 1:if(i=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(cr===null||!cr.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=ty(h),ny(h,t,a,o),_f(a,h),!1}a=a.return}while(a!==null);return!1}var Hf=Error(r(461)),jt=!1;function Wt(t,i,a,o){i.child=t===null?ag(i,null,a,o):oa(i,t.child,a,o)}function iy(t,i,a,o,h){a=a.render;var f=i.ref;if("ref"in o){var _={};for(var b in o)b!=="ref"&&(_[b]=o[b])}else _=o;return ia(i),o=Sf(t,i,a,_,f,h),b=Af(),t!==null&&!jt?(xf(t,i,h),ds(t,i,h)):(Qe&&b&&rf(i),i.flags|=1,Wt(t,i,o,h),i.child)}function sy(t,i,a,o,h){if(t===null){var f=a.type;return typeof f=="function"&&!tf(f)&&f.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=f,ry(t,i,f,o,h)):(t=Bu(a.type,null,o,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(f=t.child,!Jf(t,h)){var _=f.memoizedProps;if(a=a.compare,a=a!==null?a:sl,a(_,o)&&t.ref===i.ref)return ds(t,i,h)}return i.flags|=1,t=os(f,o),t.ref=i.ref,t.return=i,i.child=t}function ry(t,i,a,o,h){if(t!==null){var f=t.memoizedProps;if(sl(f,o)&&t.ref===i.ref)if(jt=!1,i.pendingProps=o=f,Jf(t,h))(t.flags&131072)!==0&&(jt=!0);else return i.lanes=t.lanes,ds(t,i,h)}return Ff(t,i,a,o,h)}function ay(t,i,a,o){var h=o.children,f=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((i.flags&128)!==0){if(f=f!==null?f.baseLanes|a:a,t!==null){for(o=i.child=t.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~f}else o=0,i.child=null;return oy(t,i,f,a,o)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Gu(i,f!==null?f.cachePool:null),f!==null?ug(i,f):Ef(),cg(i);else return o=i.lanes=536870912,oy(t,i,f!==null?f.baseLanes|a:a,a,o)}else f!==null?(Gu(i,f.cachePool),ug(i,f),ar(),i.memoizedState=null):(t!==null&&Gu(i,null),Ef(),ar());return Wt(t,i,h,a),i.child}function vl(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function oy(t,i,a,o,h){var f=mf();return f=f===null?null:{parent:kt._currentValue,pool:f},i.memoizedState={baseLanes:a,cachePool:f},t!==null&&Gu(i,null),Ef(),cg(i),t!==null&&Ja(t,i,o,!0),i.childLanes=h,null}function oc(t,i){return i=uc({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function ly(t,i,a){return oa(i,t.child,null,a),t=oc(i,i.pendingProps),t.flags|=2,qn(i),i.memoizedState=null,t}function sT(t,i,a){var o=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(Qe){if(o.mode==="hidden")return t=oc(i,o),i.lanes=536870912,vl(null,t);if(Tf(i),(t=dt)?(t=E0(t,li),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Ws!==null?{id:Pi,overflow:Ui}:null,retryLane:536870912,hydrationErrors:null},a=Gp(t),a.return=i,i.child=a,$t=i,dt=null)):t=null,t===null)throw er(i);return i.lanes=536870912,null}return oc(i,o)}var f=t.memoizedState;if(f!==null){var _=f.dehydrated;if(Tf(i),h)if(i.flags&256)i.flags&=-257,i=ly(t,i,a);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(r(558));else if(jt||Ja(t,i,a,!1),h=(a&t.childLanes)!==0,jt||h){if(o=ft,o!==null&&(_=ns(o,a),_!==0&&_!==f.retryLane))throw f.retryLane=_,Zr(t,_),Rn(o,t,_),Hf;_c(),i=ly(t,i,a)}else t=f.treeContext,dt=ci(_.nextSibling),$t=i,Qe=!0,Zs=null,li=!1,t!==null&&Yp(i,t),i=oc(i,o),i.flags|=4096;return i}return t=os(t.child,{mode:o.mode,children:o.children}),t.ref=i.ref,i.child=t,t.return=i,t}function lc(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Ff(t,i,a,o,h){return ia(i),a=Sf(t,i,a,o,void 0,h),o=Af(),t!==null&&!jt?(xf(t,i,h),ds(t,i,h)):(Qe&&o&&rf(i),i.flags|=1,Wt(t,i,a,h),i.child)}function uy(t,i,a,o,h,f){return ia(i),i.updateQueue=null,a=fg(i,o,a,h),hg(t),o=Af(),t!==null&&!jt?(xf(t,i,f),ds(t,i,f)):(Qe&&o&&rf(i),i.flags|=1,Wt(t,i,a,f),i.child)}function cy(t,i,a,o,h){if(ia(i),i.stateNode===null){var f=Qa,_=a.contextType;typeof _=="object"&&_!==null&&(f=Jt(_)),f=new a(o,f),i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Bf,i.stateNode=f,f._reactInternals=i,f=i.stateNode,f.props=o,f.state=i.memoizedState,f.refs={},gf(i),_=a.contextType,f.context=typeof _=="object"&&_!==null?Jt(_):Qa,f.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(zf(i,a,_,o),f.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(_=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),_!==f.state&&Bf.enqueueReplaceState(f,f.state,null),ml(i,o,f,h),dl(),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(t===null){f=i.stateNode;var b=i.memoizedProps,N=ua(a,b);f.props=N;var z=f.context,$=a.contextType;_=Qa,typeof $=="object"&&$!==null&&(_=Jt($));var W=a.getDerivedStateFromProps;$=typeof W=="function"||typeof f.getSnapshotBeforeUpdate=="function",b=i.pendingProps!==b,$||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(b||z!==_)&&$g(i,f,o,_),nr=!1;var H=i.memoizedState;f.state=H,ml(i,o,f,h),dl(),z=i.memoizedState,b||H!==z||nr?(typeof W=="function"&&(zf(i,a,W,o),z=i.memoizedState),(N=nr||Xg(i,a,N,o,H,z,_))?($||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(i.flags|=4194308)):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=z),f.props=o,f.state=z,f.context=_,o=N):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{f=i.stateNode,yf(t,i),_=i.memoizedProps,$=ua(a,_),f.props=$,W=i.pendingProps,H=f.context,z=a.contextType,N=Qa,typeof z=="object"&&z!==null&&(N=Jt(z)),b=a.getDerivedStateFromProps,(z=typeof b=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(_!==W||H!==N)&&$g(i,f,o,N),nr=!1,H=i.memoizedState,f.state=H,ml(i,o,f,h),dl();var K=i.memoizedState;_!==W||H!==K||nr||t!==null&&t.dependencies!==null&&Hu(t.dependencies)?(typeof b=="function"&&(zf(i,a,b,o),K=i.memoizedState),($=nr||Xg(i,a,$,o,H,K,N)||t!==null&&t.dependencies!==null&&Hu(t.dependencies))?(z||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,K,N),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,K,N)),typeof f.componentDidUpdate=="function"&&(i.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof f.componentDidUpdate!="function"||_===t.memoizedProps&&H===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&H===t.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=K),f.props=o,f.state=K,f.context=N,o=$):(typeof f.componentDidUpdate!="function"||_===t.memoizedProps&&H===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&H===t.memoizedState||(i.flags|=1024),o=!1)}return f=o,lc(t,i),o=(i.flags&128)!==0,f||o?(f=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:f.render(),i.flags|=1,t!==null&&o?(i.child=oa(i,t.child,null,h),i.child=oa(i,null,a,h)):Wt(t,i,a,h),i.memoizedState=f.state,t=i.child):t=ds(t,i,h),t}function hy(t,i,a,o){return ta(),i.flags|=256,Wt(t,i,a,o),i.child}var Gf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Kf(t){return{baseLanes:t,cachePool:eg()}}function Qf(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=Fn),t}function fy(t,i,a){var o=i.pendingProps,h=!1,f=(i.flags&128)!==0,_;if((_=f)||(_=t!==null&&t.memoizedState===null?!1:(Rt.current&2)!==0),_&&(h=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,t===null){if(Qe){if(h?rr(i):ar(),(t=dt)?(t=E0(t,li),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Ws!==null?{id:Pi,overflow:Ui}:null,retryLane:536870912,hydrationErrors:null},a=Gp(t),a.return=i,i.child=a,$t=i,dt=null)):t=null,t===null)throw er(i);return Id(t)?i.lanes=32:i.lanes=536870912,null}var b=o.children;return o=o.fallback,h?(ar(),h=i.mode,b=uc({mode:"hidden",children:b},h),o=ea(o,h,a,null),b.return=i,o.return=i,b.sibling=o,i.child=b,o=i.child,o.memoizedState=Kf(a),o.childLanes=Qf(t,_,a),i.memoizedState=Gf,vl(null,o)):(rr(i),Yf(i,b))}var N=t.memoizedState;if(N!==null&&(b=N.dehydrated,b!==null)){if(f)i.flags&256?(rr(i),i.flags&=-257,i=Xf(t,i,a)):i.memoizedState!==null?(ar(),i.child=t.child,i.flags|=128,i=null):(ar(),b=o.fallback,h=i.mode,o=uc({mode:"visible",children:o.children},h),b=ea(b,h,a,null),b.flags|=2,o.return=i,b.return=i,o.sibling=b,i.child=o,oa(i,t.child,null,a),o=i.child,o.memoizedState=Kf(a),o.childLanes=Qf(t,_,a),i.memoizedState=Gf,i=vl(null,o));else if(rr(i),Id(b)){if(_=b.nextSibling&&b.nextSibling.dataset,_)var z=_.dgst;_=z,o=Error(r(419)),o.stack="",o.digest=_,ol({value:o,source:null,stack:null}),i=Xf(t,i,a)}else if(jt||Ja(t,i,a,!1),_=(a&t.childLanes)!==0,jt||_){if(_=ft,_!==null&&(o=ns(_,a),o!==0&&o!==N.retryLane))throw N.retryLane=o,Zr(t,o),Rn(_,t,o),Hf;Rd(b)||_c(),i=Xf(t,i,a)}else Rd(b)?(i.flags|=192,i.child=t.child,i=null):(t=N.treeContext,dt=ci(b.nextSibling),$t=i,Qe=!0,Zs=null,li=!1,t!==null&&Yp(i,t),i=Yf(i,o.children),i.flags|=4096);return i}return h?(ar(),b=o.fallback,h=i.mode,N=t.child,z=N.sibling,o=os(N,{mode:"hidden",children:o.children}),o.subtreeFlags=N.subtreeFlags&65011712,z!==null?b=os(z,b):(b=ea(b,h,a,null),b.flags|=2),b.return=i,o.return=i,o.sibling=b,i.child=o,vl(null,o),o=i.child,b=t.child.memoizedState,b===null?b=Kf(a):(h=b.cachePool,h!==null?(N=kt._currentValue,h=h.parent!==N?{parent:N,pool:N}:h):h=eg(),b={baseLanes:b.baseLanes|a,cachePool:h}),o.memoizedState=b,o.childLanes=Qf(t,_,a),i.memoizedState=Gf,vl(t.child,o)):(rr(i),a=t.child,t=a.sibling,a=os(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,t!==null&&(_=i.deletions,_===null?(i.deletions=[t],i.flags|=16):_.push(t)),i.child=a,i.memoizedState=null,a)}function Yf(t,i){return i=uc({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function uc(t,i){return t=zn(22,t,null,i),t.lanes=0,t}function Xf(t,i,a){return oa(i,t.child,null,a),t=Yf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function dy(t,i,a){t.lanes|=i;var o=t.alternate;o!==null&&(o.lanes|=i),cf(t.return,i,a)}function $f(t,i,a,o,h,f){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h,treeForkCount:f}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=o,_.tail=a,_.tailMode=h,_.treeForkCount=f)}function my(t,i,a){var o=i.pendingProps,h=o.revealOrder,f=o.tail;o=o.children;var _=Rt.current,b=(_&2)!==0;if(b?(_=_&1|2,i.flags|=128):_&=1,re(Rt,_),Wt(t,i,o,a),o=Qe?al:0,!b&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&dy(t,a,i);else if(t.tag===19)dy(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&Ju(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),$f(i,!1,h,a,f,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&Ju(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}$f(i,!0,a,null,f,o);break;case"together":$f(i,!1,null,null,void 0,o);break;default:i.memoizedState=null}return i.child}function ds(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),ur|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Ja(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(r(153));if(i.child!==null){for(t=i.child,a=os(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=os(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function Jf(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Hu(t)))}function rT(t,i,a){switch(i.tag){case 3:ze(i,i.stateNode.containerInfo),tr(i,kt,t.memoizedState.cache),ta();break;case 27:case 5:Nn(i);break;case 4:ze(i,i.stateNode.containerInfo);break;case 10:tr(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Tf(i),null;break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(rr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?fy(t,i,a):(rr(i),t=ds(t,i,a),t!==null?t.sibling:null);rr(i);break;case 19:var h=(t.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(Ja(t,i,a,!1),o=(a&i.childLanes)!==0),h){if(o)return my(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),re(Rt,Rt.current),o)break;return null;case 22:return i.lanes=0,ay(t,i,a,i.pendingProps);case 24:tr(i,kt,t.memoizedState.cache)}return ds(t,i,a)}function py(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)jt=!0;else{if(!Jf(t,a)&&(i.flags&128)===0)return jt=!1,rT(t,i,a);jt=(t.flags&131072)!==0}else jt=!1,Qe&&(i.flags&1048576)!==0&&Qp(i,al,i.index);switch(i.lanes=0,i.tag){case 16:e:{var o=i.pendingProps;if(t=ra(i.elementType),i.type=t,typeof t=="function")tf(t)?(o=ua(t,o),i.tag=1,i=cy(null,i,t,o,a)):(i.tag=0,i=Ff(null,i,t,o,a));else{if(t!=null){var h=t.$$typeof;if(h===Oe){i.tag=11,i=iy(null,i,t,o,a);break e}else if(h===C){i.tag=14,i=sy(null,i,t,o,a);break e}}throw i=Xe(t)||t,Error(r(306,i,""))}}return i;case 0:return Ff(t,i,i.type,i.pendingProps,a);case 1:return o=i.type,h=ua(o,i.pendingProps),cy(t,i,o,h,a);case 3:e:{if(ze(i,i.stateNode.containerInfo),t===null)throw Error(r(387));o=i.pendingProps;var f=i.memoizedState;h=f.element,yf(t,i),ml(i,o,null,a);var _=i.memoizedState;if(o=_.cache,tr(i,kt,o),o!==f.cache&&hf(i,[kt],a,!0),dl(),o=_.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=hy(t,i,o,a);break e}else if(o!==h){h=ri(Error(r(424)),i),ol(h),i=hy(t,i,o,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(dt=ci(t.firstChild),$t=i,Qe=!0,Zs=null,li=!0,a=ag(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ta(),o===h){i=ds(t,i,a);break e}Wt(t,i,o,a)}i=i.child}return i;case 26:return lc(t,i),t===null?(a=x0(i.type,null,i.pendingProps,null))?i.memoizedState=a:Qe||(a=i.type,t=i.pendingProps,o=Ac(_e.current).createElement(a),o[St]=i,o[Ot]=t,Zt(o,a,t),Et(o),i.stateNode=o):i.memoizedState=x0(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Nn(i),t===null&&Qe&&(o=i.stateNode=w0(i.type,i.pendingProps,_e.current),$t=i,li=!0,h=dt,mr(i.type)?(Nd=h,dt=ci(o.firstChild)):dt=h),Wt(t,i,i.pendingProps.children,a),lc(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Qe&&((h=o=dt)&&(o=VT(o,i.type,i.pendingProps,li),o!==null?(i.stateNode=o,$t=i,dt=ci(o.firstChild),li=!1,h=!0):h=!1),h||er(i)),Nn(i),h=i.type,f=i.pendingProps,_=t!==null?t.memoizedProps:null,o=f.children,Ad(h,f)?o=null:_!==null&&Ad(h,_)&&(i.flags|=32),i.memoizedState!==null&&(h=Sf(t,i,$b,null,null,a),kl._currentValue=h),lc(t,i),Wt(t,i,o,a),i.child;case 6:return t===null&&Qe&&((t=a=dt)&&(a=jT(a,i.pendingProps,li),a!==null?(i.stateNode=a,$t=i,dt=null,t=!0):t=!1),t||er(i)),null;case 13:return fy(t,i,a);case 4:return ze(i,i.stateNode.containerInfo),o=i.pendingProps,t===null?i.child=oa(i,null,o,a):Wt(t,i,o,a),i.child;case 11:return iy(t,i,i.type,i.pendingProps,a);case 7:return Wt(t,i,i.pendingProps,a),i.child;case 8:return Wt(t,i,i.pendingProps.children,a),i.child;case 12:return Wt(t,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,tr(i,i.type,o.value),Wt(t,i,o.children,a),i.child;case 9:return h=i.type._context,o=i.pendingProps.children,ia(i),h=Jt(h),o=o(h),i.flags|=1,Wt(t,i,o,a),i.child;case 14:return sy(t,i,i.type,i.pendingProps,a);case 15:return ry(t,i,i.type,i.pendingProps,a);case 19:return my(t,i,a);case 31:return sT(t,i,a);case 22:return ay(t,i,a,i.pendingProps);case 24:return ia(i),o=Jt(kt),t===null?(h=mf(),h===null&&(h=ft,f=ff(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),i.memoizedState={parent:o,cache:h},gf(i),tr(i,kt,h)):((t.lanes&a)!==0&&(yf(t,i),ml(i,null,null,a),dl()),h=t.memoizedState,f=i.memoizedState,h.parent!==o?(h={parent:o,cache:o},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),tr(i,kt,o)):(o=f.cache,tr(i,kt,o),o!==h.cache&&hf(i,[kt],a,!0))),Wt(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function ms(t){t.flags|=4}function Wf(t,i,a,o,h){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(qy())t.flags|=8192;else throw aa=Qu,pf}else t.flags&=-16777217}function gy(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!D0(i))if(qy())t.flags|=8192;else throw aa=Qu,pf}function cc(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Ia():536870912,t.lanes|=i,uo|=i)}function El(t,i){if(!Qe)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function mt(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=o,t.childLanes=a,i}function aT(t,i,a){var o=i.pendingProps;switch(af(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(i),null;case 1:return mt(i),null;case 3:return a=i.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),cs(kt),it(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&($a(i)?ms(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,lf())),mt(i),null;case 26:var h=i.type,f=i.memoizedState;return t===null?(ms(i),f!==null?(mt(i),gy(i,f)):(mt(i),Wf(i,h,null,o,a))):f?f!==t.memoizedState?(ms(i),mt(i),gy(i,f)):(mt(i),i.flags&=-16777217):(t=t.memoizedProps,t!==o&&ms(i),mt(i),Wf(i,h,t,o,a)),null;case 27:if(Qn(i),a=_e.current,h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==o&&ms(i);else{if(!o){if(i.stateNode===null)throw Error(r(166));return mt(i),null}t=le.current,$a(i)?Xp(i):(t=w0(h,o,a),i.stateNode=t,ms(i))}return mt(i),null;case 5:if(Qn(i),h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==o&&ms(i);else{if(!o){if(i.stateNode===null)throw Error(r(166));return mt(i),null}if(f=le.current,$a(i))Xp(i);else{var _=Ac(_e.current);switch(f){case 1:f=_.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:f=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":f=_.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":f=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":f=_.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof o.is=="string"?_.createElement("select",{is:o.is}):_.createElement("select"),o.multiple?f.multiple=!0:o.size&&(f.size=o.size);break;default:f=typeof o.is=="string"?_.createElement(h,{is:o.is}):_.createElement(h)}}f[St]=i,f[Ot]=o;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)f.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=f;e:switch(Zt(f,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&ms(i)}}return mt(i),Wf(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,a),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==o&&ms(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(r(166));if(t=_e.current,$a(i)){if(t=i.stateNode,a=i.memoizedProps,o=null,h=$t,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}t[St]=i,t=!!(t.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||f0(t.nodeValue,a)),t||er(i,!0)}else t=Ac(t).createTextNode(o),t[St]=i,i.stateNode=t}return mt(i),null;case 31:if(a=i.memoizedState,t===null||t.memoizedState!==null){if(o=$a(i),a!==null){if(t===null){if(!o)throw Error(r(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[St]=i}else ta(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;mt(i),t=!1}else a=lf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return i.flags&256?(qn(i),i):(qn(i),null);if((i.flags&128)!==0)throw Error(r(558))}return mt(i),null;case 13:if(o=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=$a(i),o!==null&&o.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[St]=i}else ta(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;mt(i),h=!1}else h=lf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(qn(i),i):(qn(i),null)}return qn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=o!==null,t=t!==null&&t.memoizedState!==null,a&&(o=i.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==h&&(o.flags|=2048)),a!==t&&a&&(i.child.flags|=8192),cc(i,i.updateQueue),mt(i),null);case 4:return it(),t===null&&Ed(i.stateNode.containerInfo),mt(i),null;case 10:return cs(i.type),mt(i),null;case 19:if(X(Rt),o=i.memoizedState,o===null)return mt(i),null;if(h=(i.flags&128)!==0,f=o.rendering,f===null)if(h)El(o,!1);else{if(xt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(f=Ju(t),f!==null){for(i.flags|=128,El(o,!1),t=f.updateQueue,i.updateQueue=t,cc(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)Fp(a,t),a=a.sibling;return re(Rt,Rt.current&1|2),Qe&&ls(i,o.treeForkCount),i.child}t=t.sibling}o.tail!==null&&Gt()>pc&&(i.flags|=128,h=!0,El(o,!1),i.lanes=4194304)}else{if(!h)if(t=Ju(f),t!==null){if(i.flags|=128,h=!0,t=t.updateQueue,i.updateQueue=t,cc(i,t),El(o,!0),o.tail===null&&o.tailMode==="hidden"&&!f.alternate&&!Qe)return mt(i),null}else 2*Gt()-o.renderingStartTime>pc&&a!==536870912&&(i.flags|=128,h=!0,El(o,!1),i.lanes=4194304);o.isBackwards?(f.sibling=i.child,i.child=f):(t=o.last,t!==null?t.sibling=f:i.child=f,o.last=f)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Gt(),t.sibling=null,a=Rt.current,re(Rt,h?a&1|2:a&1),Qe&&ls(i,o.treeForkCount),t):(mt(i),null);case 22:case 23:return qn(i),bf(),o=i.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(mt(i),i.subtreeFlags&6&&(i.flags|=8192)):mt(i),a=i.updateQueue,a!==null&&cc(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),t!==null&&X(sa),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),cs(kt),mt(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function oT(t,i){switch(af(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return cs(kt),it(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Qn(i),null;case 31:if(i.memoizedState!==null){if(qn(i),i.alternate===null)throw Error(r(340));ta()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(qn(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(r(340));ta()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return X(Rt),null;case 4:return it(),null;case 10:return cs(i.type),null;case 22:case 23:return qn(i),bf(),t!==null&&X(sa),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return cs(kt),null;case 25:return null;default:return null}}function yy(t,i){switch(af(i),i.tag){case 3:cs(kt),it();break;case 26:case 27:case 5:Qn(i);break;case 4:it();break;case 31:i.memoizedState!==null&&qn(i);break;case 13:qn(i);break;case 19:X(Rt);break;case 10:cs(i.type);break;case 22:case 23:qn(i),bf(),t!==null&&X(sa);break;case 24:cs(kt)}}function bl(t,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&t)===t){o=void 0;var f=a.create,_=a.inst;o=f(),_.destroy=o}a=a.next}while(a!==h)}}catch(b){at(i,i.return,b)}}function or(t,i,a){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var f=h.next;o=f;do{if((o.tag&t)===t){var _=o.inst,b=_.destroy;if(b!==void 0){_.destroy=void 0,h=i;var N=a,z=b;try{z()}catch($){at(h,N,$)}}}o=o.next}while(o!==f)}}catch($){at(i,i.return,$)}}function _y(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{lg(i,a)}catch(o){at(t,t.return,o)}}}function vy(t,i,a){a.props=ua(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(o){at(t,i,o)}}function Tl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof a=="function"?t.refCleanup=a(o):a.current=o}}catch(h){at(t,i,h)}}function zi(t,i){var a=t.ref,o=t.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){at(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){at(t,i,h)}else a.current=null}function Ey(t){var i=t.type,a=t.memoizedProps,o=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){at(t,t.return,h)}}function Zf(t,i,a){try{var o=t.stateNode;IT(o,t.type,a,i),o[Ot]=i}catch(h){at(t,t.return,h)}}function by(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&mr(t.type)||t.tag===4}function ed(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||by(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&mr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function td(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=_i));else if(o!==4&&(o===27&&mr(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(td(t,i,a),t=t.sibling;t!==null;)td(t,i,a),t=t.sibling}function hc(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(o!==4&&(o===27&&mr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(hc(t,i,a),t=t.sibling;t!==null;)hc(t,i,a),t=t.sibling}function Ty(t){var i=t.stateNode,a=t.memoizedProps;try{for(var o=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Zt(i,o,a),i[St]=t,i[Ot]=a}catch(f){at(t,t.return,f)}}var ps=!1,Lt=!1,nd=!1,wy=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function lT(t,i){if(t=t.containerInfo,wd=Oc,t=Vp(t),Yh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var _=0,b=-1,N=-1,z=0,$=0,W=t,H=null;t:for(;;){for(var K;W!==a||h!==0&&W.nodeType!==3||(b=_+h),W!==f||o!==0&&W.nodeType!==3||(N=_+o),W.nodeType===3&&(_+=W.nodeValue.length),(K=W.firstChild)!==null;)H=W,W=K;for(;;){if(W===t)break t;if(H===a&&++z===h&&(b=_),H===f&&++$===o&&(N=_),(K=W.nextSibling)!==null)break;W=H,H=W.parentNode}W=K}a=b===-1||N===-1?null:{start:b,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Sd={focusedElem:t,selectionRange:a},Oc=!1,Kt=i;Kt!==null;)if(i=Kt,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Kt=t;else for(;Kt!==null;){switch(i=Kt,f=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=i,h=f.memoizedProps,f=f.memoizedState,o=a.stateNode;try{var pe=ua(a.type,h);t=o.getSnapshotBeforeUpdate(pe,f),o.__reactInternalSnapshotBeforeUpdate=t}catch(Se){at(a,a.return,Se)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Cd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Cd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=i.sibling,t!==null){t.return=i.return,Kt=t;break}Kt=i.return}}function Sy(t,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:ys(t,a),o&4&&bl(5,a);break;case 1:if(ys(t,a),o&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(_){at(a,a.return,_)}else{var h=ua(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(_){at(a,a.return,_)}}o&64&&_y(a),o&512&&Tl(a,a.return);break;case 3:if(ys(t,a),o&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{lg(t,i)}catch(_){at(a,a.return,_)}}break;case 27:i===null&&o&4&&Ty(a);case 26:case 5:ys(t,a),i===null&&o&4&&Ey(a),o&512&&Tl(a,a.return);break;case 12:ys(t,a);break;case 31:ys(t,a),o&4&&Cy(t,a);break;case 13:ys(t,a),o&4&&Ry(t,a),o&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=yT.bind(null,a),LT(t,a))));break;case 22:if(o=a.memoizedState!==null||ps,!o){i=i!==null&&i.memoizedState!==null||Lt,h=ps;var f=Lt;ps=o,(Lt=i)&&!f?_s(t,a,(a.subtreeFlags&8772)!==0):ys(t,a),ps=h,Lt=f}break;case 30:break;default:ys(t,a)}}function Ay(t){var i=t.alternate;i!==null&&(t.alternate=null,Ay(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&zs(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var _t=null,Sn=!1;function gs(t,i,a){for(a=a.child;a!==null;)xy(t,i,a),a=a.sibling}function xy(t,i,a){if(ot&&typeof ot.onCommitFiberUnmount=="function")try{ot.onCommitFiberUnmount(fn,a)}catch{}switch(a.tag){case 26:Lt||zi(a,i),gs(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Lt||zi(a,i);var o=_t,h=Sn;mr(a.type)&&(_t=a.stateNode,Sn=!1),gs(t,i,a),Dl(a.stateNode),_t=o,Sn=h;break;case 5:Lt||zi(a,i);case 6:if(o=_t,h=Sn,_t=null,gs(t,i,a),_t=o,Sn=h,_t!==null)if(Sn)try{(_t.nodeType===9?_t.body:_t.nodeName==="HTML"?_t.ownerDocument.body:_t).removeChild(a.stateNode)}catch(f){at(a,i,f)}else try{_t.removeChild(a.stateNode)}catch(f){at(a,i,f)}break;case 18:_t!==null&&(Sn?(t=_t,_0(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),_o(t)):_0(_t,a.stateNode));break;case 4:o=_t,h=Sn,_t=a.stateNode.containerInfo,Sn=!0,gs(t,i,a),_t=o,Sn=h;break;case 0:case 11:case 14:case 15:or(2,a,i),Lt||or(4,a,i),gs(t,i,a);break;case 1:Lt||(zi(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&vy(a,i,o)),gs(t,i,a);break;case 21:gs(t,i,a);break;case 22:Lt=(o=Lt)||a.memoizedState!==null,gs(t,i,a),Lt=o;break;default:gs(t,i,a)}}function Cy(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{_o(t)}catch(a){at(i,i.return,a)}}}function Ry(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{_o(t)}catch(a){at(i,i.return,a)}}function uT(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new wy),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new wy),i;default:throw Error(r(435,t.tag))}}function fc(t,i){var a=uT(t);i.forEach(function(o){if(!a.has(o)){a.add(o);var h=_T.bind(null,t,o);o.then(h,h)}})}function An(t,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],f=t,_=i,b=_;e:for(;b!==null;){switch(b.tag){case 27:if(mr(b.type)){_t=b.stateNode,Sn=!1;break e}break;case 5:_t=b.stateNode,Sn=!1;break e;case 3:case 4:_t=b.stateNode.containerInfo,Sn=!0;break e}b=b.return}if(_t===null)throw Error(r(160));xy(f,_,h),_t=null,Sn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Iy(i,t),i=i.sibling}var Si=null;function Iy(t,i){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:An(i,t),xn(t),o&4&&(or(3,t,t.return),bl(3,t),or(5,t,t.return));break;case 1:An(i,t),xn(t),o&512&&(Lt||a===null||zi(a,a.return)),o&64&&ps&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=Si;if(An(i,t),xn(t),o&512&&(Lt||a===null||zi(a,a.return)),o&4){var f=a!==null?a.memoizedState:null;if(o=t.memoizedState,a===null)if(o===null)if(t.stateNode===null){e:{o=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":f=h.getElementsByTagName("title")[0],(!f||f[Jn]||f[St]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(o),h.head.insertBefore(f,h.querySelector("head > title"))),Zt(f,o,a),f[St]=t,Et(f),o=f;break e;case"link":var _=I0("link","href",h).get(o+(a.href||""));if(_){for(var b=0;b<_.length;b++)if(f=_[b],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(b,1);break t}}f=h.createElement(o),Zt(f,o,a),h.head.appendChild(f);break;case"meta":if(_=I0("meta","content",h).get(o+(a.content||""))){for(b=0;b<_.length;b++)if(f=_[b],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(b,1);break t}}f=h.createElement(o),Zt(f,o,a),h.head.appendChild(f);break;default:throw Error(r(468,o))}f[St]=t,Et(f),o=f}t.stateNode=o}else N0(h,t.type,t.stateNode);else t.stateNode=R0(h,o,t.memoizedProps);else f!==o?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,o===null?N0(h,t.type,t.stateNode):R0(h,o,t.memoizedProps)):o===null&&t.stateNode!==null&&Zf(t,t.memoizedProps,a.memoizedProps)}break;case 27:An(i,t),xn(t),o&512&&(Lt||a===null||zi(a,a.return)),a!==null&&o&4&&Zf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(An(i,t),xn(t),o&512&&(Lt||a===null||zi(a,a.return)),t.flags&32){h=t.stateNode;try{wn(h,"")}catch(pe){at(t,t.return,pe)}}o&4&&t.stateNode!=null&&(h=t.memoizedProps,Zf(t,h,a!==null?a.memoizedProps:h)),o&1024&&(nd=!0);break;case 6:if(An(i,t),xn(t),o&4){if(t.stateNode===null)throw Error(r(162));o=t.memoizedProps,a=t.stateNode;try{a.nodeValue=o}catch(pe){at(t,t.return,pe)}}break;case 3:if(Rc=null,h=Si,Si=xc(i.containerInfo),An(i,t),Si=h,xn(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{_o(i.containerInfo)}catch(pe){at(t,t.return,pe)}nd&&(nd=!1,Ny(t));break;case 4:o=Si,Si=xc(t.stateNode.containerInfo),An(i,t),xn(t),Si=o;break;case 12:An(i,t),xn(t);break;case 31:An(i,t),xn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,fc(t,o)));break;case 13:An(i,t),xn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(mc=Gt()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,fc(t,o)));break;case 22:h=t.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,z=ps,$=Lt;if(ps=z||h,Lt=$||N,An(i,t),Lt=$,ps=z,xn(t),o&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||N||ps||Lt||ca(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){N=a=i;try{if(f=N.stateNode,h)_=f.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{b=N.stateNode;var W=N.memoizedProps.style,H=W!=null&&W.hasOwnProperty("display")?W.display:null;b.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(pe){at(N,N.return,pe)}}}else if(i.tag===6){if(a===null){N=i;try{N.stateNode.nodeValue=h?"":N.memoizedProps}catch(pe){at(N,N.return,pe)}}}else if(i.tag===18){if(a===null){N=i;try{var K=N.stateNode;h?v0(K,!0):v0(N.stateNode,!1)}catch(pe){at(N,N.return,pe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=t.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,fc(t,a))));break;case 19:An(i,t),xn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,fc(t,o)));break;case 30:break;case 21:break;default:An(i,t),xn(t)}}function xn(t){var i=t.flags;if(i&2){try{for(var a,o=t.return;o!==null;){if(by(o)){a=o;break}o=o.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,f=ed(t);hc(t,f,h);break;case 5:var _=a.stateNode;a.flags&32&&(wn(_,""),a.flags&=-33);var b=ed(t);hc(t,b,_);break;case 3:case 4:var N=a.stateNode.containerInfo,z=ed(t);td(t,z,N);break;default:throw Error(r(161))}}catch($){at(t,t.return,$)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Ny(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;Ny(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function ys(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Sy(t,i.alternate,i),i=i.sibling}function ca(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:or(4,i,i.return),ca(i);break;case 1:zi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&vy(i,i.return,a),ca(i);break;case 27:Dl(i.stateNode);case 26:case 5:zi(i,i.return),ca(i);break;case 22:i.memoizedState===null&&ca(i);break;case 30:ca(i);break;default:ca(i)}t=t.sibling}}function _s(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,h=t,f=i,_=f.flags;switch(f.tag){case 0:case 11:case 15:_s(h,f,a),bl(4,f);break;case 1:if(_s(h,f,a),o=f,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(z){at(o,o.return,z)}if(o=f,h=o.updateQueue,h!==null){var b=o.stateNode;try{var N=h.shared.hiddenCallbacks;if(N!==null)for(h.shared.hiddenCallbacks=null,h=0;h<N.length;h++)og(N[h],b)}catch(z){at(o,o.return,z)}}a&&_&64&&_y(f),Tl(f,f.return);break;case 27:Ty(f);case 26:case 5:_s(h,f,a),a&&o===null&&_&4&&Ey(f),Tl(f,f.return);break;case 12:_s(h,f,a);break;case 31:_s(h,f,a),a&&_&4&&Cy(h,f);break;case 13:_s(h,f,a),a&&_&4&&Ry(h,f);break;case 22:f.memoizedState===null&&_s(h,f,a),Tl(f,f.return);break;case 30:break;default:_s(h,f,a)}i=i.sibling}}function id(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&ll(a))}function sd(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&ll(t))}function Ai(t,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Dy(t,i,a,o),i=i.sibling}function Dy(t,i,a,o){var h=i.flags;switch(i.tag){case 0:case 11:case 15:Ai(t,i,a,o),h&2048&&bl(9,i);break;case 1:Ai(t,i,a,o);break;case 3:Ai(t,i,a,o),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&ll(t)));break;case 12:if(h&2048){Ai(t,i,a,o),t=i.stateNode;try{var f=i.memoizedProps,_=f.id,b=f.onPostCommit;typeof b=="function"&&b(_,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(N){at(i,i.return,N)}}else Ai(t,i,a,o);break;case 31:Ai(t,i,a,o);break;case 13:Ai(t,i,a,o);break;case 23:break;case 22:f=i.stateNode,_=i.alternate,i.memoizedState!==null?f._visibility&2?Ai(t,i,a,o):wl(t,i):f._visibility&2?Ai(t,i,a,o):(f._visibility|=2,ao(t,i,a,o,(i.subtreeFlags&10256)!==0||!1)),h&2048&&id(_,i);break;case 24:Ai(t,i,a,o),h&2048&&sd(i.alternate,i);break;default:Ai(t,i,a,o)}}function ao(t,i,a,o,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var f=t,_=i,b=a,N=o,z=_.flags;switch(_.tag){case 0:case 11:case 15:ao(f,_,b,N,h),bl(8,_);break;case 23:break;case 22:var $=_.stateNode;_.memoizedState!==null?$._visibility&2?ao(f,_,b,N,h):wl(f,_):($._visibility|=2,ao(f,_,b,N,h)),h&&z&2048&&id(_.alternate,_);break;case 24:ao(f,_,b,N,h),h&&z&2048&&sd(_.alternate,_);break;default:ao(f,_,b,N,h)}i=i.sibling}}function wl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,o=i,h=o.flags;switch(o.tag){case 22:wl(a,o),h&2048&&id(o.alternate,o);break;case 24:wl(a,o),h&2048&&sd(o.alternate,o);break;default:wl(a,o)}i=i.sibling}}var Sl=8192;function oo(t,i,a){if(t.subtreeFlags&Sl)for(t=t.child;t!==null;)Oy(t,i,a),t=t.sibling}function Oy(t,i,a){switch(t.tag){case 26:oo(t,i,a),t.flags&Sl&&t.memoizedState!==null&&XT(a,Si,t.memoizedState,t.memoizedProps);break;case 5:oo(t,i,a);break;case 3:case 4:var o=Si;Si=xc(t.stateNode.containerInfo),oo(t,i,a),Si=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=Sl,Sl=16777216,oo(t,i,a),Sl=o):oo(t,i,a));break;default:oo(t,i,a)}}function My(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function Al(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Kt=o,Vy(o,t)}My(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)ky(t),t=t.sibling}function ky(t){switch(t.tag){case 0:case 11:case 15:Al(t),t.flags&2048&&or(9,t,t.return);break;case 3:Al(t);break;case 12:Al(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,dc(t)):Al(t);break;default:Al(t)}}function dc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Kt=o,Vy(o,t)}My(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:or(8,i,i.return),dc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,dc(i));break;default:dc(i)}t=t.sibling}}function Vy(t,i){for(;Kt!==null;){var a=Kt;switch(a.tag){case 0:case 11:case 15:or(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:ll(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Kt=o;else e:for(a=t;Kt!==null;){o=Kt;var h=o.sibling,f=o.return;if(Ay(o),o===a){Kt=null;break e}if(h!==null){h.return=f,Kt=h;break e}Kt=f}}}var cT={getCacheForType:function(t){var i=Jt(kt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a},cacheSignal:function(){return Jt(kt).controller.signal}},hT=typeof WeakMap=="function"?WeakMap:Map,nt=0,ft=null,Pe=null,Be=0,rt=0,Hn=null,lr=!1,lo=!1,rd=!1,vs=0,xt=0,ur=0,ha=0,ad=0,Fn=0,uo=0,xl=null,Cn=null,od=!1,mc=0,jy=0,pc=1/0,gc=null,cr=null,Bt=0,hr=null,co=null,Es=0,ld=0,ud=null,Ly=null,Cl=0,cd=null;function Gn(){return(nt&2)!==0&&Be!==0?Be&-Be:Y.T!==null?gd():Na()}function Py(){if(Fn===0)if((Be&536870912)===0||Qe){var t=Di;Di<<=1,(Di&3932160)===0&&(Di=262144),Fn=t}else Fn=536870912;return t=Bn.current,t!==null&&(t.flags|=32),Fn}function Rn(t,i,a){(t===ft&&(rt===2||rt===9)||t.cancelPendingCommit!==null)&&(ho(t,0),fr(t,Be,Fn,!1)),es(t,a),((nt&2)===0||t!==ft)&&(t===ft&&((nt&2)===0&&(ha|=a),xt===4&&fr(t,Be,Fn,!1)),Bi(t))}function Uy(t,i,a){if((nt&6)!==0)throw Error(r(327));var o=!a&&(i&127)===0&&(i&t.expiredLanes)===0||bn(t,i),h=o?mT(t,i):fd(t,i,!0),f=o;do{if(h===0){lo&&!o&&fr(t,i,0,!1);break}else{if(a=t.current.alternate,f&&!fT(a)){h=fd(t,i,!1),f=!1;continue}if(h===2){if(f=i,t.errorRecoveryDisabledLanes&f)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var b=t;h=xl;var N=b.current.memoizedState.isDehydrated;if(N&&(ho(b,_).flags|=256),_=fd(b,_,!1),_!==2){if(rd&&!N){b.errorRecoveryDisabledLanes|=f,ha|=f,h=4;break e}f=Cn,Cn=h,f!==null&&(Cn===null?Cn=f:Cn.push.apply(Cn,f))}h=_}if(f=!1,h!==2)continue}}if(h===1){ho(t,0),fr(t,i,0,!0);break}e:{switch(o=t,f=h,f){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:fr(o,i,Fn,!lr);break e;case 2:Cn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(h=mc+300-Gt(),10<h)){if(fr(o,i,Fn,!lr),En(o,0,!0)!==0)break e;Es=i,o.timeoutHandle=g0(zy.bind(null,o,a,Cn,gc,od,i,Fn,ha,uo,lr,f,"Throttled",-0,0),h);break e}zy(o,a,Cn,gc,od,i,Fn,ha,uo,lr,f,null,-0,0)}}break}while(!0);Bi(t)}function zy(t,i,a,o,h,f,_,b,N,z,$,W,H,K){if(t.timeoutHandle=-1,W=i.subtreeFlags,W&8192||(W&16785408)===16785408){W={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:_i},Oy(i,f,W);var pe=(f&62914560)===f?mc-Gt():(f&4194048)===f?jy-Gt():0;if(pe=$T(W,pe),pe!==null){Es=f,t.cancelPendingCommit=pe(Yy.bind(null,t,i,f,a,o,h,_,b,N,$,W,null,H,K)),fr(t,f,_,!z);return}}Yy(t,i,f,a,o,h,_,b,N)}function fT(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],f=h.getSnapshot;h=h.value;try{if(!Un(f(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function fr(t,i,a,o){i&=~ad,i&=~ha,t.suspendedLanes|=i,t.pingedLanes&=~i,o&&(t.warmLanes|=i),o=t.expirationTimes;for(var h=i;0<h;){var f=31-vt(h),_=1<<f;o[f]=-1,h&=~_}a!==0&&ts(t,a,i)}function yc(){return(nt&6)===0?(Rl(0),!1):!0}function hd(){if(Pe!==null){if(rt===0)var t=Pe.return;else t=Pe,us=na=null,Cf(t),to=null,cl=0,t=Pe;for(;t!==null;)yy(t.alternate,t),t=t.return;Pe=null}}function ho(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,OT(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Es=0,hd(),ft=t,Pe=a=os(t.current,null),Be=i,rt=0,Hn=null,lr=!1,lo=bn(t,i),rd=!1,uo=Fn=ad=ha=ur=xt=0,Cn=xl=null,od=!1,(i&8)!==0&&(i|=i&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=i;0<o;){var h=31-vt(o),f=1<<h;i|=t[h],o&=~f}return vs=i,Pu(),a}function By(t,i){je=null,Y.H=_l,i===eo||i===Ku?(i=ig(),rt=3):i===pf?(i=ig(),rt=4):rt=i===Hf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Hn=i,Pe===null&&(xt=1,ac(t,ri(i,t.current)))}function qy(){var t=Bn.current;return t===null?!0:(Be&4194048)===Be?ui===null:(Be&62914560)===Be||(Be&536870912)!==0?t===ui:!1}function Hy(){var t=Y.H;return Y.H=_l,t===null?_l:t}function Fy(){var t=Y.A;return Y.A=cT,t}function _c(){xt=4,lr||(Be&4194048)!==Be&&Bn.current!==null||(lo=!0),(ur&134217727)===0&&(ha&134217727)===0||ft===null||fr(ft,Be,Fn,!1)}function fd(t,i,a){var o=nt;nt|=2;var h=Hy(),f=Fy();(ft!==t||Be!==i)&&(gc=null,ho(t,i)),i=!1;var _=xt;e:do try{if(rt!==0&&Pe!==null){var b=Pe,N=Hn;switch(rt){case 8:hd(),_=6;break e;case 3:case 2:case 9:case 6:Bn.current===null&&(i=!0);var z=rt;if(rt=0,Hn=null,fo(t,b,N,z),a&&lo){_=0;break e}break;default:z=rt,rt=0,Hn=null,fo(t,b,N,z)}}dT(),_=xt;break}catch($){By(t,$)}while(!0);return i&&t.shellSuspendCounter++,us=na=null,nt=o,Y.H=h,Y.A=f,Pe===null&&(ft=null,Be=0,Pu()),_}function dT(){for(;Pe!==null;)Gy(Pe)}function mT(t,i){var a=nt;nt|=2;var o=Hy(),h=Fy();ft!==t||Be!==i?(gc=null,pc=Gt()+500,ho(t,i)):lo=bn(t,i);e:do try{if(rt!==0&&Pe!==null){i=Pe;var f=Hn;t:switch(rt){case 1:rt=0,Hn=null,fo(t,i,f,1);break;case 2:case 9:if(tg(f)){rt=0,Hn=null,Ky(i);break}i=function(){rt!==2&&rt!==9||ft!==t||(rt=7),Bi(t)},f.then(i,i);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:tg(f)?(rt=0,Hn=null,Ky(i)):(rt=0,Hn=null,fo(t,i,f,7));break;case 5:var _=null;switch(Pe.tag){case 26:_=Pe.memoizedState;case 5:case 27:var b=Pe;if(_?D0(_):b.stateNode.complete){rt=0,Hn=null;var N=b.sibling;if(N!==null)Pe=N;else{var z=b.return;z!==null?(Pe=z,vc(z)):Pe=null}break t}}rt=0,Hn=null,fo(t,i,f,5);break;case 6:rt=0,Hn=null,fo(t,i,f,6);break;case 8:hd(),xt=6;break e;default:throw Error(r(462))}}pT();break}catch($){By(t,$)}while(!0);return us=na=null,Y.H=o,Y.A=h,nt=a,Pe!==null?0:(ft=null,Be=0,Pu(),xt)}function pT(){for(;Pe!==null&&!Yn();)Gy(Pe)}function Gy(t){var i=py(t.alternate,t,vs);t.memoizedProps=t.pendingProps,i===null?vc(t):Pe=i}function Ky(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=uy(a,i,i.pendingProps,i.type,void 0,Be);break;case 11:i=uy(a,i,i.pendingProps,i.type.render,i.ref,Be);break;case 5:Cf(i);default:yy(a,i),i=Pe=Fp(i,vs),i=py(a,i,vs)}t.memoizedProps=t.pendingProps,i===null?vc(t):Pe=i}function fo(t,i,a,o){us=na=null,Cf(i),to=null,cl=0;var h=i.return;try{if(iT(t,h,i,a,Be)){xt=1,ac(t,ri(a,t.current)),Pe=null;return}}catch(f){if(h!==null)throw Pe=h,f;xt=1,ac(t,ri(a,t.current)),Pe=null;return}i.flags&32768?(Qe||o===1?t=!0:lo||(Be&536870912)!==0?t=!1:(lr=t=!0,(o===2||o===9||o===3||o===6)&&(o=Bn.current,o!==null&&o.tag===13&&(o.flags|=16384))),Qy(i,t)):vc(i)}function vc(t){var i=t;do{if((i.flags&32768)!==0){Qy(i,lr);return}t=i.return;var a=aT(i.alternate,i,vs);if(a!==null){Pe=a;return}if(i=i.sibling,i!==null){Pe=i;return}Pe=i=t}while(i!==null);xt===0&&(xt=5)}function Qy(t,i){do{var a=oT(t.alternate,t);if(a!==null){a.flags&=32767,Pe=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Pe=t;return}Pe=t=a}while(t!==null);xt=6,Pe=null}function Yy(t,i,a,o,h,f,_,b,N){t.cancelPendingCommit=null;do Ec();while(Bt!==0);if((nt&6)!==0)throw Error(r(327));if(i!==null){if(i===t.current)throw Error(r(177));if(f=i.lanes|i.childLanes,f|=Zh,Ko(t,a,f,_,b,N),t===ft&&(Pe=ft=null,Be=0),co=i,hr=t,Es=a,ld=f,ud=h,Ly=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,vT(Ni,function(){return Zy(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=Y.T,Y.T=null,h=Q.p,Q.p=2,_=nt,nt|=4;try{lT(t,i,a)}finally{nt=_,Q.p=h,Y.T=o}}Bt=1,Xy(),$y(),Jy()}}function Xy(){if(Bt===1){Bt=0;var t=hr,i=co,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=Y.T,Y.T=null;var o=Q.p;Q.p=2;var h=nt;nt|=4;try{Iy(i,t);var f=Sd,_=Vp(t.containerInfo),b=f.focusedElem,N=f.selectionRange;if(_!==b&&b&&b.ownerDocument&&kp(b.ownerDocument.documentElement,b)){if(N!==null&&Yh(b)){var z=N.start,$=N.end;if($===void 0&&($=z),"selectionStart"in b)b.selectionStart=z,b.selectionEnd=Math.min($,b.value.length);else{var W=b.ownerDocument||document,H=W&&W.defaultView||window;if(H.getSelection){var K=H.getSelection(),pe=b.textContent.length,Se=Math.min(N.start,pe),ht=N.end===void 0?Se:Math.min(N.end,pe);!K.extend&&Se>ht&&(_=ht,ht=Se,Se=_);var L=Mp(b,Se),M=Mp(b,ht);if(L&&M&&(K.rangeCount!==1||K.anchorNode!==L.node||K.anchorOffset!==L.offset||K.focusNode!==M.node||K.focusOffset!==M.offset)){var U=W.createRange();U.setStart(L.node,L.offset),K.removeAllRanges(),Se>ht?(K.addRange(U),K.extend(M.node,M.offset)):(U.setEnd(M.node,M.offset),K.addRange(U))}}}}for(W=[],K=b;K=K.parentNode;)K.nodeType===1&&W.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<W.length;b++){var J=W[b];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}Oc=!!wd,Sd=wd=null}finally{nt=h,Q.p=o,Y.T=a}}t.current=i,Bt=2}}function $y(){if(Bt===2){Bt=0;var t=hr,i=co,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=Y.T,Y.T=null;var o=Q.p;Q.p=2;var h=nt;nt|=4;try{Sy(t,i.alternate,i)}finally{nt=h,Q.p=o,Y.T=a}}Bt=3}}function Jy(){if(Bt===4||Bt===3){Bt=0,Ls();var t=hr,i=co,a=Es,o=Ly;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Bt=5:(Bt=0,co=hr=null,Wy(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(cr=null),yi(a),i=i.stateNode,ot&&typeof ot.onCommitFiberRoot=="function")try{ot.onCommitFiberRoot(fn,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=Y.T,h=Q.p,Q.p=2,Y.T=null;try{for(var f=t.onRecoverableError,_=0;_<o.length;_++){var b=o[_];f(b.value,{componentStack:b.stack})}}finally{Y.T=i,Q.p=h}}(Es&3)!==0&&Ec(),Bi(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===cd?Cl++:(Cl=0,cd=t):Cl=0,Rl(0)}}function Wy(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,ll(i)))}function Ec(){return Xy(),$y(),Jy(),Zy()}function Zy(){if(Bt!==5)return!1;var t=hr,i=ld;ld=0;var a=yi(Es),o=Y.T,h=Q.p;try{Q.p=32>a?32:a,Y.T=null,a=ud,ud=null;var f=hr,_=Es;if(Bt=0,co=hr=null,Es=0,(nt&6)!==0)throw Error(r(331));var b=nt;if(nt|=4,ky(f.current),Dy(f,f.current,_,a),nt=b,Rl(0,!1),ot&&typeof ot.onPostCommitFiberRoot=="function")try{ot.onPostCommitFiberRoot(fn,f)}catch{}return!0}finally{Q.p=h,Y.T=o,Wy(t,i)}}function e0(t,i,a){i=ri(a,i),i=qf(t.stateNode,i,2),t=sr(t,i,2),t!==null&&(es(t,2),Bi(t))}function at(t,i,a){if(t.tag===3)e0(t,t,a);else for(;i!==null;){if(i.tag===3){e0(i,t,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(cr===null||!cr.has(o))){t=ri(a,t),a=ty(2),o=sr(i,a,2),o!==null&&(ny(a,o,i,t),es(o,2),Bi(o));break}}i=i.return}}function dd(t,i,a){var o=t.pingCache;if(o===null){o=t.pingCache=new hT;var h=new Set;o.set(i,h)}else h=o.get(i),h===void 0&&(h=new Set,o.set(i,h));h.has(a)||(rd=!0,h.add(a),t=gT.bind(null,t,i,a),i.then(t,t))}function gT(t,i,a){var o=t.pingCache;o!==null&&o.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,ft===t&&(Be&a)===a&&(xt===4||xt===3&&(Be&62914560)===Be&&300>Gt()-mc?(nt&2)===0&&ho(t,0):ad|=a,uo===Be&&(uo=0)),Bi(t)}function t0(t,i){i===0&&(i=Ia()),t=Zr(t,i),t!==null&&(es(t,i),Bi(t))}function yT(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),t0(t,a)}function _T(t,i){var a=0;switch(t.tag){case 31:case 13:var o=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(i),t0(t,a)}function vT(t,i){return Ke(t,i)}var bc=null,mo=null,md=!1,Tc=!1,pd=!1,dr=0;function Bi(t){t!==mo&&t.next===null&&(mo===null?bc=mo=t:mo=mo.next=t),Tc=!0,md||(md=!0,bT())}function Rl(t,i){if(!pd&&Tc){pd=!0;do for(var a=!1,o=bc;o!==null;){if(t!==0){var h=o.pendingLanes;if(h===0)var f=0;else{var _=o.suspendedLanes,b=o.pingedLanes;f=(1<<31-vt(42|t)+1)-1,f&=h&~(_&~b),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,r0(o,f))}else f=Be,f=En(o,o===ft?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||bn(o,f)||(a=!0,r0(o,f));o=o.next}while(a);pd=!1}}function ET(){n0()}function n0(){Tc=md=!1;var t=0;dr!==0&&DT()&&(t=dr);for(var i=Gt(),a=null,o=bc;o!==null;){var h=o.next,f=i0(o,i);f===0?(o.next=null,a===null?bc=h:a.next=h,h===null&&(mo=a)):(a=o,(t!==0||(f&3)!==0)&&(Tc=!0)),o=h}Bt!==0&&Bt!==5||Rl(t),dr!==0&&(dr=0)}function i0(t,i){for(var a=t.suspendedLanes,o=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var _=31-vt(f),b=1<<_,N=h[_];N===-1?((b&a)===0||(b&o)!==0)&&(h[_]=Ra(b,i)):N<=i&&(t.expiredLanes|=b),f&=~b}if(i=ft,a=Be,a=En(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,a===0||t===i&&(rt===2||rt===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&zt(o),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||bn(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(o!==null&&zt(o),yi(a)){case 2:case 8:a=Pr;break;case 32:a=Ni;break;case 268435456:a=Ur;break;default:a=Ni}return o=s0.bind(null,t),a=Ke(a,o),t.callbackPriority=i,t.callbackNode=a,i}return o!==null&&o!==null&&zt(o),t.callbackPriority=2,t.callbackNode=null,2}function s0(t,i){if(Bt!==0&&Bt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Ec()&&t.callbackNode!==a)return null;var o=Be;return o=En(t,t===ft?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(Uy(t,o,i),i0(t,Gt()),t.callbackNode!=null&&t.callbackNode===a?s0.bind(null,t):null)}function r0(t,i){if(Ec())return null;Uy(t,i,!0)}function bT(){MT(function(){(nt&6)!==0?Ke(hn,ET):n0()})}function gd(){if(dr===0){var t=Wa;t===0&&(t=mn,mn<<=1,(mn&261888)===0&&(mn=256)),dr=t}return dr}function a0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:La(""+t)}function o0(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function TT(t,i,a,o,h){if(i==="submit"&&a&&a.stateNode===h){var f=a0((h[Ot]||null).action),_=o.submitter;_&&(i=(i=_[Ot]||null)?a0(i.formAction):_.getAttribute("formAction"),i!==null&&(f=i,_=null));var b=new ki("action","action",null,o,h);t.push({event:b,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(dr!==0){var N=_?o0(h,_):new FormData(h);jf(a,{pending:!0,data:N,method:h.method,action:f},null,N)}}else typeof f=="function"&&(b.preventDefault(),N=_?o0(h,_):new FormData(h),jf(a,{pending:!0,data:N,method:h.method,action:f},f,N))},currentTarget:h}]})}}for(var yd=0;yd<Wh.length;yd++){var _d=Wh[yd],wT=_d.toLowerCase(),ST=_d[0].toUpperCase()+_d.slice(1);wi(wT,"on"+ST)}wi(Pp,"onAnimationEnd"),wi(Up,"onAnimationIteration"),wi(zp,"onAnimationStart"),wi("dblclick","onDoubleClick"),wi("focusin","onFocus"),wi("focusout","onBlur"),wi(zb,"onTransitionRun"),wi(Bb,"onTransitionStart"),wi(qb,"onTransitionCancel"),wi(Bp,"onTransitionEnd"),ei("onMouseEnter",["mouseout","mouseover"]),ei("onMouseLeave",["mouseout","mouseover"]),ei("onPointerEnter",["pointerout","pointerover"]),ei("onPointerLeave",["pointerout","pointerover"]),Zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Il));function l0(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],h=o.event;o=o.listeners;e:{var f=void 0;if(i)for(var _=o.length-1;0<=_;_--){var b=o[_],N=b.instance,z=b.currentTarget;if(b=b.listener,N!==f&&h.isPropagationStopped())break e;f=b,h.currentTarget=z;try{f(h)}catch($){Lu($)}h.currentTarget=null,f=N}else for(_=0;_<o.length;_++){if(b=o[_],N=b.instance,z=b.currentTarget,b=b.listener,N!==f&&h.isPropagationStopped())break e;f=b,h.currentTarget=z;try{f(h)}catch($){Lu($)}h.currentTarget=null,f=N}}}}function Ue(t,i){var a=i[Us];a===void 0&&(a=i[Us]=new Set);var o=t+"__bubble";a.has(o)||(u0(i,t,2,!1),a.add(o))}function vd(t,i,a){var o=0;i&&(o|=4),u0(a,t,o,i)}var wc="_reactListening"+Math.random().toString(36).slice(2);function Ed(t){if(!t[wc]){t[wc]=!0,Bs.forEach(function(a){a!=="selectionchange"&&(AT.has(a)||vd(a,!1,t),vd(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[wc]||(i[wc]=!0,vd("selectionchange",!1,i))}}function u0(t,i,a,o){switch(P0(i)){case 2:var h=ZT;break;case 8:h=ew;break;default:h=Vd}a=h.bind(null,i,a,t),h=void 0,!Gr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),o?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function bd(t,i,a,o,h){var f=o;if((i&1)===0&&(i&2)===0&&o!==null)e:for(;;){if(o===null)return;var _=o.tag;if(_===3||_===4){var b=o.stateNode.containerInfo;if(b===h)break;if(_===4)for(_=o.return;_!==null;){var N=_.tag;if((N===3||N===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;b!==null;){if(_=Wn(b),_===null)return;if(N=_.tag,N===5||N===6||N===26||N===27){o=f=_;continue e}b=b.parentNode}}o=o.return}Ys(function(){var z=f,$=ti(a),W=[];e:{var H=qp.get(t);if(H!==void 0){var K=ki,pe=t;switch(t){case"keypress":if(Qr(a)===0)break e;case"keydown":case"keyup":K=ku;break;case"focusin":pe="focus",K=Xr;break;case"focusout":pe="blur",K=Xr;break;case"beforeblur":case"afterblur":K=Xr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=el;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Au;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=m;break;case Pp:case Up:case zp:K=Cu;break;case Bp:K=w;break;case"scroll":case"scrollend":K=Zo;break;case"wheel":K=G;break;case"copy":case"cut":case"paste":K=Ru;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=as;break;case"toggle":case"beforetoggle":K=Ve}var Se=(i&4)!==0,ht=!Se&&(t==="scroll"||t==="scrollend"),L=Se?H!==null?H+"Capture":null:H;Se=[];for(var M=z,U;M!==null;){var J=M;if(U=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||U===null||L===null||(J=vi(M,L),J!=null&&Se.push(Nl(M,J,U))),ht)break;M=M.return}0<Se.length&&(H=new K(H,pe,null,a,$),W.push({event:H,listeners:Se}))}}if((i&7)===0){e:{if(H=t==="mouseover"||t==="pointerover",K=t==="mouseout"||t==="pointerout",H&&a!==$o&&(pe=a.relatedTarget||a.fromElement)&&(Wn(pe)||pe[$n]))break e;if((K||H)&&(H=$.window===$?$:(H=$.ownerDocument)?H.defaultView||H.parentWindow:window,K?(pe=a.relatedTarget||a.toElement,K=z,pe=pe?Wn(pe):null,pe!==null&&(ht=u(pe),Se=pe.tag,pe!==ht||Se!==5&&Se!==27&&Se!==6)&&(pe=null)):(K=null,pe=z),K!==pe)){if(Se=el,J="onMouseLeave",L="onMouseEnter",M="mouse",(t==="pointerout"||t==="pointerover")&&(Se=as,J="onPointerLeave",L="onPointerEnter",M="pointer"),ht=K==null?H:pn(K),U=pe==null?H:pn(pe),H=new Se(J,M+"leave",K,a,$),H.target=ht,H.relatedTarget=U,J=null,Wn($)===z&&(Se=new Se(L,M+"enter",pe,a,$),Se.target=U,Se.relatedTarget=ht,J=Se),ht=J,K&&pe)t:{for(Se=xT,L=K,M=pe,U=0,J=L;J;J=Se(J))U++;J=0;for(var be=M;be;be=Se(be))J++;for(;0<U-J;)L=Se(L),U--;for(;0<J-U;)M=Se(M),J--;for(;U--;){if(L===M||M!==null&&L===M.alternate){Se=L;break t}L=Se(L),M=Se(M)}Se=null}else Se=null;K!==null&&c0(W,H,K,Se,!1),pe!==null&&ht!==null&&c0(W,ht,pe,Se,!0)}}e:{if(H=z?pn(z):window,K=H.nodeName&&H.nodeName.toLowerCase(),K==="select"||K==="input"&&H.type==="file")var Je=Cp;else if(Ap(H))if(Rp)Je=Lb;else{Je=Vb;var ge=kb}else K=H.nodeName,!K||K.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?z&&ja(z.elementType)&&(Je=Cp):Je=jb;if(Je&&(Je=Je(t,z))){xp(W,Je,a,$);break e}ge&&ge(t,H,z),t==="focusout"&&z&&H.type==="number"&&z.memoizedProps.value!=null&&Qo(H,"number",H.value)}switch(ge=z?pn(z):window,t){case"focusin":(Ap(ge)||ge.contentEditable==="true")&&(Fa=ge,Xh=z,rl=null);break;case"focusout":rl=Xh=Fa=null;break;case"mousedown":$h=!0;break;case"contextmenu":case"mouseup":case"dragend":$h=!1,jp(W,a,$);break;case"selectionchange":if(Ub)break;case"keydown":case"keyup":jp(W,a,$)}var Le;if(tt)e:{switch(t){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else Ha?$r(t,a)&&(qe="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(qe="onCompositionStart");qe&&(Li&&a.locale!=="ko"&&(Ha||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&Ha&&(Le=Wo()):(Mi=$,Jo="value"in Mi?Mi.value:Mi.textContent,Ha=!0)),ge=Sc(z,qe),0<ge.length&&(qe=new ji(qe,t,null,a,$),W.push({event:qe,listeners:ge}),Le?qe.data=Le:(Le=qa(a),Le!==null&&(qe.data=Le)))),(Le=ii?Nb(t,a):Db(t,a))&&(qe=Sc(z,"onBeforeInput"),0<qe.length&&(ge=new ji("onBeforeInput","beforeinput",null,a,$),W.push({event:ge,listeners:qe}),ge.data=Le)),TT(W,t,z,a,$)}l0(W,i)})}function Nl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Sc(t,i){for(var a=i+"Capture",o=[];t!==null;){var h=t,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=vi(t,a),h!=null&&o.unshift(Nl(t,h,f)),h=vi(t,i),h!=null&&o.push(Nl(t,h,f))),t.tag===3)return o;t=t.return}return[]}function xT(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function c0(t,i,a,o,h){for(var f=i._reactName,_=[];a!==null&&a!==o;){var b=a,N=b.alternate,z=b.stateNode;if(b=b.tag,N!==null&&N===o)break;b!==5&&b!==26&&b!==27||z===null||(N=z,h?(z=vi(a,f),z!=null&&_.unshift(Nl(a,z,N))):h||(z=vi(a,f),z!=null&&_.push(Nl(a,z,N)))),a=a.return}_.length!==0&&t.push({event:i,listeners:_})}var CT=/\r\n?/g,RT=/\u0000|\uFFFD/g;function h0(t){return(typeof t=="string"?t:""+t).replace(CT,`
`).replace(RT,"")}function f0(t,i){return i=h0(i),h0(t)===i}function ct(t,i,a,o,h,f){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||wn(t,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&wn(t,""+o);break;case"className":sn(t,"class",o);break;case"tabIndex":sn(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":sn(t,a,o);break;case"style":Xo(t,o,f);break;case"data":if(i!=="object"){sn(t,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=La(""+o),t.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(i!=="input"&&ct(t,i,"name",h.name,h,null),ct(t,i,"formEncType",h.formEncType,h,null),ct(t,i,"formMethod",h.formMethod,h,null),ct(t,i,"formTarget",h.formTarget,h,null)):(ct(t,i,"encType",h.encType,h,null),ct(t,i,"method",h.method,h,null),ct(t,i,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=La(""+o),t.setAttribute(a,o);break;case"onClick":o!=null&&(t.onclick=_i);break;case"onScroll":o!=null&&Ue("scroll",t);break;case"onScrollEnd":o!=null&&Ue("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}a=La(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""+o):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":o===!0?t.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,o):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(a,o):t.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(a):t.setAttribute(a,o);break;case"popover":Ue("beforetoggle",t),Ue("toggle",t),Hs(t,"popover",o);break;case"xlinkActuate":bt(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":bt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":bt(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":bt(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":bt(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":bt(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":bt(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":bt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":bt(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Hs(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Su.get(a)||a,Hs(t,a,o))}}function Td(t,i,a,o,h,f){switch(a){case"style":Xo(t,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof o=="string"?wn(t,o):(typeof o=="number"||typeof o=="bigint")&&wn(t,""+o);break;case"onScroll":o!=null&&Ue("scroll",t);break;case"onScrollEnd":o!=null&&Ue("scrollend",t);break;case"onClick":o!=null&&(t.onclick=_i);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Br.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),f=t[Ot]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(i,f,h),typeof o=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,o,h);break e}a in t?t[a]=o:o===!0?t.setAttribute(a,""):Hs(t,a,o)}}}function Zt(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",t),Ue("load",t);var o=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var _=a[f];if(_!=null)switch(f){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:ct(t,i,f,_,a,null)}}h&&ct(t,i,"srcSet",a.srcSet,a,null),o&&ct(t,i,"src",a.src,a,null);return;case"input":Ue("invalid",t);var b=f=_=h=null,N=null,z=null;for(o in a)if(a.hasOwnProperty(o)){var $=a[o];if($!=null)switch(o){case"name":h=$;break;case"type":_=$;break;case"checked":N=$;break;case"defaultChecked":z=$;break;case"value":f=$;break;case"defaultValue":b=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,i));break;default:ct(t,i,o,$,a,null)}}bu(t,f,b,N,z,_,h,!1);return;case"select":Ue("invalid",t),o=_=f=null;for(h in a)if(a.hasOwnProperty(h)&&(b=a[h],b!=null))switch(h){case"value":f=b;break;case"defaultValue":_=b;break;case"multiple":o=b;default:ct(t,i,h,b,a,null)}i=f,a=_,t.multiple=!!o,i!=null?Fs(t,!!o,i,!1):a!=null&&Fs(t,!!o,a,!0);return;case"textarea":Ue("invalid",t),f=h=o=null;for(_ in a)if(a.hasOwnProperty(_)&&(b=a[_],b!=null))switch(_){case"value":o=b;break;case"defaultValue":h=b;break;case"children":f=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:ct(t,i,_,b,a,null)}Gs(t,o,h,f);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(o=a[N],o!=null))switch(N){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:ct(t,i,N,o,a,null)}return;case"dialog":Ue("beforetoggle",t),Ue("toggle",t),Ue("cancel",t),Ue("close",t);break;case"iframe":case"object":Ue("load",t);break;case"video":case"audio":for(o=0;o<Il.length;o++)Ue(Il[o],t);break;case"image":Ue("error",t),Ue("load",t);break;case"details":Ue("toggle",t);break;case"embed":case"source":case"link":Ue("error",t),Ue("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in a)if(a.hasOwnProperty(z)&&(o=a[z],o!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:ct(t,i,z,o,a,null)}return;default:if(ja(i)){for($ in a)a.hasOwnProperty($)&&(o=a[$],o!==void 0&&Td(t,i,$,o,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(o=a[b],o!=null&&ct(t,i,b,o,a,null))}function IT(t,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,_=null,b=null,N=null,z=null,$=null;for(K in a){var W=a[K];if(a.hasOwnProperty(K)&&W!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":N=W;default:o.hasOwnProperty(K)||ct(t,i,K,null,o,W)}}for(var H in o){var K=o[H];if(W=a[H],o.hasOwnProperty(H)&&(K!=null||W!=null))switch(H){case"type":f=K;break;case"name":h=K;break;case"checked":z=K;break;case"defaultChecked":$=K;break;case"value":_=K;break;case"defaultValue":b=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,i));break;default:K!==W&&ct(t,i,H,K,o,W)}}Va(t,_,b,N,z,$,f,h);return;case"select":K=_=b=H=null;for(f in a)if(N=a[f],a.hasOwnProperty(f)&&N!=null)switch(f){case"value":break;case"multiple":K=N;default:o.hasOwnProperty(f)||ct(t,i,f,null,o,N)}for(h in o)if(f=o[h],N=a[h],o.hasOwnProperty(h)&&(f!=null||N!=null))switch(h){case"value":H=f;break;case"defaultValue":b=f;break;case"multiple":_=f;default:f!==N&&ct(t,i,h,f,o,N)}i=b,a=_,o=K,H!=null?Fs(t,!!a,H,!1):!!o!=!!a&&(i!=null?Fs(t,!!a,i,!0):Fs(t,!!a,a?[]:"",!1));return;case"textarea":K=H=null;for(b in a)if(h=a[b],a.hasOwnProperty(b)&&h!=null&&!o.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:ct(t,i,b,null,o,h)}for(_ in o)if(h=o[_],f=a[_],o.hasOwnProperty(_)&&(h!=null||f!=null))switch(_){case"value":H=h;break;case"defaultValue":K=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==f&&ct(t,i,_,h,o,f)}Tu(t,H,K);return;case"option":for(var pe in a)if(H=a[pe],a.hasOwnProperty(pe)&&H!=null&&!o.hasOwnProperty(pe))switch(pe){case"selected":t.selected=!1;break;default:ct(t,i,pe,null,o,H)}for(N in o)if(H=o[N],K=a[N],o.hasOwnProperty(N)&&H!==K&&(H!=null||K!=null))switch(N){case"selected":t.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:ct(t,i,N,H,o,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in a)H=a[Se],a.hasOwnProperty(Se)&&H!=null&&!o.hasOwnProperty(Se)&&ct(t,i,Se,null,o,H);for(z in o)if(H=o[z],K=a[z],o.hasOwnProperty(z)&&H!==K&&(H!=null||K!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(137,i));break;default:ct(t,i,z,H,o,K)}return;default:if(ja(i)){for(var ht in a)H=a[ht],a.hasOwnProperty(ht)&&H!==void 0&&!o.hasOwnProperty(ht)&&Td(t,i,ht,void 0,o,H);for($ in o)H=o[$],K=a[$],!o.hasOwnProperty($)||H===K||H===void 0&&K===void 0||Td(t,i,$,H,o,K);return}}for(var L in a)H=a[L],a.hasOwnProperty(L)&&H!=null&&!o.hasOwnProperty(L)&&ct(t,i,L,null,o,H);for(W in o)H=o[W],K=a[W],!o.hasOwnProperty(W)||H===K||H==null&&K==null||ct(t,i,W,H,o,K)}function d0(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function NT(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var h=a[o],f=h.transferSize,_=h.initiatorType,b=h.duration;if(f&&b&&d0(_)){for(_=0,b=h.responseEnd,o+=1;o<a.length;o++){var N=a[o],z=N.startTime;if(z>b)break;var $=N.transferSize,W=N.initiatorType;$&&d0(W)&&(N=N.responseEnd,_+=$*(N<b?1:(b-z)/(N-z)))}if(--o,i+=8*(f+_)/(h.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var wd=null,Sd=null;function Ac(t){return t.nodeType===9?t:t.ownerDocument}function m0(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function p0(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Ad(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var xd=null;function DT(){var t=window.event;return t&&t.type==="popstate"?t===xd?!1:(xd=t,!0):(xd=null,!1)}var g0=typeof setTimeout=="function"?setTimeout:void 0,OT=typeof clearTimeout=="function"?clearTimeout:void 0,y0=typeof Promise=="function"?Promise:void 0,MT=typeof queueMicrotask=="function"?queueMicrotask:typeof y0<"u"?function(t){return y0.resolve(null).then(t).catch(kT)}:g0;function kT(t){setTimeout(function(){throw t})}function mr(t){return t==="head"}function _0(t,i){var a=i,o=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(o===0){t.removeChild(h),_o(i);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")Dl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Dl(a);for(var f=a.firstChild;f;){var _=f.nextSibling,b=f.nodeName;f[Jn]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&f.rel.toLowerCase()==="stylesheet"||a.removeChild(f),f=_}}else a==="body"&&Dl(t.ownerDocument.body);a=h}while(a);_o(i)}function v0(t,i){var a=t;t=0;do{var o=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=o}while(a)}function Cd(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Cd(a),zs(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function VT(t,i,a,o){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[Jn])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=ci(t.nextSibling),t===null)break}return null}function jT(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=ci(t.nextSibling),t===null))return null;return t}function E0(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=ci(t.nextSibling),t===null))return null;return t}function Rd(t){return t.data==="$?"||t.data==="$~"}function Id(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function LT(t,i){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||a.readyState!=="loading")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function ci(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var Nd=null;function b0(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(i===0)return ci(t.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}t=t.nextSibling}return null}function T0(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return t;i--}else a!=="/$"&&a!=="/&"||i++}t=t.previousSibling}return null}function w0(t,i,a){switch(i=Ac(a),t){case"html":if(t=i.documentElement,!t)throw Error(r(452));return t;case"head":if(t=i.head,!t)throw Error(r(453));return t;case"body":if(t=i.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function Dl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);zs(t)}var hi=new Map,S0=new Set;function xc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var bs=Q.d;Q.d={f:PT,r:UT,D:zT,C:BT,L:qT,m:HT,X:GT,S:FT,M:KT};function PT(){var t=bs.f(),i=yc();return t||i}function UT(t){var i=Tn(t);i!==null&&i.tag===5&&i.type==="form"?Bg(i):bs.r(t)}var po=typeof document>"u"?null:document;function A0(t,i,a){var o=po;if(o&&typeof i=="string"&&i){var h=rn(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),S0.has(h)||(S0.add(h),t={rel:t,crossOrigin:a,href:i},o.querySelector(h)===null&&(i=o.createElement("link"),Zt(i,"link",t),Et(i),o.head.appendChild(i)))}}function zT(t){bs.D(t),A0("dns-prefetch",t,null)}function BT(t,i){bs.C(t,i),A0("preconnect",t,i)}function qT(t,i,a){bs.L(t,i,a);var o=po;if(o&&t&&i){var h='link[rel="preload"][as="'+rn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+rn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+rn(a.imageSizes)+'"]')):h+='[href="'+rn(t)+'"]';var f=h;switch(i){case"style":f=go(t);break;case"script":f=yo(t)}hi.has(f)||(t=S({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),hi.set(f,t),o.querySelector(h)!==null||i==="style"&&o.querySelector(Ol(f))||i==="script"&&o.querySelector(Ml(f))||(i=o.createElement("link"),Zt(i,"link",t),Et(i),o.head.appendChild(i)))}}function HT(t,i){bs.m(t,i);var a=po;if(a&&t){var o=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+rn(o)+'"][href="'+rn(t)+'"]',f=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=yo(t)}if(!hi.has(f)&&(t=S({rel:"modulepreload",href:t},i),hi.set(f,t),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ml(f)))return}o=a.createElement("link"),Zt(o,"link",t),Et(o),a.head.appendChild(o)}}}function FT(t,i,a){bs.S(t,i,a);var o=po;if(o&&t){var h=Pn(o).hoistableStyles,f=go(t);i=i||"default";var _=h.get(f);if(!_){var b={loading:0,preload:null};if(_=o.querySelector(Ol(f)))b.loading=5;else{t=S({rel:"stylesheet",href:t,"data-precedence":i},a),(a=hi.get(f))&&Dd(t,a);var N=_=o.createElement("link");Et(N),Zt(N,"link",t),N._p=new Promise(function(z,$){N.onload=z,N.onerror=$}),N.addEventListener("load",function(){b.loading|=1}),N.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Cc(_,i,o)}_={type:"stylesheet",instance:_,count:1,state:b},h.set(f,_)}}}function GT(t,i){bs.X(t,i);var a=po;if(a&&t){var o=Pn(a).hoistableScripts,h=yo(t),f=o.get(h);f||(f=a.querySelector(Ml(h)),f||(t=S({src:t,async:!0},i),(i=hi.get(h))&&Od(t,i),f=a.createElement("script"),Et(f),Zt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function KT(t,i){bs.M(t,i);var a=po;if(a&&t){var o=Pn(a).hoistableScripts,h=yo(t),f=o.get(h);f||(f=a.querySelector(Ml(h)),f||(t=S({src:t,async:!0,type:"module"},i),(i=hi.get(h))&&Od(t,i),f=a.createElement("script"),Et(f),Zt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function x0(t,i,a,o){var h=(h=_e.current)?xc(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=go(a.href),a=Pn(h).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=go(a.href);var f=Pn(h).hoistableStyles,_=f.get(t);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,_),(f=h.querySelector(Ol(t)))&&!f._p&&(_.instance=f,_.state.loading=5),hi.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},hi.set(t,a),f||QT(h,t,a,_.state))),i&&o===null)throw Error(r(528,""));return _}if(i&&o!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=yo(a),a=Pn(h).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function go(t){return'href="'+rn(t)+'"'}function Ol(t){return'link[rel="stylesheet"]['+t+"]"}function C0(t){return S({},t,{"data-precedence":t.precedence,precedence:null})}function QT(t,i,a,o){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=t.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),Zt(i,"link",a),Et(i),t.head.appendChild(i))}function yo(t){return'[src="'+rn(t)+'"]'}function Ml(t){return"script[async]"+t}function R0(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=t.querySelector('style[data-href~="'+rn(a.href)+'"]');if(o)return i.instance=o,Et(o),o;var h=S({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),Et(o),Zt(o,"style",h),Cc(o,a.precedence,t),i.instance=o;case"stylesheet":h=go(a.href);var f=t.querySelector(Ol(h));if(f)return i.state.loading|=4,i.instance=f,Et(f),f;o=C0(a),(h=hi.get(h))&&Dd(o,h),f=(t.ownerDocument||t).createElement("link"),Et(f);var _=f;return _._p=new Promise(function(b,N){_.onload=b,_.onerror=N}),Zt(f,"link",o),i.state.loading|=4,Cc(f,a.precedence,t),i.instance=f;case"script":return f=yo(a.src),(h=t.querySelector(Ml(f)))?(i.instance=h,Et(h),h):(o=a,(h=hi.get(f))&&(o=S({},a),Od(o,h)),t=t.ownerDocument||t,h=t.createElement("script"),Et(h),Zt(h,"link",o),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,Cc(o,a.precedence,t));return i.instance}function Cc(t,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,f=h,_=0;_<o.length;_++){var b=o[_];if(b.dataset.precedence===i)f=b;else if(f!==h)break}f?f.parentNode.insertBefore(t,f.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Dd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Od(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Rc=null;function I0(t,i,a){if(Rc===null){var o=new Map,h=Rc=new Map;h.set(a,o)}else h=Rc,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(t))return o;for(o.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var f=a[h];if(!(f[Jn]||f[St]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var _=f.getAttribute(i)||"";_=t+_;var b=o.get(_);b?b.push(f):o.set(_,[f])}}return o}function N0(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function YT(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function D0(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function XT(t,i,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=go(o.href),f=i.querySelector(Ol(h));if(f){i=f._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Ic.bind(t),i.then(t,t)),a.state.loading|=4,a.instance=f,Et(f);return}f=i.ownerDocument||i,o=C0(o),(h=hi.get(h))&&Dd(o,h),f=f.createElement("link"),Et(f);var _=f;_._p=new Promise(function(b,N){_.onload=b,_.onerror=N}),Zt(f,"link",o),a.instance=f}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Ic.bind(t),i.addEventListener("load",a),i.addEventListener("error",a))}}var Md=0;function $T(t,i){return t.stylesheets&&t.count===0&&Dc(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var o=setTimeout(function(){if(t.stylesheets&&Dc(t,t.stylesheets),t.unsuspend){var f=t.unsuspend;t.unsuspend=null,f()}},6e4+i);0<t.imgBytes&&Md===0&&(Md=62500*NT());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Dc(t,t.stylesheets),t.unsuspend)){var f=t.unsuspend;t.unsuspend=null,f()}},(t.imgBytes>Md?50:800)+i);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function Ic(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Dc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Nc=null;function Dc(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Nc=new Map,i.forEach(JT,t),Nc=null,Ic.call(t))}function JT(t,i){if(!(i.state.loading&4)){var a=Nc.get(t);if(a)var o=a.get(null);else{a=new Map,Nc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var _=h[f];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),o=_)}o&&a.set(null,o)}h=i.instance,_=h.getAttribute("data-precedence"),f=a.get(_)||o,f===o&&a.set(null,h),a.set(_,h),this.count++,o=Ic.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),f?f.parentNode.insertBefore(h,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var kl={$$typeof:me,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function WT(t,i,a,o,h,f,_,b,N){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xn(0),this.hiddenUpdates=Xn(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function O0(t,i,a,o,h,f,_,b,N,z,$,W){return t=new WT(t,i,a,_,N,z,$,W,b),i=1,f===!0&&(i|=24),f=zn(3,null,null,i),t.current=f,f.stateNode=t,i=ff(),i.refCount++,t.pooledCache=i,i.refCount++,f.memoizedState={element:o,isDehydrated:a,cache:i},gf(f),t}function M0(t){return t?(t=Qa,t):Qa}function k0(t,i,a,o,h,f){h=M0(h),o.context===null?o.context=h:o.pendingContext=h,o=ir(i),o.payload={element:a},f=f===void 0?null:f,f!==null&&(o.callback=f),a=sr(t,o,i),a!==null&&(Rn(a,t,i),fl(a,t,i))}function V0(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function kd(t,i){V0(t,i),(t=t.alternate)&&V0(t,i)}function j0(t){if(t.tag===13||t.tag===31){var i=Zr(t,67108864);i!==null&&Rn(i,t,67108864),kd(t,67108864)}}function L0(t){if(t.tag===13||t.tag===31){var i=Gn();i=is(i);var a=Zr(t,i);a!==null&&Rn(a,t,i),kd(t,i)}}var Oc=!0;function ZT(t,i,a,o){var h=Y.T;Y.T=null;var f=Q.p;try{Q.p=2,Vd(t,i,a,o)}finally{Q.p=f,Y.T=h}}function ew(t,i,a,o){var h=Y.T;Y.T=null;var f=Q.p;try{Q.p=8,Vd(t,i,a,o)}finally{Q.p=f,Y.T=h}}function Vd(t,i,a,o){if(Oc){var h=jd(o);if(h===null)bd(t,i,o,Mc,a),U0(t,o);else if(nw(h,t,i,a,o))o.stopPropagation();else if(U0(t,o),i&4&&-1<tw.indexOf(t)){for(;h!==null;){var f=Tn(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var _=kn(f.pendingLanes);if(_!==0){var b=f;for(b.pendingLanes|=2,b.entangledLanes|=2;_;){var N=1<<31-vt(_);b.entanglements[1]|=N,_&=~N}Bi(f),(nt&6)===0&&(pc=Gt()+500,Rl(0))}}break;case 31:case 13:b=Zr(f,2),b!==null&&Rn(b,f,2),yc(),kd(f,2)}if(f=jd(o),f===null&&bd(t,i,o,Mc,a),f===h)break;h=f}h!==null&&o.stopPropagation()}else bd(t,i,o,null,a)}}function jd(t){return t=ti(t),Ld(t)}var Mc=null;function Ld(t){if(Mc=null,t=Wn(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=d(i),t!==null)return t;t=null}else if(a===31){if(t=p(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Mc=t,null}function P0(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Dt()){case hn:return 2;case Pr:return 8;case Ni:case Go:return 32;case Ur:return 268435456;default:return 32}default:return 32}}var Pd=!1,pr=null,gr=null,yr=null,Vl=new Map,jl=new Map,_r=[],tw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function U0(t,i){switch(t){case"focusin":case"focusout":pr=null;break;case"dragenter":case"dragleave":gr=null;break;case"mouseover":case"mouseout":yr=null;break;case"pointerover":case"pointerout":Vl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":jl.delete(i.pointerId)}}function Ll(t,i,a,o,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:f,targetContainers:[h]},i!==null&&(i=Tn(i),i!==null&&j0(i)),t):(t.eventSystemFlags|=o,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function nw(t,i,a,o,h){switch(i){case"focusin":return pr=Ll(pr,t,i,a,o,h),!0;case"dragenter":return gr=Ll(gr,t,i,a,o,h),!0;case"mouseover":return yr=Ll(yr,t,i,a,o,h),!0;case"pointerover":var f=h.pointerId;return Vl.set(f,Ll(Vl.get(f)||null,t,i,a,o,h)),!0;case"gotpointercapture":return f=h.pointerId,jl.set(f,Ll(jl.get(f)||null,t,i,a,o,h)),!0}return!1}function z0(t){var i=Wn(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=d(a),i!==null){t.blockedOn=i,jn(t.priority,function(){L0(a)});return}}else if(i===31){if(i=p(a),i!==null){t.blockedOn=i,jn(t.priority,function(){L0(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function kc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=jd(t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);$o=o,a.target.dispatchEvent(o),$o=null}else return i=Tn(a),i!==null&&j0(i),t.blockedOn=a,!1;i.shift()}return!0}function B0(t,i,a){kc(t)&&a.delete(i)}function iw(){Pd=!1,pr!==null&&kc(pr)&&(pr=null),gr!==null&&kc(gr)&&(gr=null),yr!==null&&kc(yr)&&(yr=null),Vl.forEach(B0),jl.forEach(B0)}function Vc(t,i){t.blockedOn===i&&(t.blockedOn=null,Pd||(Pd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,iw)))}var jc=null;function q0(t){jc!==t&&(jc=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){jc===t&&(jc=null);for(var i=0;i<t.length;i+=3){var a=t[i],o=t[i+1],h=t[i+2];if(typeof o!="function"){if(Ld(o||a)===null)continue;break}var f=Tn(a);f!==null&&(t.splice(i,3),i-=3,jf(f,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function _o(t){function i(N){return Vc(N,t)}pr!==null&&Vc(pr,t),gr!==null&&Vc(gr,t),yr!==null&&Vc(yr,t),Vl.forEach(i),jl.forEach(i);for(var a=0;a<_r.length;a++){var o=_r[a];o.blockedOn===t&&(o.blockedOn=null)}for(;0<_r.length&&(a=_r[0],a.blockedOn===null);)z0(a),a.blockedOn===null&&_r.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],f=a[o+1],_=h[Ot]||null;if(typeof f=="function")_||q0(a);else if(_){var b=null;if(f&&f.hasAttribute("formAction")){if(h=f,_=f[Ot]||null)b=_.formAction;else if(Ld(h)!==null)continue}else b=_.action;typeof b=="function"?a[o+1]=b:(a.splice(o,3),o-=3),q0(a)}}}function H0(){function t(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(_){return h=_})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function Ud(t){this._internalRoot=t}Lc.prototype.render=Ud.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,o=Gn();k0(a,o,t,i,null,null)},Lc.prototype.unmount=Ud.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;k0(t.current,2,null,t,null,null),yc(),i[$n]=null}};function Lc(t){this._internalRoot=t}Lc.prototype.unstable_scheduleHydration=function(t){if(t){var i=Na();t={blockedOn:null,target:t,priority:i};for(var a=0;a<_r.length&&i!==0&&i<_r[a].priority;a++);_r.splice(a,0,t),a===0&&z0(t)}};var F0=e.version;if(F0!=="19.2.3")throw Error(r(527,F0,"19.2.3"));Q.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=g(i),t=t!==null?T(t):null,t=t===null?null:t.stateNode,t};var sw={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pc.isDisabled&&Pc.supportsFiber)try{fn=Pc.inject(sw),ot=Pc}catch{}}return Ul.createRoot=function(t,i){if(!l(t))throw Error(r(299));var a=!1,o="",h=Jg,f=Wg,_=Zg;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=O0(t,1,!1,null,null,a,o,null,h,f,_,H0),t[$n]=i.current,Ed(t),new Ud(i)},Ul.hydrateRoot=function(t,i,a){if(!l(t))throw Error(r(299));var o=!1,h="",f=Jg,_=Wg,b=Zg,N=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(N=a.formState)),i=O0(t,1,!0,i,a??null,o,h,N,f,_,b,H0),i.context=M0(null),a=i.current,o=Gn(),o=is(o),h=ir(o),h.callback=null,sr(a,h,o),a=o,i.current.lanes=a,es(i,a),Bi(i),t[$n]=i.current,Ed(t),new Lc(i)},Ul.version="19.2.3",Ul}var e_;function pw(){if(e_)return qd.exports;e_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),qd.exports=mw(),qd.exports}var gw=pw();const yw="modulepreload",_w=function(s,e){return new URL(s,e).href},t_={},n_=function(e,n,r){let l=Promise.resolve();if(n&&n.length>0){let g=function(T){return Promise.all(T.map(S=>Promise.resolve(S).then(D=>({status:"fulfilled",value:D}),D=>({status:"rejected",reason:D}))))};const d=document.getElementsByTagName("link"),p=document.querySelector("meta[property=csp-nonce]"),y=p?.nonce||p?.getAttribute("nonce");l=g(n.map(T=>{if(T=_w(T,r),T in t_)return;t_[T]=!0;const S=T.endsWith(".css"),D=S?'[rel="stylesheet"]':"";if(r)for(let q=d.length-1;q>=0;q--){const B=d[q];if(B.href===T&&(!S||B.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${T}"]${D}`))return;const V=document.createElement("link");if(V.rel=S?"stylesheet":yw,S||(V.as="script"),V.crossOrigin="",V.href=T,y&&V.setAttribute("nonce",y),document.head.appendChild(V),S)return new Promise((q,B)=>{V.addEventListener("load",q),V.addEventListener("error",()=>B(new Error(`Unable to preload CSS for ${T}`)))})}))}function u(d){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=d,window.dispatchEvent(p),!p.defaultPrevented)throw d}return l.then(d=>{for(const p of d||[])p.status==="rejected"&&u(p.reason);return e().catch(u)})},vw=()=>{};var i_={};const Lv=function(s){const e=[];let n=0;for(let r=0;r<s.length;r++){let l=s.charCodeAt(r);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++r)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},Ew=function(s){const e=[];let n=0,r=0;for(;n<s.length;){const l=s[n++];if(l<128)e[r++]=String.fromCharCode(l);else if(l>191&&l<224){const u=s[n++];e[r++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=s[n++],d=s[n++],p=s[n++],y=((l&7)<<18|(u&63)<<12|(d&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(y>>10)),e[r++]=String.fromCharCode(56320+(y&1023))}else{const u=s[n++],d=s[n++];e[r++]=String.fromCharCode((l&15)<<12|(u&63)<<6|d&63)}}return e.join("")},Pv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let l=0;l<s.length;l+=3){const u=s[l],d=l+1<s.length,p=d?s[l+1]:0,y=l+2<s.length,g=y?s[l+2]:0,T=u>>2,S=(u&3)<<4|p>>4;let D=(p&15)<<2|g>>6,V=g&63;y||(V=64,d||(D=64)),r.push(n[T],n[S],n[D],n[V])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(Lv(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):Ew(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let l=0;l<s.length;){const u=n[s.charAt(l++)],p=l<s.length?n[s.charAt(l)]:0;++l;const g=l<s.length?n[s.charAt(l)]:64;++l;const S=l<s.length?n[s.charAt(l)]:64;if(++l,u==null||p==null||g==null||S==null)throw new bw;const D=u<<2|p>>4;if(r.push(D),g!==64){const V=p<<4&240|g>>2;if(r.push(V),S!==64){const q=g<<6&192|S;r.push(q)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class bw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Tw=function(s){const e=Lv(s);return Pv.encodeByteArray(e,!0)},nh=function(s){return Tw(s).replace(/\./g,"")},Uv=function(s){try{return Pv.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ww(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Sw=()=>ww().__FIREBASE_DEFAULTS__,Aw=()=>{if(typeof process>"u"||typeof i_>"u")return;const s=i_.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},xw=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&Uv(s[1]);return e&&JSON.parse(e)},wh=()=>{try{return vw()||Sw()||Aw()||xw()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},zv=s=>wh()?.emulatorHosts?.[s],Cw=s=>{const e=zv(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Bv=()=>wh()?.config,qv=s=>wh()?.[`_${s}`];class Rw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function Uo(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Hv(s){return(await fetch(s,{credentials:"include"})).ok}function Iw(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",l=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${r}`,aud:r,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[nh(JSON.stringify(n)),nh(JSON.stringify(d)),""].join(".")}const Yl={};function Nw(){const s={prod:[],emulator:[]};for(const e of Object.keys(Yl))Yl[e]?s.emulator.push(e):s.prod.push(e);return s}function Dw(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let s_=!1;function Fv(s,e){if(typeof window>"u"||typeof document>"u"||!Uo(window.location.host)||Yl[s]===e||Yl[s]||s_)return;Yl[s]=e;function n(D){return`__firebase__banner__${D}`}const r="__firebase__banner",u=Nw().prod.length>0;function d(){const D=document.getElementById(r);D&&D.remove()}function p(D){D.style.display="flex",D.style.background="#7faaf0",D.style.position="fixed",D.style.bottom="5px",D.style.left="5px",D.style.padding=".5em",D.style.borderRadius="5px",D.style.alignItems="center"}function y(D,V){D.setAttribute("width","24"),D.setAttribute("id",V),D.setAttribute("height","24"),D.setAttribute("viewBox","0 0 24 24"),D.setAttribute("fill","none"),D.style.marginLeft="-6px"}function g(){const D=document.createElement("span");return D.style.cursor="pointer",D.style.marginLeft="16px",D.style.fontSize="24px",D.innerHTML=" &times;",D.onclick=()=>{s_=!0,d()},D}function T(D,V){D.setAttribute("id",V),D.innerText="Learn more",D.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",D.setAttribute("target","__blank"),D.style.paddingLeft="5px",D.style.textDecoration="underline"}function S(){const D=Dw(r),V=n("text"),q=document.getElementById(V)||document.createElement("span"),B=n("learnmore"),F=document.getElementById(B)||document.createElement("a"),ie=n("preprendIcon"),fe=document.getElementById(ie)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(D.created){const me=D.element;p(me),T(F,B);const Oe=g();y(fe,ie),me.append(fe,q,F,Oe),document.body.appendChild(me)}u?(q.innerText="Preview backend disconnected.",fe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(fe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",V)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ow(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function Mw(){const s=wh()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Vw(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function jw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Lw(){const s=cn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function Pw(){return!Mw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Uw(){try{return typeof indexedDB=="object"}catch{return!1}}function zw(){return new Promise((s,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(r);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(r),s(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(n){e(n)}})}const Bw="FirebaseError";class Vs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Bw,Object.setPrototypeOf(this,Vs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cu.prototype.create)}}class cu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},l=`${this.service}/${e}`,u=this.errors[e],d=u?qw(u,r):"Error",p=`${this.serviceName}: ${d} (${l}).`;return new Vs(l,p,r)}}function qw(s,e){return s.replace(Hw,(n,r)=>{const l=e[r];return l!=null?String(l):`<${r}?>`})}const Hw=/\{\$([^}]+)}/g;function Fw(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function ga(s,e){if(s===e)return!0;const n=Object.keys(s),r=Object.keys(e);for(const l of n){if(!r.includes(l))return!1;const u=s[l],d=e[l];if(r_(u)&&r_(d)){if(!ga(u,d))return!1}else if(u!==d)return!1}for(const l of r)if(!n.includes(l))return!1;return!0}function r_(s){return s!==null&&typeof s=="object"}function hu(s){const e=[];for(const[n,r]of Object.entries(s))Array.isArray(r)?r.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ql(s){const e={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[l,u]=r.split("=");e[decodeURIComponent(l)]=decodeURIComponent(u)}}),e}function Hl(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function Gw(s,e){const n=new Kw(s,e);return n.subscribe.bind(n)}class Kw{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let l;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Qw(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:r},l.next===void 0&&(l.next=Kd),l.error===void 0&&(l.error=Kd),l.complete===void 0&&(l.complete=Kd);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Qw(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function Kd(){}function vn(s){return s&&s._delegate?s._delegate:s}class ya{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const fa="[DEFAULT]";class Yw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Rw;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&r.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(r)return null;throw l}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($w(e))try{this.getOrInitializeService({instanceIdentifier:fa})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:l});r.resolve(u)}catch{}}}}clearInstance(e=fa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fa){return this.instances.has(e)}getOptions(e=fa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[u,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);r===p&&d.resolve(l)}return l}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(r)??new Set;l.add(e),this.onInitCallbacks.set(r,l);const u=this.instances.get(r);return u&&e(u,r),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const l of r)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Xw(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=fa){return this.component?this.component.multipleInstances?e:fa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Xw(s){return s===fa?void 0:s}function $w(s){return s.instantiationMode==="EAGER"}class Jw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Yw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var He;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(He||(He={}));const Ww={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},Zw=He.INFO,eS={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},tS=(s,e,...n)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),l=eS[e];if(l)console[l](`[${r}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Mm{constructor(e){this.name=e,this._logLevel=Zw,this._logHandler=tS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ww[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const nS=(s,e)=>e.some(n=>s instanceof n);let a_,o_;function iS(){return a_||(a_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sS(){return o_||(o_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Gv=new WeakMap,rm=new WeakMap,Kv=new WeakMap,Qd=new WeakMap,km=new WeakMap;function rS(s){const e=new Promise((n,r)=>{const l=()=>{s.removeEventListener("success",u),s.removeEventListener("error",d)},u=()=>{n(Sr(s.result)),l()},d=()=>{r(s.error),l()};s.addEventListener("success",u),s.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&Gv.set(n,s)}).catch(()=>{}),km.set(e,s),e}function aS(s){if(rm.has(s))return;const e=new Promise((n,r)=>{const l=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",d),s.removeEventListener("abort",d)},u=()=>{n(),l()},d=()=>{r(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",u),s.addEventListener("error",d),s.addEventListener("abort",d)});rm.set(s,e)}let am={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return rm.get(s);if(e==="objectStoreNames")return s.objectStoreNames||Kv.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Sr(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function oS(s){am=s(am)}function lS(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=s.call(Yd(this),e,...n);return Kv.set(r,e.sort?e.sort():[e]),Sr(r)}:sS().includes(s)?function(...e){return s.apply(Yd(this),e),Sr(Gv.get(this))}:function(...e){return Sr(s.apply(Yd(this),e))}}function uS(s){return typeof s=="function"?lS(s):(s instanceof IDBTransaction&&aS(s),nS(s,iS())?new Proxy(s,am):s)}function Sr(s){if(s instanceof IDBRequest)return rS(s);if(Qd.has(s))return Qd.get(s);const e=uS(s);return e!==s&&(Qd.set(s,e),km.set(e,s)),e}const Yd=s=>km.get(s);function cS(s,e,{blocked:n,upgrade:r,blocking:l,terminated:u}={}){const d=indexedDB.open(s,e),p=Sr(d);return r&&d.addEventListener("upgradeneeded",y=>{r(Sr(d.result),y.oldVersion,y.newVersion,Sr(d.transaction),y)}),n&&d.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),p.then(y=>{u&&y.addEventListener("close",()=>u()),l&&y.addEventListener("versionchange",g=>l(g.oldVersion,g.newVersion,g))}).catch(()=>{}),p}const hS=["get","getKey","getAll","getAllKeys","count"],fS=["put","add","delete","clear"],Xd=new Map;function l_(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Xd.get(e))return Xd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,l=fS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(l||hS.includes(n)))return;const u=async function(d,...p){const y=this.transaction(d,l?"readwrite":"readonly");let g=y.store;return r&&(g=g.index(p.shift())),(await Promise.all([g[n](...p),l&&y.done]))[0]};return Xd.set(e,u),u}oS(s=>({...s,get:(e,n,r)=>l_(e,n)||s.get(e,n,r),has:(e,n)=>!!l_(e,n)||s.has(e,n)}));class dS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(mS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function mS(s){return s.getComponent()?.type==="VERSION"}const om="@firebase/app",u_="0.14.6";const Ds=new Mm("@firebase/app"),pS="@firebase/app-compat",gS="@firebase/analytics-compat",yS="@firebase/analytics",_S="@firebase/app-check-compat",vS="@firebase/app-check",ES="@firebase/auth",bS="@firebase/auth-compat",TS="@firebase/database",wS="@firebase/data-connect",SS="@firebase/database-compat",AS="@firebase/functions",xS="@firebase/functions-compat",CS="@firebase/installations",RS="@firebase/installations-compat",IS="@firebase/messaging",NS="@firebase/messaging-compat",DS="@firebase/performance",OS="@firebase/performance-compat",MS="@firebase/remote-config",kS="@firebase/remote-config-compat",VS="@firebase/storage",jS="@firebase/storage-compat",LS="@firebase/firestore",PS="@firebase/ai",US="@firebase/firestore-compat",zS="firebase",BS="12.6.0";const lm="[DEFAULT]",qS={[om]:"fire-core",[pS]:"fire-core-compat",[yS]:"fire-analytics",[gS]:"fire-analytics-compat",[vS]:"fire-app-check",[_S]:"fire-app-check-compat",[ES]:"fire-auth",[bS]:"fire-auth-compat",[TS]:"fire-rtdb",[wS]:"fire-data-connect",[SS]:"fire-rtdb-compat",[AS]:"fire-fn",[xS]:"fire-fn-compat",[CS]:"fire-iid",[RS]:"fire-iid-compat",[IS]:"fire-fcm",[NS]:"fire-fcm-compat",[DS]:"fire-perf",[OS]:"fire-perf-compat",[MS]:"fire-rc",[kS]:"fire-rc-compat",[VS]:"fire-gcs",[jS]:"fire-gcs-compat",[LS]:"fire-fst",[US]:"fire-fst-compat",[PS]:"fire-vertex","fire-js":"fire-js",[zS]:"fire-js-all"};const eu=new Map,HS=new Map,um=new Map;function c_(s,e){try{s.container.addComponent(e)}catch(n){Ds.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function Io(s){const e=s.name;if(um.has(e))return Ds.debug(`There were multiple attempts to register component ${e}.`),!1;um.set(e,s);for(const n of eu.values())c_(n,s);for(const n of HS.values())c_(n,s);return!0}function Vm(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function Kn(s){return s==null?!1:s.settings!==void 0}const FS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ar=new cu("app","Firebase",FS);class GS{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ya("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ar.create("app-deleted",{appName:this._name})}}const zo=BS;function Qv(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const r={name:lm,automaticDataCollectionEnabled:!0,...e},l=r.name;if(typeof l!="string"||!l)throw Ar.create("bad-app-name",{appName:String(l)});if(n||(n=Bv()),!n)throw Ar.create("no-options");const u=eu.get(l);if(u){if(ga(n,u.options)&&ga(r,u.config))return u;throw Ar.create("duplicate-app",{appName:l})}const d=new Jw(l);for(const y of um.values())d.addComponent(y);const p=new GS(n,r,d);return eu.set(l,p),p}function jm(s=lm){const e=eu.get(s);if(!e&&s===lm&&Bv())return Qv();if(!e)throw Ar.create("no-app",{appName:s});return e}function KS(){return Array.from(eu.values())}function xr(s,e,n){let r=qS[s]??s;n&&(r+=`-${n}`);const l=r.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const d=[`Unable to register library "${r}" with version "${e}":`];l&&d.push(`library name "${r}" contains illegal characters (whitespace or "/")`),l&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ds.warn(d.join(" "));return}Io(new ya(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const QS="firebase-heartbeat-database",YS=1,tu="firebase-heartbeat-store";let $d=null;function Yv(){return $d||($d=cS(QS,YS,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(tu)}catch(n){console.warn(n)}}}}).catch(s=>{throw Ar.create("idb-open",{originalErrorMessage:s.message})})),$d}async function XS(s){try{const n=(await Yv()).transaction(tu),r=await n.objectStore(tu).get(Xv(s));return await n.done,r}catch(e){if(e instanceof Vs)Ds.warn(e.message);else{const n=Ar.create("idb-get",{originalErrorMessage:e?.message});Ds.warn(n.message)}}}async function h_(s,e){try{const r=(await Yv()).transaction(tu,"readwrite");await r.objectStore(tu).put(e,Xv(s)),await r.done}catch(n){if(n instanceof Vs)Ds.warn(n.message);else{const r=Ar.create("idb-set",{originalErrorMessage:n?.message});Ds.warn(r.message)}}}function Xv(s){return`${s.name}!${s.options.appId}`}const $S=1024,JS=30;class WS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new eA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=f_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(l=>l.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>JS){const l=tA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ds.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=f_(),{heartbeatsToSend:n,unsentEntries:r}=ZS(this._heartbeatsCache.heartbeats),l=nh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return Ds.warn(e),""}}}function f_(){return new Date().toISOString().substring(0,10)}function ZS(s,e=$S){const n=[];let r=s.slice();for(const l of s){const u=n.find(d=>d.agent===l.agent);if(u){if(u.dates.push(l.date),d_(n)>e){u.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),d_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class eA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Uw()?zw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await XS(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return h_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return h_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function d_(s){return nh(JSON.stringify({version:2,heartbeats:s})).length}function tA(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let r=1;r<s.length;r++)s[r].date<n&&(n=s[r].date,e=r);return e}function nA(s){Io(new ya("platform-logger",e=>new dS(e),"PRIVATE")),Io(new ya("heartbeat",e=>new WS(e),"PRIVATE")),xr(om,u_,s),xr(om,u_,"esm2020"),xr("fire-js","")}nA("");var iA="firebase",sA="12.7.0";xr(iA,sA,"app");function $v(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Jv=$v,Wv=new cu("auth","Firebase",$v());const ih=new Mm("@firebase/auth");function rA(s,...e){ih.logLevel<=He.WARN&&ih.warn(`Auth (${zo}): ${s}`,...e)}function Kc(s,...e){ih.logLevel<=He.ERROR&&ih.error(`Auth (${zo}): ${s}`,...e)}function mi(s,...e){throw Pm(s,...e)}function Ri(s,...e){return Pm(s,...e)}function Lm(s,e,n){const r={...Jv(),[e]:n};return new cu("auth","Firebase",r).create(e,{appName:s.name})}function Rs(s){return Lm(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function aA(s,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&mi(s,"argument-error"),Lm(s,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pm(s,...e){if(typeof s!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(n,...r)}return Wv.create(s,...e)}function Ae(s,e,...n){if(!s)throw Pm(e,...n)}function xs(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Kc(e),new Error(e)}function Os(s,e){s||xs(e)}function cm(){return typeof self<"u"&&self.location?.href||""}function oA(){return m_()==="http:"||m_()==="https:"}function m_(){return typeof self<"u"&&self.location?.protocol||null}function lA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(oA()||Vw()||"connection"in navigator)?navigator.onLine:!0}function uA(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class fu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Os(n>e,"Short delay should be less than long delay!"),this.isMobile=Ow()||jw()}get(){return lA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Um(s,e){Os(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Zv{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const cA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const hA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],fA=new fu(3e4,6e4);function jr(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function js(s,e,n,r,l={}){return e1(s,l,async()=>{let u={},d={};r&&(e==="GET"?d=r:u={body:JSON.stringify(r)});const p=hu({key:s.config.apiKey,...d}).slice(1),y=await s._getAdditionalHeaders();y["Content-Type"]="application/json",s.languageCode&&(y["X-Firebase-Locale"]=s.languageCode);const g={method:e,headers:y,...u};return kw()||(g.referrerPolicy="no-referrer"),s.emulatorConfig&&Uo(s.emulatorConfig.host)&&(g.credentials="include"),Zv.fetch()(await t1(s,s.config.apiHost,n,p),g)})}async function e1(s,e,n){s._canInitEmulator=!1;const r={...cA,...e};try{const l=new mA(s),u=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw Uc(s,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const p=u.ok?d.errorMessage:d.error.message,[y,g]=p.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw Uc(s,"credential-already-in-use",d);if(y==="EMAIL_EXISTS")throw Uc(s,"email-already-in-use",d);if(y==="USER_DISABLED")throw Uc(s,"user-disabled",d);const T=r[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Lm(s,T,g);mi(s,T)}}catch(l){if(l instanceof Vs)throw l;mi(s,"network-request-failed",{message:String(l)})}}async function du(s,e,n,r,l={}){const u=await js(s,e,n,r,l);return"mfaPendingCredential"in u&&mi(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function t1(s,e,n,r){const l=`${e}${n}?${r}`,u=s,d=u.config.emulator?Um(s.config,l):`${s.config.apiScheme}://${l}`;return hA.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function dA(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ri(this.auth,"network-request-failed")),fA.get())})}}function Uc(s,e,n){const r={appName:s.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const l=Ri(s,e,r);return l.customData._tokenResponse=n,l}function p_(s){return s!==void 0&&s.enterprise!==void 0}class pA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return dA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function gA(s,e){return js(s,"GET","/v2/recaptchaConfig",jr(s,e))}async function yA(s,e){return js(s,"POST","/v1/accounts:delete",e)}async function sh(s,e){return js(s,"POST","/v1/accounts:lookup",e)}function Xl(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function n1(s,e=!1){const n=vn(s),r=await n.getIdToken(e),l=zm(r);Ae(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,d=u?.sign_in_provider;return{claims:l,token:r,authTime:Xl(Jd(l.auth_time)),issuedAtTime:Xl(Jd(l.iat)),expirationTime:Xl(Jd(l.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Jd(s){return Number(s)*1e3}function zm(s){const[e,n,r]=s.split(".");if(e===void 0||n===void 0||r===void 0)return Kc("JWT malformed, contained fewer than 3 sections"),null;try{const l=Uv(n);return l?JSON.parse(l):(Kc("Failed to decode base64 JWT payload"),null)}catch(l){return Kc("Caught error parsing JWT payload as JSON",l?.toString()),null}}function g_(s){const e=zm(s);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function No(s,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Vs&&_A(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function _A({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class vA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class hm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xl(this.lastLoginAt),this.creationTime=Xl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function rh(s){const e=s.auth,n=await s.getIdToken(),r=await No(s,sh(e,{idToken:n}));Ae(r?.users.length,e,"internal-error");const l=r.users[0];s._notifyReloadListener(l);const u=l.providerUserInfo?.length?s1(l.providerUserInfo):[],d=EA(s.providerData,u),p=s.isAnonymous,y=!(s.email&&l.passwordHash)&&!d?.length,g=p?y:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new hm(l.createdAt,l.lastLoginAt),isAnonymous:g};Object.assign(s,T)}async function i1(s){const e=vn(s);await rh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function EA(s,e){return[...s.filter(r=>!e.some(l=>l.providerId===r.providerId)),...e]}function s1(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function bA(s,e){const n=await e1(s,{},async()=>{const r=hu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:u}=s.config,d=await t1(s,l,"/v1/token",`key=${u}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:p,body:r};return s.emulatorConfig&&Uo(s.emulatorConfig.host)&&(y.credentials="include"),Zv.fetch()(d,y)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function TA(s,e){return js(s,"POST","/v2/accounts:revokeToken",jr(s,e))}class wo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):g_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const n=g_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:l,expiresIn:u}=await bA(e,n);this.updateTokensAndExpiration(r,l,Number(u))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:l,expirationTime:u}=n,d=new wo;return r&&(Ae(typeof r=="string","internal-error",{appName:e}),d.refreshToken=r),l&&(Ae(typeof l=="string","internal-error",{appName:e}),d.accessToken=l),u&&(Ae(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wo,this.toJSON())}_performRefresh(){return xs("not implemented")}}function Er(s,e){Ae(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class xi{constructor({uid:e,auth:n,stsTokenManager:r,...l}){this.providerId="firebase",this.proactiveRefresh=new vA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new hm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await No(this,this.stsTokenManager.getToken(this.auth,e));return Ae(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return n1(this,e)}reload(){return i1(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new xi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await rh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kn(this.auth.app))return Promise.reject(Rs(this.auth));const e=await this.getIdToken();return await No(this,yA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,l=n.email??void 0,u=n.phoneNumber??void 0,d=n.photoURL??void 0,p=n.tenantId??void 0,y=n._redirectEventId??void 0,g=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:S,emailVerified:D,isAnonymous:V,providerData:q,stsTokenManager:B}=n;Ae(S&&B,e,"internal-error");const F=wo.fromJSON(this.name,B);Ae(typeof S=="string",e,"internal-error"),Er(r,e.name),Er(l,e.name),Ae(typeof D=="boolean",e,"internal-error"),Ae(typeof V=="boolean",e,"internal-error"),Er(u,e.name),Er(d,e.name),Er(p,e.name),Er(y,e.name),Er(g,e.name),Er(T,e.name);const ie=new xi({uid:S,auth:e,email:l,emailVerified:D,displayName:r,isAnonymous:V,photoURL:d,phoneNumber:u,tenantId:p,stsTokenManager:F,createdAt:g,lastLoginAt:T});return q&&Array.isArray(q)&&(ie.providerData=q.map(fe=>({...fe}))),y&&(ie._redirectEventId=y),ie}static async _fromIdTokenResponse(e,n,r=!1){const l=new wo;l.updateFromServerResponse(n);const u=new xi({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:r});return await rh(u),u}static async _fromGetAccountInfoResponse(e,n,r){const l=n.users[0];Ae(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?s1(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!u?.length,p=new wo;p.updateFromIdToken(r);const y=new xi({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:d}),g={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new hm(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!u?.length};return Object.assign(y,g),y}}const y_=new Map;function Cs(s){Os(s instanceof Function,"Expected a class definition");let e=y_.get(s);return e?(Os(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,y_.set(s,e),e)}class r1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}r1.type="NONE";const fm=r1;function Qc(s,e,n){return`firebase:${s}:${e}:${n}`}class So{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:l,name:u}=this.auth;this.fullUserKey=Qc(this.userKey,l.apiKey,u),this.fullPersistenceKey=Qc("persistence",l.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await sh(this.auth,{idToken:e}).catch(()=>{});return n?xi._fromGetAccountInfoResponse(this.auth,n,e):null}return xi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new So(Cs(fm),e,r);const l=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=l[0]||Cs(fm);const d=Qc(r,e.config.apiKey,e.name);let p=null;for(const g of n)try{const T=await g._get(d);if(T){let S;if(typeof T=="string"){const D=await sh(e,{idToken:T}).catch(()=>{});if(!D)break;S=await xi._fromGetAccountInfoResponse(e,D,T)}else S=xi._fromJSON(e,T);g!==u&&(p=S),u=g;break}}catch{}const y=l.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!y.length?new So(u,e,r):(u=y[0],p&&await u._set(d,p.toJSON()),await Promise.all(n.map(async g=>{if(g!==u)try{await g._remove(d)}catch{}})),new So(u,e,r))}}function __(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(u1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(a1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(h1(e))return"Blackberry";if(f1(e))return"Webos";if(o1(e))return"Safari";if((e.includes("chrome/")||l1(e))&&!e.includes("edge/"))return"Chrome";if(c1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(n);if(r?.length===2)return r[1]}return"Other"}function a1(s=cn()){return/firefox\//i.test(s)}function o1(s=cn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function l1(s=cn()){return/crios\//i.test(s)}function u1(s=cn()){return/iemobile/i.test(s)}function c1(s=cn()){return/android/i.test(s)}function h1(s=cn()){return/blackberry/i.test(s)}function f1(s=cn()){return/webos/i.test(s)}function Bm(s=cn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function wA(s=cn()){return Bm(s)&&!!window.navigator?.standalone}function SA(){return Lw()&&document.documentMode===10}function d1(s=cn()){return Bm(s)||c1(s)||f1(s)||h1(s)||/windows phone/i.test(s)||u1(s)}function m1(s,e=[]){let n;switch(s){case"Browser":n=__(cn());break;case"Worker":n=`${__(cn())}-${s}`;break;default:n=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${zo}/${r}`}class AA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=u=>new Promise((d,p)=>{try{const y=e(u);d(y)}catch(y){p(y)}});r.onAbort=n,this.queue.push(r);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function xA(s,e={}){return js(s,"GET","/v2/passwordPolicy",jr(s,e))}const CA=6;class RA{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??CA,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let l=0;l<e.length;l++)r=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,l,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class IA{constructor(e,n,r,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new v_(this),this.idTokenSubscription=new v_(this),this.beforeStateQueue=new AA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Wv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Cs(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await So.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await sh(this,{idToken:e}),r=await xi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Kn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,d=r?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&p?.user&&(r=p.user,l=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(r)}catch(u){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await rh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=uA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Kn(this.app))return Promise.reject(Rs(this));const n=e?vn(e):null;return n&&Ae(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Kn(this.app)?Promise.reject(Rs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Kn(this.app)?Promise.reject(Rs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Cs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await xA(this),n=new RA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new cu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await TA(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Cs(e)||this._popupRedirectResolver;Ae(n,this,"argument-error"),this.redirectPersistenceManager=await So.create(this,[Cs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,l){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(p,this,"internal-error"),p.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const y=e.addObserver(n,r,l);return()=>{d=!0,y()}}else{const y=e.addObserver(n);return()=>{d=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=m1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Kn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&rA(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Lr(s){return vn(s)}class v_{constructor(e){this.auth=e,this.observer=null,this.addObserver=Gw(n=>this.observer=n)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Sh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NA(s){Sh=s}function p1(s){return Sh.loadJS(s)}function DA(){return Sh.recaptchaEnterpriseScript}function OA(){return Sh.gapiScript}function MA(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class kA{constructor(){this.enterprise=new VA}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class VA{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const jA="recaptcha-enterprise",g1="NO_RECAPTCHA";class LA{constructor(e){this.type=jA,this.auth=Lr(e)}async verify(e="verify",n=!1){async function r(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,p)=>{gA(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const g=new pA(y);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,d(g.siteKey)}}).catch(y=>{p(y)})})}function l(u,d,p){const y=window.grecaptcha;p_(y)?y.enterprise.ready(()=>{y.enterprise.execute(u,{action:e}).then(g=>{d(g)}).catch(()=>{d(g1)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new kA().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{r(this.auth).then(p=>{if(!n&&p_(window.grecaptcha))l(p,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let y=DA();y.length!==0&&(y+=p),p1(y).then(()=>{l(p,u,d)}).catch(g=>{d(g)})}}).catch(p=>{d(p)})})}}async function E_(s,e,n,r=!1,l=!1){const u=new LA(s);let d;if(l)d=g1;else try{d=await u.verify(n)}catch{d=await u.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const y=p.phoneEnrollmentInfo.phoneNumber,g=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const y=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function dm(s,e,n,r,l){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await E_(s,e,n,n==="getOobCode");return r(s,u)}else return r(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await E_(s,e,n,n==="getOobCode");return r(s,d)}else return Promise.reject(u)})}function y1(s,e){const n=Vm(s,"auth");if(n.isInitialized()){const l=n.getImmediate(),u=n.getOptions();if(ga(u,e??{}))return l;mi(l,"already-initialized")}return n.initialize({options:e})}function PA(s,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Cs);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e?.popupRedirectResolver)}function _1(s,e,n){const r=Lr(s);Ae(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const l=!1,u=v1(e),{host:d,port:p}=UA(e),y=p===null?"":`:${p}`,g={url:`${u}//${d}${y}/`},T=Object.freeze({host:d,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!r._canInitEmulator){Ae(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ae(ga(g,r.config.emulator)&&ga(T,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=T,r.settings.appVerificationDisabledForTesting=!0,Uo(d)?(Hv(`${u}//${d}${y}`),Fv("Auth",!0)):zA()}function v1(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function UA(s){const e=v1(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(r);if(l){const u=l[1];return{host:u,port:b_(r.substr(u.length+1))}}else{const[u,d]=r.split(":");return{host:u,port:b_(d)}}}function b_(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function zA(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class Ah{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return xs("not implemented")}_getIdTokenResponse(e){return xs("not implemented")}_linkToIdToken(e,n){return xs("not implemented")}_getReauthenticationResolver(e){return xs("not implemented")}}async function BA(s,e){return js(s,"POST","/v1/accounts:signUp",e)}async function qA(s,e){return du(s,"POST","/v1/accounts:signInWithPassword",jr(s,e))}async function HA(s,e){return du(s,"POST","/v1/accounts:signInWithEmailLink",jr(s,e))}async function FA(s,e){return du(s,"POST","/v1/accounts:signInWithEmailLink",jr(s,e))}class Do extends Ah{constructor(e,n,r,l=null){super("password",r),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new Do(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Do(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dm(e,n,"signInWithPassword",qA);case"emailLink":return HA(e,{email:this._email,oobCode:this._password});default:mi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dm(e,r,"signUpPassword",BA);case"emailLink":return FA(e,{idToken:n,email:this._email,oobCode:this._password});default:mi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ao(s,e){return du(s,"POST","/v1/accounts:signInWithIdp",jr(s,e))}const GA="http://localhost";class Ir extends Ah{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ir(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):mi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:l,...u}=n;if(!r||!l)return null;const d=new Ir(r,l);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return Ao(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ao(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ao(e,n)}buildRequest(){const e={requestUri:GA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=hu(n)}return e}}function KA(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function QA(s){const e=ql(Hl(s)).link,n=e?ql(Hl(e)).deep_link_id:null,r=ql(Hl(s)).deep_link_id;return(r?ql(Hl(r)).link:null)||r||n||e||s}class xh{constructor(e){const n=ql(Hl(e)),r=n.apiKey??null,l=n.oobCode??null,u=KA(n.mode??null);Ae(r&&l&&u,"argument-error"),this.apiKey=r,this.operation=u,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=QA(e);try{return new xh(n)}catch{return null}}}class Ta{constructor(){this.providerId=Ta.PROVIDER_ID}static credential(e,n){return Do._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=xh.parseLink(n);return Ae(r,"argument-error"),Do._fromEmailAndCode(e,r.code,r.tenantId)}}Ta.PROVIDER_ID="password";Ta.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ta.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class qm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class mu extends qm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ws extends mu{constructor(){super("facebook.com")}static credential(e){return Ir._fromParams({providerId:ws.PROVIDER_ID,signInMethod:ws.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ws.credentialFromTaggedObject(e)}static credentialFromError(e){return ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ws.credential(e.oauthAccessToken)}catch{return null}}}ws.FACEBOOK_SIGN_IN_METHOD="facebook.com";ws.PROVIDER_ID="facebook.com";class Fi extends mu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ir._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Fi.credentialFromTaggedObject(e)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Fi.credential(n,r)}catch{return null}}}Fi.GOOGLE_SIGN_IN_METHOD="google.com";Fi.PROVIDER_ID="google.com";class Ss extends mu{constructor(){super("github.com")}static credential(e){return Ir._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ss.credentialFromTaggedObject(e)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ss.credential(e.oauthAccessToken)}catch{return null}}}Ss.GITHUB_SIGN_IN_METHOD="github.com";Ss.PROVIDER_ID="github.com";class As extends mu{constructor(){super("twitter.com")}static credential(e,n){return Ir._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return As.credential(n,r)}catch{return null}}}As.TWITTER_SIGN_IN_METHOD="twitter.com";As.PROVIDER_ID="twitter.com";async function YA(s,e){return du(s,"POST","/v1/accounts:signUp",jr(s,e))}class _a{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,l=!1){const u=await xi._fromIdTokenResponse(e,r,l),d=T_(r);return new _a({user:u,providerId:d,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const l=T_(r);return new _a({user:e,providerId:l,_tokenResponse:r,operationType:n})}}function T_(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class ah extends Vs{constructor(e,n,r,l){super(n.code,n.message),this.operationType=r,this.user=l,Object.setPrototypeOf(this,ah.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,l){return new ah(e,n,r,l)}}function E1(s,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?ah._fromErrorAndOperation(s,u,e,r):u})}async function XA(s,e,n=!1){const r=await No(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return _a._forOperation(s,"link",r)}async function $A(s,e,n=!1){const{auth:r}=s;if(Kn(r.app))return Promise.reject(Rs(r));const l="reauthenticate";try{const u=await No(s,E1(r,l,e,s),n);Ae(u.idToken,r,"internal-error");const d=zm(u.idToken);Ae(d,r,"internal-error");const{sub:p}=d;return Ae(s.uid===p,r,"user-mismatch"),_a._forOperation(s,l,u)}catch(u){throw u?.code==="auth/user-not-found"&&mi(r,"user-mismatch"),u}}async function b1(s,e,n=!1){if(Kn(s.app))return Promise.reject(Rs(s));const r="signIn",l=await E1(s,r,e),u=await _a._fromIdTokenResponse(s,r,l);return n||await s._updateCurrentUser(u.user),u}async function T1(s,e){return b1(Lr(s),e)}async function w1(s){const e=Lr(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function JA(s,e,n){if(Kn(s.app))return Promise.reject(Rs(s));const r=Lr(s),d=await dm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",YA).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&w1(s),y}),p=await _a._fromIdTokenResponse(r,"signIn",d);return await r._updateCurrentUser(p.user),p}function WA(s,e,n){return Kn(s.app)?Promise.reject(Rs(s)):T1(vn(s),Ta.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&w1(s),r})}async function ZA(s,e){return js(s,"POST","/v1/accounts:update",e)}async function e2(s,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=vn(s),u={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},d=await No(r,ZA(r.auth,u));r.displayName=d.displayName||null,r.photoURL=d.photoUrl||null;const p=r.providerData.find(({providerId:y})=>y==="password");p&&(p.displayName=r.displayName,p.photoURL=r.photoURL),await r._updateTokensIfNecessary(d)}function S1(s,e,n,r){return vn(s).onIdTokenChanged(e,n,r)}function A1(s,e,n){return vn(s).beforeAuthStateChanged(e,n)}function x1(s,e,n,r){return vn(s).onAuthStateChanged(e,n,r)}function C1(s){return vn(s).signOut()}const oh="__sak";class R1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(oh,"1"),this.storage.removeItem(oh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const t2=1e3,n2=10;class I1 extends R1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=d1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),l=this.localCache[n];r!==l&&e(n,l,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,p,y)=>{this.notifyListeners(d,y)});return}const r=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(r);!n&&this.localCache[r]===d||this.notifyListeners(r,d)},u=this.storage.getItem(r);SA()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,n2):l()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},t2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}I1.type="LOCAL";const N1=I1;class D1 extends R1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}D1.type="SESSION";const Hm=D1;function i2(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Ch{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const r=new Ch(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:l,data:u}=n.data,d=this.handlersMap[l];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:l});const p=Array.from(d).map(async g=>g(n.origin,u)),y=await i2(p);n.ports[0].postMessage({status:"done",eventId:r,eventType:l,response:y})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ch.receivers=[];function Fm(s="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return s+n}class s2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,d;return new Promise((p,y)=>{const g=Fm("",20);l.port1.start();const T=setTimeout(()=>{y(new Error("unsupported_event"))},r);d={messageChannel:l,onMessage(S){const D=S;if(D.data.eventId===g)switch(D.data.status){case"ack":clearTimeout(T),u=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(D.data.response);break;default:clearTimeout(T),clearTimeout(u),y(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function Ki(){return window}function r2(s){Ki().location.href=s}function O1(){return typeof Ki().WorkerGlobalScope<"u"&&typeof Ki().importScripts=="function"}async function a2(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function o2(){return navigator?.serviceWorker?.controller||null}function l2(){return O1()?self:null}const M1="firebaseLocalStorageDb",u2=1,lh="firebaseLocalStorage",k1="fbase_key";class pu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Rh(s,e){return s.transaction([lh],e?"readwrite":"readonly").objectStore(lh)}function c2(){const s=indexedDB.deleteDatabase(M1);return new pu(s).toPromise()}function mm(){const s=indexedDB.open(M1,u2);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(lh,{keyPath:k1})}catch(l){n(l)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(lh)?e(r):(r.close(),await c2(),e(await mm()))})})}async function w_(s,e,n){const r=Rh(s,!0).put({[k1]:e,value:n});return new pu(r).toPromise()}async function h2(s,e){const n=Rh(s,!1).get(e),r=await new pu(n).toPromise();return r===void 0?null:r.value}function S_(s,e){const n=Rh(s,!0).delete(e);return new pu(n).toPromise()}const f2=800,d2=3;class V1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>d2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return O1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ch._getInstance(l2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await a2(),!this.activeServiceWorker)return;this.sender=new s2(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||o2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mm();return await w_(e,oh,"1"),await S_(e,oh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>w_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>h2(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>S_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const u=Rh(l,!1).getAll();return new pu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:l,value:u}of e)r.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!r.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),f2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}V1.type="LOCAL";const j1=V1;new fu(3e4,6e4);function L1(s,e){return e?Cs(e):(Ae(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class Gm extends Ah{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ao(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ao(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ao(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function m2(s){return b1(s.auth,new Gm(s),s.bypassAuthState)}function p2(s){const{auth:e,user:n}=s;return Ae(n,e,"internal-error"),$A(n,new Gm(s),s.bypassAuthState)}async function g2(s){const{auth:e,user:n}=s;return Ae(n,e,"internal-error"),XA(n,new Gm(s),s.bypassAuthState)}class P1{constructor(e,n,r,l,u=!1){this.auth=e,this.resolver=r,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:l,tenantId:u,error:d,type:p}=e;if(d){this.reject(d);return}const y={auth:this.auth,requestUri:n,sessionId:r,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(y))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return m2;case"linkViaPopup":case"linkViaRedirect":return g2;case"reauthViaPopup":case"reauthViaRedirect":return p2;default:mi(this.auth,"internal-error")}}resolve(e){Os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const y2=new fu(2e3,1e4);async function U1(s,e,n){if(Kn(s.app))return Promise.reject(Ri(s,"operation-not-supported-in-this-environment"));const r=Lr(s);aA(s,e,qm);const l=L1(r,n);return new da(r,"signInViaPopup",e,l).executeNotNull()}class da extends P1{constructor(e,n,r,l,u){super(e,n,l,u),this.provider=r,this.authWindow=null,this.pollId=null,da.currentPopupAction&&da.currentPopupAction.cancel(),da.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){Os(this.filter.length===1,"Popup operations only handle one event");const e=Fm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ri(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ri(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,da.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ri(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,y2.get())};e()}}da.currentPopupAction=null;const _2="pendingRedirect",Yc=new Map;class v2 extends P1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Yc.get(this.auth._key());if(!e){try{const r=await E2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Yc.set(this.auth._key(),e)}return this.bypassAuthState||Yc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function E2(s,e){const n=w2(e),r=T2(s);if(!await r._isAvailable())return!1;const l=await r._get(n)==="true";return await r._remove(n),l}function b2(s,e){Yc.set(s._key(),e)}function T2(s){return Cs(s._redirectPersistence)}function w2(s){return Qc(_2,s.config.apiKey,s.name)}async function S2(s,e,n=!1){if(Kn(s.app))return Promise.reject(Rs(s));const r=Lr(s),l=L1(r,e),d=await new v2(r,l,n).execute();return d&&!n&&(delete d.user._redirectEventId,await r._persistUserIfCurrent(d.user),await r._setRedirectUser(null,e)),d}const A2=600*1e3;class x2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!C2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!z1(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Ri(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=A2&&this.cachedEventUids.clear(),this.cachedEventUids.has(A_(e))}saveEventToCache(e){this.cachedEventUids.add(A_(e)),this.lastProcessedEventTime=Date.now()}}function A_(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function z1({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function C2(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return z1(s);default:return!1}}async function R2(s,e={}){return js(s,"GET","/v1/projects",e)}const I2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,N2=/^https?/;async function D2(s){if(s.config.emulator)return;const{authorizedDomains:e}=await R2(s);for(const n of e)try{if(O2(n))return}catch{}mi(s,"unauthorized-domain")}function O2(s){const e=cm(),{protocol:n,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&r===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===r}if(!N2.test(n))return!1;if(I2.test(s))return r===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(r)}const M2=new fu(3e4,6e4);function x_(){const s=Ki().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function k2(s){return new Promise((e,n)=>{function r(){x_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{x_(),n(Ri(s,"network-request-failed"))},timeout:M2.get()})}if(Ki().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ki().gapi?.load)r();else{const l=MA("iframefcb");return Ki()[l]=()=>{gapi.load?r():n(Ri(s,"network-request-failed"))},p1(`${OA()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Xc=null,e})}let Xc=null;function V2(s){return Xc=Xc||k2(s),Xc}const j2=new fu(5e3,15e3),L2="__/auth/iframe",P2="emulator/auth/iframe",U2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},z2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function B2(s){const e=s.config;Ae(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?Um(e,P2):`https://${s.config.authDomain}/${L2}`,r={apiKey:e.apiKey,appName:s.name,v:zo},l=z2.get(s.config.apiHost);l&&(r.eid=l);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${n}?${hu(r).slice(1)}`}async function q2(s){const e=await V2(s),n=Ki().gapi;return Ae(n,s,"internal-error"),e.open({where:document.body,url:B2(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:U2,dontclear:!0},r=>new Promise(async(l,u)=>{await r.restyle({setHideOnLeave:!1});const d=Ri(s,"network-request-failed"),p=Ki().setTimeout(()=>{u(d)},j2.get());function y(){Ki().clearTimeout(p),l(r)}r.ping(y).then(y,()=>{u(d)})}))}const H2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},F2=500,G2=600,K2="_blank",Q2="http://localhost";class C_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Y2(s,e,n,r=F2,l=G2){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const y={...H2,width:r.toString(),height:l.toString(),top:u,left:d},g=cn().toLowerCase();n&&(p=l1(g)?K2:n),a1(g)&&(e=e||Q2,y.scrollbars="yes");const T=Object.entries(y).reduce((D,[V,q])=>`${D}${V}=${q},`,"");if(wA(g)&&p!=="_self")return X2(e||"",p),new C_(null);const S=window.open(e||"",p,T);Ae(S,s,"popup-blocked");try{S.focus()}catch{}return new C_(S)}function X2(s,e){const n=document.createElement("a");n.href=s,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const $2="__/auth/handler",J2="emulator/auth/handler",W2=encodeURIComponent("fac");async function R_(s,e,n,r,l,u){Ae(s.config.authDomain,s,"auth-domain-config-required"),Ae(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:r,v:zo,eventId:l};if(e instanceof qm){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",Fw(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,S]of Object.entries({}))d[T]=S}if(e instanceof mu){const T=e.getScopes().filter(S=>S!=="");T.length>0&&(d.scopes=T.join(","))}s.tenantId&&(d.tid=s.tenantId);const p=d;for(const T of Object.keys(p))p[T]===void 0&&delete p[T];const y=await s._getAppCheckToken(),g=y?`#${W2}=${encodeURIComponent(y)}`:"";return`${Z2(s)}?${hu(p).slice(1)}${g}`}function Z2({config:s}){return s.emulator?Um(s,J2):`https://${s.authDomain}/${$2}`}const Wd="webStorageSupport";class ex{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Hm,this._completeRedirectFn=S2,this._overrideRedirectResult=b2}async _openPopup(e,n,r,l){Os(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await R_(e,n,r,cm(),l);return Y2(e,u,Fm())}async _openRedirect(e,n,r,l){await this._originValidation(e);const u=await R_(e,n,r,cm(),l);return r2(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:u}=this.eventManagers[n];return l?Promise.resolve(l):(Os(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await q2(e),r=new x2(e);return n.register("authEvent",l=>(Ae(l?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Wd,{type:Wd},l=>{const u=l?.[0]?.[Wd];u!==void 0&&n(!!u),mi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=D2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return d1()||o1()||Bm()}}const B1=ex;var I_="@firebase/auth",N_="1.12.0";class tx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function nx(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ix(s){Io(new ya("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=r.options;Ae(d&&!d.includes(":"),"invalid-api-key",{appName:r.name});const y={apiKey:d,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:m1(s)},g=new IA(r,l,u,y);return PA(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Io(new ya("auth-internal",e=>{const n=Lr(e.getProvider("auth").getImmediate());return(r=>new tx(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),xr(I_,N_,nx(s)),xr(I_,N_,"esm2020")}const sx=300,rx=qv("authIdTokenMaxAge")||sx;let D_=null;const ax=s=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>rx)return;const l=n?.token;D_!==l&&(D_=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function q1(s=jm()){const e=Vm(s,"auth");if(e.isInitialized())return e.getImmediate();const n=y1(s,{popupRedirectResolver:B1,persistence:[j1,N1,Hm]}),r=qv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const d=ax(u.toString());A1(n,d,()=>d(n.currentUser)),S1(n,p=>d(p))}}const l=zv("auth");return l&&_1(n,`http://${l}`),n}function ox(){return document.getElementsByTagName("head")?.[0]??document}NA({loadJS(s){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=l=>{const u=Ri("internal-error");u.customData=l,n(u)},r.type="text/javascript",r.charset="UTF-8",ox().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ix("Browser");const O_=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeURL:xh,AuthCredential:Ah,EmailAuthCredential:Do,EmailAuthProvider:Ta,FacebookAuthProvider:ws,GithubAuthProvider:Ss,GoogleAuthProvider:Fi,OAuthCredential:Ir,TwitterAuthProvider:As,beforeAuthStateChanged:A1,browserLocalPersistence:N1,browserPopupRedirectResolver:B1,browserSessionPersistence:Hm,connectAuthEmulator:_1,createUserWithEmailAndPassword:JA,getAuth:q1,getIdTokenResult:n1,inMemoryPersistence:fm,indexedDBLocalPersistence:j1,initializeAuth:y1,onAuthStateChanged:x1,onIdTokenChanged:S1,prodErrorMap:Jv,reload:i1,signInWithCredential:T1,signInWithEmailAndPassword:WA,signInWithPopup:U1,signOut:C1,updateProfile:e2},Symbol.toStringTag,{value:"Module"}));var M_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Cr,H1;(function(){var s;function e(C,A){function x(){}x.prototype=A.prototype,C.F=A.prototype,C.prototype=new x,C.prototype.constructor=C,C.D=function(k,O,j){for(var R=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)R[Xe-2]=arguments[Xe];return A.prototype[O].apply(k,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(C,A,x){x||(x=0);const k=Array(16);if(typeof A=="string")for(var O=0;O<16;++O)k[O]=A.charCodeAt(x++)|A.charCodeAt(x++)<<8|A.charCodeAt(x++)<<16|A.charCodeAt(x++)<<24;else for(O=0;O<16;++O)k[O]=A[x++]|A[x++]<<8|A[x++]<<16|A[x++]<<24;A=C.g[0],x=C.g[1],O=C.g[2];let j=C.g[3],R;R=A+(j^x&(O^j))+k[0]+3614090360&4294967295,A=x+(R<<7&4294967295|R>>>25),R=j+(O^A&(x^O))+k[1]+3905402710&4294967295,j=A+(R<<12&4294967295|R>>>20),R=O+(x^j&(A^x))+k[2]+606105819&4294967295,O=j+(R<<17&4294967295|R>>>15),R=x+(A^O&(j^A))+k[3]+3250441966&4294967295,x=O+(R<<22&4294967295|R>>>10),R=A+(j^x&(O^j))+k[4]+4118548399&4294967295,A=x+(R<<7&4294967295|R>>>25),R=j+(O^A&(x^O))+k[5]+1200080426&4294967295,j=A+(R<<12&4294967295|R>>>20),R=O+(x^j&(A^x))+k[6]+2821735955&4294967295,O=j+(R<<17&4294967295|R>>>15),R=x+(A^O&(j^A))+k[7]+4249261313&4294967295,x=O+(R<<22&4294967295|R>>>10),R=A+(j^x&(O^j))+k[8]+1770035416&4294967295,A=x+(R<<7&4294967295|R>>>25),R=j+(O^A&(x^O))+k[9]+2336552879&4294967295,j=A+(R<<12&4294967295|R>>>20),R=O+(x^j&(A^x))+k[10]+4294925233&4294967295,O=j+(R<<17&4294967295|R>>>15),R=x+(A^O&(j^A))+k[11]+2304563134&4294967295,x=O+(R<<22&4294967295|R>>>10),R=A+(j^x&(O^j))+k[12]+1804603682&4294967295,A=x+(R<<7&4294967295|R>>>25),R=j+(O^A&(x^O))+k[13]+4254626195&4294967295,j=A+(R<<12&4294967295|R>>>20),R=O+(x^j&(A^x))+k[14]+2792965006&4294967295,O=j+(R<<17&4294967295|R>>>15),R=x+(A^O&(j^A))+k[15]+1236535329&4294967295,x=O+(R<<22&4294967295|R>>>10),R=A+(O^j&(x^O))+k[1]+4129170786&4294967295,A=x+(R<<5&4294967295|R>>>27),R=j+(x^O&(A^x))+k[6]+3225465664&4294967295,j=A+(R<<9&4294967295|R>>>23),R=O+(A^x&(j^A))+k[11]+643717713&4294967295,O=j+(R<<14&4294967295|R>>>18),R=x+(j^A&(O^j))+k[0]+3921069994&4294967295,x=O+(R<<20&4294967295|R>>>12),R=A+(O^j&(x^O))+k[5]+3593408605&4294967295,A=x+(R<<5&4294967295|R>>>27),R=j+(x^O&(A^x))+k[10]+38016083&4294967295,j=A+(R<<9&4294967295|R>>>23),R=O+(A^x&(j^A))+k[15]+3634488961&4294967295,O=j+(R<<14&4294967295|R>>>18),R=x+(j^A&(O^j))+k[4]+3889429448&4294967295,x=O+(R<<20&4294967295|R>>>12),R=A+(O^j&(x^O))+k[9]+568446438&4294967295,A=x+(R<<5&4294967295|R>>>27),R=j+(x^O&(A^x))+k[14]+3275163606&4294967295,j=A+(R<<9&4294967295|R>>>23),R=O+(A^x&(j^A))+k[3]+4107603335&4294967295,O=j+(R<<14&4294967295|R>>>18),R=x+(j^A&(O^j))+k[8]+1163531501&4294967295,x=O+(R<<20&4294967295|R>>>12),R=A+(O^j&(x^O))+k[13]+2850285829&4294967295,A=x+(R<<5&4294967295|R>>>27),R=j+(x^O&(A^x))+k[2]+4243563512&4294967295,j=A+(R<<9&4294967295|R>>>23),R=O+(A^x&(j^A))+k[7]+1735328473&4294967295,O=j+(R<<14&4294967295|R>>>18),R=x+(j^A&(O^j))+k[12]+2368359562&4294967295,x=O+(R<<20&4294967295|R>>>12),R=A+(x^O^j)+k[5]+4294588738&4294967295,A=x+(R<<4&4294967295|R>>>28),R=j+(A^x^O)+k[8]+2272392833&4294967295,j=A+(R<<11&4294967295|R>>>21),R=O+(j^A^x)+k[11]+1839030562&4294967295,O=j+(R<<16&4294967295|R>>>16),R=x+(O^j^A)+k[14]+4259657740&4294967295,x=O+(R<<23&4294967295|R>>>9),R=A+(x^O^j)+k[1]+2763975236&4294967295,A=x+(R<<4&4294967295|R>>>28),R=j+(A^x^O)+k[4]+1272893353&4294967295,j=A+(R<<11&4294967295|R>>>21),R=O+(j^A^x)+k[7]+4139469664&4294967295,O=j+(R<<16&4294967295|R>>>16),R=x+(O^j^A)+k[10]+3200236656&4294967295,x=O+(R<<23&4294967295|R>>>9),R=A+(x^O^j)+k[13]+681279174&4294967295,A=x+(R<<4&4294967295|R>>>28),R=j+(A^x^O)+k[0]+3936430074&4294967295,j=A+(R<<11&4294967295|R>>>21),R=O+(j^A^x)+k[3]+3572445317&4294967295,O=j+(R<<16&4294967295|R>>>16),R=x+(O^j^A)+k[6]+76029189&4294967295,x=O+(R<<23&4294967295|R>>>9),R=A+(x^O^j)+k[9]+3654602809&4294967295,A=x+(R<<4&4294967295|R>>>28),R=j+(A^x^O)+k[12]+3873151461&4294967295,j=A+(R<<11&4294967295|R>>>21),R=O+(j^A^x)+k[15]+530742520&4294967295,O=j+(R<<16&4294967295|R>>>16),R=x+(O^j^A)+k[2]+3299628645&4294967295,x=O+(R<<23&4294967295|R>>>9),R=A+(O^(x|~j))+k[0]+4096336452&4294967295,A=x+(R<<6&4294967295|R>>>26),R=j+(x^(A|~O))+k[7]+1126891415&4294967295,j=A+(R<<10&4294967295|R>>>22),R=O+(A^(j|~x))+k[14]+2878612391&4294967295,O=j+(R<<15&4294967295|R>>>17),R=x+(j^(O|~A))+k[5]+4237533241&4294967295,x=O+(R<<21&4294967295|R>>>11),R=A+(O^(x|~j))+k[12]+1700485571&4294967295,A=x+(R<<6&4294967295|R>>>26),R=j+(x^(A|~O))+k[3]+2399980690&4294967295,j=A+(R<<10&4294967295|R>>>22),R=O+(A^(j|~x))+k[10]+4293915773&4294967295,O=j+(R<<15&4294967295|R>>>17),R=x+(j^(O|~A))+k[1]+2240044497&4294967295,x=O+(R<<21&4294967295|R>>>11),R=A+(O^(x|~j))+k[8]+1873313359&4294967295,A=x+(R<<6&4294967295|R>>>26),R=j+(x^(A|~O))+k[15]+4264355552&4294967295,j=A+(R<<10&4294967295|R>>>22),R=O+(A^(j|~x))+k[6]+2734768916&4294967295,O=j+(R<<15&4294967295|R>>>17),R=x+(j^(O|~A))+k[13]+1309151649&4294967295,x=O+(R<<21&4294967295|R>>>11),R=A+(O^(x|~j))+k[4]+4149444226&4294967295,A=x+(R<<6&4294967295|R>>>26),R=j+(x^(A|~O))+k[11]+3174756917&4294967295,j=A+(R<<10&4294967295|R>>>22),R=O+(A^(j|~x))+k[2]+718787259&4294967295,O=j+(R<<15&4294967295|R>>>17),R=x+(j^(O|~A))+k[9]+3951481745&4294967295,C.g[0]=C.g[0]+A&4294967295,C.g[1]=C.g[1]+(O+(R<<21&4294967295|R>>>11))&4294967295,C.g[2]=C.g[2]+O&4294967295,C.g[3]=C.g[3]+j&4294967295}r.prototype.v=function(C,A){A===void 0&&(A=C.length);const x=A-this.blockSize,k=this.C;let O=this.h,j=0;for(;j<A;){if(O==0)for(;j<=x;)l(this,C,j),j+=this.blockSize;if(typeof C=="string"){for(;j<A;)if(k[O++]=C.charCodeAt(j++),O==this.blockSize){l(this,k),O=0;break}}else for(;j<A;)if(k[O++]=C[j++],O==this.blockSize){l(this,k),O=0;break}}this.h=O,this.o+=A},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var A=1;A<C.length-8;++A)C[A]=0;A=this.o*8;for(var x=C.length-8;x<C.length;++x)C[x]=A&255,A/=256;for(this.v(C),C=Array(16),A=0,x=0;x<4;++x)for(let k=0;k<32;k+=8)C[A++]=this.g[x]>>>k&255;return C};function u(C,A){var x=p;return Object.prototype.hasOwnProperty.call(x,C)?x[C]:x[C]=A(C)}function d(C,A){this.h=A;const x=[];let k=!0;for(let O=C.length-1;O>=0;O--){const j=C[O]|0;k&&j==A||(x[O]=j,k=!1)}this.g=x}var p={};function y(C){return-128<=C&&C<128?u(C,function(A){return new d([A|0],A<0?-1:0)}):new d([C|0],C<0?-1:0)}function g(C){if(isNaN(C)||!isFinite(C))return S;if(C<0)return F(g(-C));const A=[];let x=1;for(let k=0;C>=x;k++)A[k]=C/x|0,x*=4294967296;return new d(A,0)}function T(C,A){if(C.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(C.charAt(0)=="-")return F(T(C.substring(1),A));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=g(Math.pow(A,8));let k=S;for(let j=0;j<C.length;j+=8){var O=Math.min(8,C.length-j);const R=parseInt(C.substring(j,j+O),A);O<8?(O=g(Math.pow(A,O)),k=k.j(O).add(g(R))):(k=k.j(x),k=k.add(g(R)))}return k}var S=y(0),D=y(1),V=y(16777216);s=d.prototype,s.m=function(){if(B(this))return-F(this).m();let C=0,A=1;for(let x=0;x<this.g.length;x++){const k=this.i(x);C+=(k>=0?k:4294967296+k)*A,A*=4294967296}return C},s.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(q(this))return"0";if(B(this))return"-"+F(this).toString(C);const A=g(Math.pow(C,6));var x=this;let k="";for(;;){const O=Oe(x,A).g;x=ie(x,O.j(A));let j=((x.g.length>0?x.g[0]:x.h)>>>0).toString(C);if(x=O,q(x))return j+k;for(;j.length<6;)j="0"+j;k=j+k}},s.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function q(C){if(C.h!=0)return!1;for(let A=0;A<C.g.length;A++)if(C.g[A]!=0)return!1;return!0}function B(C){return C.h==-1}s.l=function(C){return C=ie(this,C),B(C)?-1:q(C)?0:1};function F(C){const A=C.g.length,x=[];for(let k=0;k<A;k++)x[k]=~C.g[k];return new d(x,~C.h).add(D)}s.abs=function(){return B(this)?F(this):this},s.add=function(C){const A=Math.max(this.g.length,C.g.length),x=[];let k=0;for(let O=0;O<=A;O++){let j=k+(this.i(O)&65535)+(C.i(O)&65535),R=(j>>>16)+(this.i(O)>>>16)+(C.i(O)>>>16);k=R>>>16,j&=65535,R&=65535,x[O]=R<<16|j}return new d(x,x[x.length-1]&-2147483648?-1:0)};function ie(C,A){return C.add(F(A))}s.j=function(C){if(q(this)||q(C))return S;if(B(this))return B(C)?F(this).j(F(C)):F(F(this).j(C));if(B(C))return F(this.j(F(C)));if(this.l(V)<0&&C.l(V)<0)return g(this.m()*C.m());const A=this.g.length+C.g.length,x=[];for(var k=0;k<2*A;k++)x[k]=0;for(k=0;k<this.g.length;k++)for(let O=0;O<C.g.length;O++){const j=this.i(k)>>>16,R=this.i(k)&65535,Xe=C.i(O)>>>16,et=C.i(O)&65535;x[2*k+2*O]+=R*et,fe(x,2*k+2*O),x[2*k+2*O+1]+=j*et,fe(x,2*k+2*O+1),x[2*k+2*O+1]+=R*Xe,fe(x,2*k+2*O+1),x[2*k+2*O+2]+=j*Xe,fe(x,2*k+2*O+2)}for(C=0;C<A;C++)x[C]=x[2*C+1]<<16|x[2*C];for(C=A;C<2*A;C++)x[C]=0;return new d(x,0)};function fe(C,A){for(;(C[A]&65535)!=C[A];)C[A+1]+=C[A]>>>16,C[A]&=65535,A++}function me(C,A){this.g=C,this.h=A}function Oe(C,A){if(q(A))throw Error("division by zero");if(q(C))return new me(S,S);if(B(C))return A=Oe(F(C),A),new me(F(A.g),F(A.h));if(B(A))return A=Oe(C,F(A)),new me(F(A.g),A.h);if(C.g.length>30){if(B(C)||B(A))throw Error("slowDivide_ only works with positive integers.");for(var x=D,k=A;k.l(C)<=0;)x=Ee(x),k=Ee(k);var O=we(x,1),j=we(k,1);for(k=we(k,2),x=we(x,2);!q(k);){var R=j.add(k);R.l(C)<=0&&(O=O.add(x),j=R),k=we(k,1),x=we(x,1)}return A=ie(C,O.j(A)),new me(O,A)}for(O=S;C.l(A)>=0;){for(x=Math.max(1,Math.floor(C.m()/A.m())),k=Math.ceil(Math.log(x)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),j=g(x),R=j.j(A);B(R)||R.l(C)>0;)x-=k,j=g(x),R=j.j(A);q(j)&&(j=D),O=O.add(j),C=ie(C,R)}return new me(O,C)}s.B=function(C){return Oe(this,C).h},s.and=function(C){const A=Math.max(this.g.length,C.g.length),x=[];for(let k=0;k<A;k++)x[k]=this.i(k)&C.i(k);return new d(x,this.h&C.h)},s.or=function(C){const A=Math.max(this.g.length,C.g.length),x=[];for(let k=0;k<A;k++)x[k]=this.i(k)|C.i(k);return new d(x,this.h|C.h)},s.xor=function(C){const A=Math.max(this.g.length,C.g.length),x=[];for(let k=0;k<A;k++)x[k]=this.i(k)^C.i(k);return new d(x,this.h^C.h)};function Ee(C){const A=C.g.length+1,x=[];for(let k=0;k<A;k++)x[k]=C.i(k)<<1|C.i(k-1)>>>31;return new d(x,C.h)}function we(C,A){const x=A>>5;A%=32;const k=C.g.length-x,O=[];for(let j=0;j<k;j++)O[j]=A>0?C.i(j+x)>>>A|C.i(j+x+1)<<32-A:C.i(j+x);return new d(O,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,H1=r,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=g,d.fromString=T,Cr=d}).apply(typeof M_<"u"?M_:typeof self<"u"?self:typeof window<"u"?window:{});var zc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var F1,Fl,G1,$c,pm,K1,Q1,Y1;(function(){var s,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof zc=="object"&&zc];for(var m=0;m<c.length;++m){var v=c[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function l(c,m){if(m)e:{var v=r;c=c.split(".");for(var w=0;w<c.length-1;w++){var P=c[w];if(!(P in v))break e;v=v[P]}c=c[c.length-1],w=v[c],m=m(w),m!=w&&m!=null&&e(v,c,{configurable:!0,writable:!0,value:m})}}l("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(c){return c||function(m){var v=[],w;for(w in m)Object.prototype.hasOwnProperty.call(m,w)&&v.push([w,m[w]]);return v}});var u=u||{},d=this||self;function p(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function y(c,m,v){return c.call.apply(c.bind,arguments)}function g(c,m,v){return g=y,g.apply(null,arguments)}function T(c,m){var v=Array.prototype.slice.call(arguments,1);return function(){var w=v.slice();return w.push.apply(w,arguments),c.apply(this,w)}}function S(c,m){function v(){}v.prototype=m.prototype,c.Z=m.prototype,c.prototype=new v,c.prototype.constructor=c,c.Ob=function(w,P,G){for(var ue=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)ue[Ve-2]=arguments[Ve];return m.prototype[P].apply(w,ue)}}var D=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function V(c){const m=c.length;if(m>0){const v=Array(m);for(let w=0;w<m;w++)v[w]=c[w];return v}return[]}function q(c,m){for(let w=1;w<arguments.length;w++){const P=arguments[w];var v=typeof P;if(v=v!="object"?v:P?Array.isArray(P)?"array":v:"null",v=="array"||v=="object"&&typeof P.length=="number"){v=c.length||0;const G=P.length||0;c.length=v+G;for(let ue=0;ue<G;ue++)c[v+ue]=P[ue]}else c.push(P)}}class B{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function F(c){d.setTimeout(()=>{throw c},0)}function ie(){var c=C;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class fe{constructor(){this.h=this.g=null}add(m,v){const w=me.get();w.set(m,v),this.h?this.h.next=w:this.g=w,this.h=w}}var me=new B(()=>new Oe,c=>c.reset());class Oe{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Ee,we=!1,C=new fe,A=()=>{const c=Promise.resolve(void 0);Ee=()=>{c.then(x)}};function x(){for(var c;c=ie();){try{c.h.call(c.g)}catch(v){F(v)}var m=me;m.j(c),m.h<100&&(m.h++,c.next=m.g,m.g=c)}we=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};d.addEventListener("test",v,m),d.removeEventListener("test",v,m)}catch{}return c})();function R(c){return/^[\s\xa0]*$/.test(c)}function Xe(c,m){O.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,m)}S(Xe,O),Xe.prototype.init=function(c,m){const v=this.type=c.type,w=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget,m||(v=="mouseover"?m=c.fromElement:v=="mouseout"&&(m=c.toElement)),this.relatedTarget=m,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Xe.Z.h.call(this)},Xe.prototype.h=function(){Xe.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var et="closure_listenable_"+(Math.random()*1e6|0),Y=0;function Q(c,m,v,w,P){this.listener=c,this.proxy=null,this.src=m,this.type=v,this.capture=!!w,this.ha=P,this.key=++Y,this.da=this.fa=!1}function se(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ce(c,m,v){for(const w in c)m.call(v,c[w],w,c)}function Ce(c,m){for(const v in c)m.call(void 0,c[v],v,c)}function I(c){const m={};for(const v in c)m[v]=c[v];return m}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function re(c,m){let v,w;for(let P=1;P<arguments.length;P++){w=arguments[P];for(v in w)c[v]=w[v];for(let G=0;G<X.length;G++)v=X[G],Object.prototype.hasOwnProperty.call(w,v)&&(c[v]=w[v])}}function le(c){this.src=c,this.g={},this.h=0}le.prototype.add=function(c,m,v,w,P){const G=c.toString();c=this.g[G],c||(c=this.g[G]=[],this.h++);const ue=_e(c,m,w,P);return ue>-1?(m=c[ue],v||(m.fa=!1)):(m=new Q(m,this.src,G,!!w,P),m.fa=v,c.push(m)),m};function he(c,m){const v=m.type;if(v in c.g){var w=c.g[v],P=Array.prototype.indexOf.call(w,m,void 0),G;(G=P>=0)&&Array.prototype.splice.call(w,P,1),G&&(se(m),c.g[v].length==0&&(delete c.g[v],c.h--))}}function _e(c,m,v,w){for(let P=0;P<c.length;++P){const G=c[P];if(!G.da&&G.listener==m&&G.capture==!!v&&G.ha==w)return P}return-1}var ve="closure_lm_"+(Math.random()*1e6|0),ze={};function it(c,m,v,w,P){if(Array.isArray(m)){for(let G=0;G<m.length;G++)it(c,m[G],v,w,P);return null}return v=ke(v),c&&c[et]?c.J(m,v,p(w)?!!w.capture:!1,P):Nn(c,m,v,!1,w,P)}function Nn(c,m,v,w,P,G){if(!m)throw Error("Invalid event type");const ue=p(P)?!!P.capture:!!P;let Ve=On(c);if(Ve||(c[ve]=Ve=new le(c)),v=Ve.add(m,v,w,ue,G),v.proxy)return v;if(w=Qn(),v.proxy=w,w.src=c,w.listener=v,c.addEventListener)j||(P=ue),P===void 0&&(P=!1),c.addEventListener(m.toString(),w,P);else if(c.attachEvent)c.attachEvent(Yt(m.toString()),w);else if(c.addListener&&c.removeListener)c.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Qn(){function c(v){return m.call(c.src,c.listener,v)}const m=Ii;return c}function Dn(c,m,v,w,P){if(Array.isArray(m))for(var G=0;G<m.length;G++)Dn(c,m[G],v,w,P);else w=p(w)?!!w.capture:!!w,v=ke(v),c&&c[et]?(c=c.i,G=String(m).toString(),G in c.g&&(m=c.g[G],v=_e(m,v,w,P),v>-1&&(se(m[v]),Array.prototype.splice.call(m,v,1),m.length==0&&(delete c.g[G],c.h--)))):c&&(c=On(c))&&(m=c.g[m.toString()],c=-1,m&&(c=_e(m,v,w,P)),(v=c>-1?m[c]:null)&&pi(v))}function pi(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[et])he(m.i,c);else{var v=c.type,w=c.proxy;m.removeEventListener?m.removeEventListener(v,w,c.capture):m.detachEvent?m.detachEvent(Yt(v),w):m.addListener&&m.removeListener&&m.removeListener(w),(v=On(m))?(he(v,c),v.h==0&&(v.src=null,m[ve]=null)):se(c)}}}function Yt(c){return c in ze?ze[c]:ze[c]="on"+c}function Ii(c,m){if(c.da)c=!0;else{m=new Xe(m,this);const v=c.listener,w=c.ha||c.src;c.fa&&pi(c),c=v.call(w,m)}return c}function On(c){return c=c[ve],c instanceof le?c:null}var Mn="__closure_events_fn_"+(Math.random()*1e9>>>0);function ke(c){return typeof c=="function"?c:(c[Mn]||(c[Mn]=function(m){return c.handleEvent(m)}),c[Mn])}function Me(){k.call(this),this.i=new le(this),this.M=this,this.G=null}S(Me,k),Me.prototype[et]=!0,Me.prototype.removeEventListener=function(c,m,v,w){Dn(this,c,m,v,w)};function Ke(c,m){var v,w=c.G;if(w)for(v=[];w;w=w.G)v.push(w);if(c=c.M,w=m.type||m,typeof m=="string")m=new O(m,c);else if(m instanceof O)m.target=m.target||c;else{var P=m;m=new O(w,c),re(m,P)}P=!0;let G,ue;if(v)for(ue=v.length-1;ue>=0;ue--)G=m.g=v[ue],P=zt(G,w,!0,m)&&P;if(G=m.g=c,P=zt(G,w,!0,m)&&P,P=zt(G,w,!1,m)&&P,v)for(ue=0;ue<v.length;ue++)G=m.g=v[ue],P=zt(G,w,!1,m)&&P}Me.prototype.N=function(){if(Me.Z.N.call(this),this.i){var c=this.i;for(const m in c.g){const v=c.g[m];for(let w=0;w<v.length;w++)se(v[w]);delete c.g[m],c.h--}}this.G=null},Me.prototype.J=function(c,m,v,w){return this.i.add(String(c),m,!1,v,w)},Me.prototype.K=function(c,m,v,w){return this.i.add(String(c),m,!0,v,w)};function zt(c,m,v,w){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();let P=!0;for(let G=0;G<m.length;++G){const ue=m[G];if(ue&&!ue.da&&ue.capture==v){const Ve=ue.listener,Ct=ue.ha||ue.src;ue.fa&&he(c.i,ue),P=Ve.call(Ct,w)!==!1&&P}}return P&&!w.defaultPrevented}function Yn(c,m){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:d.setTimeout(c,m||0)}function Ls(c){c.g=Yn(()=>{c.g=null,c.i&&(c.i=!1,Ls(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class Gt extends k{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Ls(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dt(c){k.call(this),this.h=c,this.g={}}S(Dt,k);var hn=[];function Pr(c){ce(c.g,function(m,v){this.g.hasOwnProperty(v)&&pi(m)},c),c.g={}}Dt.prototype.N=function(){Dt.Z.N.call(this),Pr(this)},Dt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ni=d.JSON.stringify,Go=d.JSON.parse,Ur=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function zr(){}function Zi(){}var fn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ot(){O.call(this,"d")}S(ot,O);function dn(){O.call(this,"c")}S(dn,O);var vt={},Ca=null;function gi(){return Ca=Ca||new Me}vt.Ia="serverreachability";function Ps(c){O.call(this,vt.Ia,c)}S(Ps,O);function mn(c){const m=gi();Ke(m,new Ps(m))}vt.STAT_EVENT="statevent";function Di(c,m){O.call(this,vt.STAT_EVENT,c),this.stat=m}S(Di,O);function wt(c){const m=gi();Ke(m,new Di(m,c))}vt.Ja="timingevent";function kn(c,m){O.call(this,vt.Ja,c),this.size=m}S(kn,O);function En(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},m)}function bn(){this.g=!0}bn.prototype.ua=function(){this.g=!1};function Ra(c,m,v,w,P,G){c.info(function(){if(c.g)if(G){var ue="",Ve=G.split("&");for(let tt=0;tt<Ve.length;tt++){var Ct=Ve[tt].split("=");if(Ct.length>1){const yt=Ct[0];Ct=Ct[1];const ii=yt.split("_");ue=ii.length>=2&&ii[1]=="type"?ue+(yt+"="+Ct+"&"):ue+(yt+"=redacted&")}}}else ue=null;else ue=G;return"XMLHTTP REQ ("+w+") [attempt "+P+"]: "+m+`
`+v+`
`+ue})}function Ia(c,m,v,w,P,G,ue){c.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+P+"]: "+m+`
`+v+`
`+G+" "+ue})}function Xn(c,m,v,w){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+Ko(c,v)+(w?" "+w:"")})}function es(c,m){c.info(function(){return"TIMEOUT: "+m})}bn.prototype.info=function(){};function Ko(c,m){if(!c.g)return m;if(!m)return null;try{const G=JSON.parse(m);if(G){for(c=0;c<G.length;c++)if(Array.isArray(G[c])){var v=G[c];if(!(v.length<2)){var w=v[1];if(Array.isArray(w)&&!(w.length<1)){var P=w[0];if(P!="noop"&&P!="stop"&&P!="close")for(let ue=1;ue<w.length;ue++)w[ue]=""}}}}return Ni(G)}catch{return m}}var ts={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Vn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ns;function is(){}S(is,zr),is.prototype.g=function(){return new XMLHttpRequest},ns=new is;function yi(c){return encodeURIComponent(String(c))}function Na(c){var m=1;c=c.split(":");const v=[];for(;m>0&&c.length;)v.push(c.shift()),m--;return c.length&&v.push(c.join(":")),v}function jn(c,m,v,w){this.j=c,this.i=m,this.l=v,this.S=w||1,this.V=new Dt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ln}function Ln(){this.i=null,this.g="",this.h=!1}var St={},Ot={};function $n(c,m,v){c.M=1,c.A=Ie(bt(m)),c.u=v,c.R=!0,Us(c,null)}function Us(c,m){c.F=Date.now(),Jn(c),c.B=bt(c.A);var v=c.B,w=c.S;Array.isArray(w)||(w=[String(w)]),ja(v.i,"t",w),c.C=0,v=c.j.L,c.h=new Ln,c.g=Ou(c.j,v?m:null,!c.u),c.P>0&&(c.O=new Gt(g(c.Y,c,c.g),c.P)),m=c.V,v=c.g,w=c.ba;var P="readystatechange";Array.isArray(P)||(P&&(hn[0]=P.toString()),P=hn);for(let G=0;G<P.length;G++){const ue=it(v,P[G],w||m.handleEvent,!1,m.h||m);if(!ue)break;m.g[ue.key]=ue}m=c.J?I(c.J):{},c.u?(c.v||(c.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,m)):(c.v="GET",c.g.ea(c.B,c.v,null,m)),mn(),Ra(c.i,c.v,c.B,c.l,c.S,c.u)}jn.prototype.ba=function(c){c=c.target;const m=this.O;m&&Ei(c)==3?m.j():this.Y(c)},jn.prototype.Y=function(c){try{if(c==this.g)e:{const Ve=Ei(this.g),Ct=this.g.ya(),tt=this.g.ca();if(!(Ve<3)&&(Ve!=3||this.g&&(this.h.h||this.g.la()||Xt(this.g)))){this.K||Ve!=4||Ct==7||(Ct==8||tt<=0?mn(3):mn(2)),Wn(this);var m=this.g.ca();this.X=m;var v=Da(this);if(this.o=m==200,Ia(this.i,this.v,this.B,this.l,this.S,Ve,m),this.o){if(this.U&&!this.L){t:{if(this.g){var w,P=this.g;if((w=P.g?P.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(w)){var G=w;break t}}G=null}if(c=G)Xn(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Pn(this,c);else{this.o=!1,this.m=3,wt(12),pn(this),Tn(this);break e}}if(this.R){c=!0;let yt;for(;!this.K&&this.C<v.length;)if(yt=Ma(this,v),yt==Ot){Ve==4&&(this.m=4,wt(14),c=!1),Xn(this.i,this.l,null,"[Incomplete Response]");break}else if(yt==St){this.m=4,wt(15),Xn(this.i,this.l,v,"[Invalid Chunk]"),c=!1;break}else Xn(this.i,this.l,yt,null),Pn(this,yt);if(Oa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ve!=4||v.length!=0||this.h.h||(this.m=1,wt(16),c=!1),this.o=this.o&&c,!c)Xn(this.i,this.l,v,"[Invalid Chunked Response]"),pn(this),Tn(this);else if(v.length>0&&!this.W){this.W=!0;var ue=this.j;ue.g==this&&ue.aa&&!ue.P&&(ue.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),tl(ue),ue.P=!0,wt(11))}}else Xn(this.i,this.l,v,null),Pn(this,v);Ve==4&&pn(this),this.o&&!this.K&&(Ve==4?Ru(this.j,this):(this.o=!1,Jn(this)))}else rs(this.g),m==400&&v.indexOf("Unknown SID")>0?(this.m=3,wt(12)):(this.m=0,wt(13)),pn(this),Tn(this)}}}catch{}finally{}};function Da(c){if(!Oa(c))return c.g.la();const m=Xt(c.g);if(m==="")return"";let v="";const w=m.length,P=Ei(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return pn(c),Tn(c),"";c.h.i=new d.TextDecoder}for(let G=0;G<w;G++)c.h.h=!0,v+=c.h.i.decode(m[G],{stream:!(P&&G==w-1)});return m.length=0,c.h.g+=v,c.C=0,c.h.g}function Oa(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Ma(c,m){var v=c.C,w=m.indexOf(`
`,v);return w==-1?Ot:(v=Number(m.substring(v,w)),isNaN(v)?St:(w+=1,w+v>m.length?Ot:(m=m.slice(w,w+v),c.C=w+v,m)))}jn.prototype.cancel=function(){this.K=!0,pn(this)};function Jn(c){c.T=Date.now()+c.H,zs(c,c.H)}function zs(c,m){if(c.D!=null)throw Error("WatchDog timer not null");c.D=En(g(c.aa,c),m)}function Wn(c){c.D&&(d.clearTimeout(c.D),c.D=null)}jn.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(es(this.i,this.B),this.M!=2&&(mn(),wt(17)),pn(this),this.m=2,Tn(this)):zs(this,this.T-c)};function Tn(c){c.j.I==0||c.K||Ru(c.j,c)}function pn(c){Wn(c);var m=c.O;m&&typeof m.dispose=="function"&&m.dispose(),c.O=null,Pr(c.V),c.g&&(m=c.g,c.g=null,m.abort(),m.dispose())}function Pn(c,m){try{var v=c.j;if(v.I!=0&&(v.g==c||ei(v.h,c))){if(!c.L&&ei(v.h,c)&&v.I==3){try{var w=v.Ba.g.parse(m)}catch{w=null}if(Array.isArray(w)&&w.length==3){var P=w;if(P[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<c.F)Ba(v),$s(v);else break e;Xr(v),wt(18)}}else v.xa=P[1],0<v.xa-v.K&&P[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=En(g(v.Va,v),6e3));Zn(v.h)<=1&&v.ta&&(v.ta=void 0)}else ji(v,11)}else if((c.L||v.g==c)&&Ba(v),!R(m))for(P=v.Ba.g.parse(m),m=0;m<P.length;m++){let tt=P[m];const yt=tt[0];if(!(yt<=v.K))if(v.K=yt,tt=tt[1],v.I==2)if(tt[0]=="c"){v.M=tt[1],v.ba=tt[2];const ii=tt[3];ii!=null&&(v.ka=ii,v.j.info("VER="+v.ka));const Li=tt[4];Li!=null&&(v.za=Li,v.j.info("SVER="+v.za));const bi=tt[5];bi!=null&&typeof bi=="number"&&bi>0&&(w=1.5*bi,v.O=w,v.j.info("backChannelRequestTimeoutMs_="+w)),w=v;const Ti=c.g;if(Ti){const $r=Ti.g?Ti.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($r){var G=w.h;G.g||$r.indexOf("spdy")==-1&&$r.indexOf("quic")==-1&&$r.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(qs(G,G.h),G.h=null))}if(w.G){const qa=Ti.g?Ti.g.getResponseHeader("X-HTTP-Session-Id"):null;qa&&(w.wa=qa,ae(w.J,w.G,qa))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-c.F,v.j.info("Handshake RTT: "+v.T+"ms")),w=v;var ue=c;if(w.na=Du(w,w.L?w.ba:null,w.W),ue.L){qr(w.h,ue);var Ve=ue,Ct=w.O;Ct&&(Ve.H=Ct),Ve.D&&(Wn(Ve),Jn(Ve)),w.g=ue}else xu(w);v.i.length>0&&Vi(v)}else tt[0]!="stop"&&tt[0]!="close"||ji(v,7);else v.I==3&&(tt[0]=="stop"||tt[0]=="close"?tt[0]=="stop"?ji(v,7):Zo(v):tt[0]!="noop"&&v.l&&v.l.qa(tt),v.A=0)}}mn(4)}catch{}}var Et=class{constructor(c,m){this.g=c,this.map=m}};function Bs(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Br(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Zn(c){return c.h?1:c.g?c.g.size:0}function ei(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function qs(c,m){c.g?c.g.add(m):c.h=m}function qr(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}Bs.prototype.cancel=function(){if(this.i=Hr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Hr(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const v of c.g.values())m=m.concat(v.G);return m}return V(c.i)}var ka=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Hs(c,m){if(c){c=c.split("&");for(let v=0;v<c.length;v++){const w=c[v].indexOf("=");let P,G=null;w>=0?(P=c[v].substring(0,w),G=c[v].substring(w+1)):P=c[v],m(P,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function sn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;c instanceof sn?(this.l=c.l,Mt(this,c.j),this.o=c.o,this.g=c.g,Z(this,c.u),this.h=c.h,oe(this,Su(c.i)),this.m=c.m):c&&(m=String(c).match(ka))?(this.l=!1,Mt(this,m[1]||"",!0),this.o=$e(m[2]||""),this.g=$e(m[3]||"",!0),Z(this,m[4]),this.h=$e(m[5]||"",!0),oe(this,m[6]||"",!0),this.m=$e(m[7]||"")):(this.l=!1,this.i=new Gs(null,this.l))}sn.prototype.toString=function(){const c=[];var m=this.j;m&&c.push(gn(m,Va,!0),":");var v=this.g;return(v||m=="file")&&(c.push("//"),(m=this.o)&&c.push(gn(m,Va,!0),"@"),c.push(yi(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&c.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(gn(v,v.charAt(0)=="/"?Qo:bu,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",gn(v,Tu)),c.join("")},sn.prototype.resolve=function(c){const m=bt(this);let v=!!c.j;v?Mt(m,c.j):v=!!c.o,v?m.o=c.o:v=!!c.g,v?m.g=c.g:v=c.u!=null;var w=c.h;if(v)Z(m,c.u);else if(v=!!c.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var P=m.h.lastIndexOf("/");P!=-1&&(w=m.h.slice(0,P+1)+w)}if(P=w,P==".."||P==".")w="";else if(P.indexOf("./")!=-1||P.indexOf("/.")!=-1){w=P.lastIndexOf("/",0)==0,P=P.split("/");const G=[];for(let ue=0;ue<P.length;){const Ve=P[ue++];Ve=="."?w&&ue==P.length&&G.push(""):Ve==".."?((G.length>1||G.length==1&&G[0]!="")&&G.pop(),w&&ue==P.length&&G.push("")):(G.push(Ve),w=!0)}w=G.join("/")}else w=P}return v?m.h=w:v=c.i.toString()!=="",v?oe(m,Su(c.i)):v=!!c.m,v&&(m.m=c.m),m};function bt(c){return new sn(c)}function Mt(c,m,v){c.j=v?$e(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function Z(c,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);c.u=m}else c.u=null}function oe(c,m,v){m instanceof Gs?(c.i=m,La(c.i,c.l)):(v||(m=gn(m,Fs)),c.i=new Gs(m,c.l))}function ae(c,m,v){c.i.set(m,v)}function Ie(c){return ae(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function $e(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function gn(c,m,v){return typeof c=="string"?(c=encodeURI(c).replace(m,rn),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function rn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Va=/[#\/\?@]/g,bu=/[#\?:]/g,Qo=/[#\?]/g,Fs=/[#\?@]/g,Tu=/#/g;function Gs(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function wn(c){c.g||(c.g=new Map,c.h=0,c.i&&Hs(c.i,function(m,v){c.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}s=Gs.prototype,s.add=function(c,m){wn(this),this.i=null,c=Ks(this,c);let v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(m),this.h+=1,this};function wu(c,m){wn(c),m=Ks(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function Yo(c,m){return wn(c),m=Ks(c,m),c.g.has(m)}s.forEach=function(c,m){wn(this),this.g.forEach(function(v,w){v.forEach(function(P){c.call(m,P,w,this)},this)},this)};function Xo(c,m){wn(c);let v=[];if(typeof m=="string")Yo(c,m)&&(v=v.concat(c.g.get(Ks(c,m))));else for(c=Array.from(c.g.values()),m=0;m<c.length;m++)v=v.concat(c[m]);return v}s.set=function(c,m){return wn(this),this.i=null,c=Ks(this,c),Yo(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},s.get=function(c,m){return c?(c=Xo(this,c),c.length>0?String(c[0]):m):m};function ja(c,m,v){wu(c,m),v.length>0&&(c.i=null,c.g.set(Ks(c,m),V(v)),c.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(let w=0;w<m.length;w++){var v=m[w];const P=yi(v);v=Xo(this,v);for(let G=0;G<v.length;G++){let ue=P;v[G]!==""&&(ue+="="+yi(v[G])),c.push(ue)}}return this.i=c.join("&")};function Su(c){const m=new Gs;return m.i=c.i,c.g&&(m.g=new Map(c.g),m.h=c.h),m}function Ks(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function La(c,m){m&&!c.j&&(wn(c),c.i=null,c.g.forEach(function(v,w){const P=w.toLowerCase();w!=P&&(wu(this,w),ja(this,P,v))},c)),c.j=m}function _i(c,m){const v=new bn;if(d.Image){const w=new Image;w.onload=T(ti,v,"TestLoadImage: loaded",!0,m,w),w.onerror=T(ti,v,"TestLoadImage: error",!1,m,w),w.onabort=T(ti,v,"TestLoadImage: abort",!1,m,w),w.ontimeout=T(ti,v,"TestLoadImage: timeout",!1,m,w),d.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=c}else m(!1)}function $o(c,m){const v=new bn,w=new AbortController,P=setTimeout(()=>{w.abort(),ti(v,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:w.signal}).then(G=>{clearTimeout(P),G.ok?ti(v,"TestPingServer: ok",!0,m):ti(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(P),ti(v,"TestPingServer: error",!1,m)})}function ti(c,m,v,w,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),w(v)}catch{}}function Qs(){this.g=new Ur}function Oi(c){this.i=c.Sb||null,this.h=c.ab||!1}S(Oi,zr),Oi.prototype.g=function(){return new Fr(this.i,this.h)};function Fr(c,m){Me.call(this),this.H=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}S(Fr,Me),s=Fr.prototype,s.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=m,this.readyState=1,vi(this)},s.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(m.body=c),(this.H||d).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ys(this)),this.readyState=0},s.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,vi(this)),this.g&&(this.readyState=3,vi(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Pa(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Pa(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}s.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?Ys(this):vi(this),this.readyState==3&&Pa(this)}},s.Oa=function(c){this.g&&(this.response=this.responseText=c,Ys(this))},s.Na=function(c){this.g&&(this.response=c,Ys(this))},s.ga=function(){this.g&&Ys(this)};function Ys(c){c.readyState=4,c.l=null,c.j=null,c.B=null,vi(c)}s.setRequestHeader=function(c,m){this.A.append(c,m)},s.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=m.next();return c.join(`\r
`)};function vi(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Fr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function ni(c){let m="";return ce(c,function(v,w){m+=w,m+=":",m+=v,m+=`\r
`}),m}function Gr(c,m,v){e:{for(w in v){var w=!1;break e}w=!0}w||(v=ni(v),typeof c=="string"?v!=null&&yi(v):ae(c,m,v))}function lt(c){Me.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}S(lt,Me);var Mi=/^https?$/i,Jo=["POST","PUT"];s=lt.prototype,s.Fa=function(c){this.H=c},s.ea=function(c,m,v,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ns.g(),this.g.onreadystatechange=D(g(this.Ca,this));try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(G){Kr(this,G);return}if(c=v||"",v=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var P in w)v.set(P,w[P]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const G of w.keys())v.set(G,w.get(G));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(v.keys()).find(G=>G.toLowerCase()=="content-type"),P=d.FormData&&c instanceof d.FormData,!(Array.prototype.indexOf.call(Jo,m,void 0)>=0)||w||P||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,ue]of v)this.g.setRequestHeader(G,ue);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(G){Kr(this,G)}};function Kr(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.o=5,Wo(c),ss(c)}function Wo(c){c.A||(c.A=!0,Ke(c,"complete"),Ke(c,"error"))}s.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Ke(this,"complete"),Ke(this,"abort"),ss(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ss(this,!0)),lt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Qr(this):this.Xa())},s.Xa=function(){Qr(this)};function Qr(c){if(c.h&&typeof u<"u"){if(c.v&&Ei(c)==4)setTimeout(c.Ca.bind(c),0);else if(Ke(c,"readystatechange"),Ei(c)==4){c.h=!1;try{const G=c.ca();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var w;if(w=G===0){let ue=String(c.D).match(ka)[1]||null;!ue&&d.self&&d.self.location&&(ue=d.self.location.protocol.slice(0,-1)),w=!Mi.test(ue?ue.toLowerCase():"")}v=w}if(v)Ke(c,"complete"),Ke(c,"success");else{c.o=6;try{var P=Ei(c)>2?c.g.statusText:""}catch{P=""}c.l=P+" ["+c.ca()+"]",Wo(c)}}finally{ss(c)}}}}function ss(c,m){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const v=c.g;c.g=null,m||Ke(c,"ready");try{v.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Ei(c){return c.g?c.g.readyState:0}s.ca=function(){try{return Ei(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),Go(m)}};function Xt(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function rs(c){const m={};c=(c.g&&Ei(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<c.length;w++){if(R(c[w]))continue;var v=Na(c[w]);const P=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const G=m[P]||[];m[P]=G,G.push(v)}Ce(m,function(w){return w.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ki(c,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||m}function Xs(c){this.za=0,this.i=[],this.j=new bn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ki("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ki("baseRetryDelayMs",5e3,c),this.Za=ki("retryDelaySeedMs",1e4,c),this.Ta=ki("forwardChannelMaxRetries",2,c),this.va=ki("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Bs(c&&c.concurrentRequestLimit),this.Ba=new Qs,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Xs.prototype,s.ka=8,s.I=1,s.connect=function(c,m,v,w){wt(0),this.W=c,this.H=m||{},v&&w!==void 0&&(this.H.OSID=v,this.H.OAID=w),this.F=this.X,this.J=Du(this,null,this.W),Vi(this)};function Zo(c){if(Ua(c),c.I==3){var m=c.V++,v=bt(c.J);if(ae(v,"SID",c.M),ae(v,"RID",m),ae(v,"TYPE","terminate"),Yr(c,v),m=new jn(c,c.j,m),m.M=2,m.A=Ie(bt(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(m.A.toString(),"")}catch{}!v&&d.Image&&(new Image().src=m.A,v=!0),v||(m.g=Ou(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Jn(m)}Nu(c)}function $s(c){c.g&&(tl(c),c.g.cancel(),c.g=null)}function Ua(c){$s(c),c.v&&(d.clearTimeout(c.v),c.v=null),Ba(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&d.clearTimeout(c.m),c.m=null)}function Vi(c){if(!Br(c.h)&&!c.m){c.m=!0;var m=c.Ea;Ee||A(),we||(Ee(),we=!0),C.add(m,c),c.D=0}}function za(c,m){return Zn(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=m.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=En(g(c.Ea,c,m),Iu(c,c.D)),c.D++,!0)}s.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const P=new jn(this,this.j,c);let G=this.o;if(this.U&&(G?(G=I(G),re(G,this.U)):G=this.U),this.u!==null||this.R||(P.J=G,G=null),this.S)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var w=this.i[v];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(m+=w,m>4096){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=Au(this,P,m),v=bt(this.J),ae(v,"RID",c),ae(v,"CVER",22),this.G&&ae(v,"X-HTTP-Session-Id",this.G),Yr(this,v),G&&(this.R?m="headers="+yi(ni(G))+"&"+m:this.u&&Gr(v,this.u,G)),qs(this.h,P),this.Ra&&ae(v,"TYPE","init"),this.S?(ae(v,"$req",m),ae(v,"SID","null"),P.U=!0,$n(P,v,null)):$n(P,v,m),this.I=2}}else this.I==3&&(c?el(this,c):this.i.length==0||Br(this.h)||el(this))};function el(c,m){var v;m?v=m.l:v=c.V++;const w=bt(c.J);ae(w,"SID",c.M),ae(w,"RID",v),ae(w,"AID",c.K),Yr(c,w),c.u&&c.o&&Gr(w,c.u,c.o),v=new jn(c,c.j,v,c.D+1),c.u===null&&(v.J=c.o),m&&(c.i=m.G.concat(c.i)),m=Au(c,v,1e3),v.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),qs(c.h,v),$n(v,w,m)}function Yr(c,m){c.H&&ce(c.H,function(v,w){ae(m,w,v)}),c.l&&ce({},function(v,w){ae(m,w,v)})}function Au(c,m,v){v=Math.min(c.i.length,v);const w=c.l?g(c.l.Ka,c.l,c):null;e:{var P=c.i;let Ve=-1;for(;;){const Ct=["count="+v];Ve==-1?v>0?(Ve=P[0].g,Ct.push("ofs="+Ve)):Ve=0:Ct.push("ofs="+Ve);let tt=!0;for(let yt=0;yt<v;yt++){var G=P[yt].g;const ii=P[yt].map;if(G-=Ve,G<0)Ve=Math.max(0,P[yt].g-100),tt=!1;else try{G="req"+G+"_"||"";try{var ue=ii instanceof Map?ii:Object.entries(ii);for(const[Li,bi]of ue){let Ti=bi;p(bi)&&(Ti=Ni(bi)),Ct.push(G+Li+"="+encodeURIComponent(Ti))}}catch(Li){throw Ct.push(G+"type="+encodeURIComponent("_badmap")),Li}}catch{w&&w(ii)}}if(tt){ue=Ct.join("&");break e}}ue=void 0}return c=c.i.splice(0,v),m.G=c,ue}function xu(c){if(!c.g&&!c.v){c.Y=1;var m=c.Da;Ee||A(),we||(Ee(),we=!0),C.add(m,c),c.A=0}}function Xr(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=En(g(c.Da,c),Iu(c,c.A)),c.A++,!0)}s.Da=function(){if(this.v=null,Cu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=En(g(this.Wa,this),c)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,wt(10),$s(this),Cu(this))};function tl(c){c.B!=null&&(d.clearTimeout(c.B),c.B=null)}function Cu(c){c.g=new jn(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var m=bt(c.na);ae(m,"RID","rpc"),ae(m,"SID",c.M),ae(m,"AID",c.K),ae(m,"CI",c.F?"0":"1"),!c.F&&c.ia&&ae(m,"TO",c.ia),ae(m,"TYPE","xmlhttp"),Yr(c,m),c.u&&c.o&&Gr(m,c.u,c.o),c.O&&(c.g.H=c.O);var v=c.g;c=c.ba,v.M=1,v.A=Ie(bt(m)),v.u=null,v.R=!0,Us(v,c)}s.Va=function(){this.C!=null&&(this.C=null,$s(this),Xr(this),wt(19))};function Ba(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function Ru(c,m){var v=null;if(c.g==m){Ba(c),tl(c),c.g=null;var w=2}else if(ei(c.h,m))v=m.G,qr(c.h,m),w=1;else return;if(c.I!=0){if(m.o)if(w==1){v=m.u?m.u.length:0,m=Date.now()-m.F;var P=c.D;w=gi(),Ke(w,new kn(w,v)),Vi(c)}else xu(c);else if(P=m.m,P==3||P==0&&m.X>0||!(w==1&&za(c,m)||w==2&&Xr(c)))switch(v&&v.length>0&&(m=c.h,m.i=m.i.concat(v)),P){case 1:ji(c,5);break;case 4:ji(c,10);break;case 3:ji(c,6);break;default:ji(c,2)}}}function Iu(c,m){let v=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(v*=2),v*m}function ji(c,m){if(c.j.info("Error code "+m),m==2){var v=g(c.bb,c),w=c.Ua;const P=!w;w=new sn(w||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Mt(w,"https"),Ie(w),P?_i(w.toString(),v):$o(w.toString(),v)}else wt(2);c.I=0,c.l&&c.l.pa(m),Nu(c),Ua(c)}s.bb=function(c){c?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function Nu(c){if(c.I=0,c.ja=[],c.l){const m=Hr(c.h);(m.length!=0||c.i.length!=0)&&(q(c.ja,m),q(c.ja,c.i),c.h.i.length=0,V(c.i),c.i.length=0),c.l.oa()}}function Du(c,m,v){var w=v instanceof sn?bt(v):new sn(v);if(w.g!="")m&&(w.g=m+"."+w.g),Z(w,w.u);else{var P=d.location;w=P.protocol,m=m?m+"."+P.hostname:P.hostname,P=+P.port;const G=new sn(null);w&&Mt(G,w),m&&(G.g=m),P&&Z(G,P),v&&(G.h=v),w=G}return v=c.G,m=c.wa,v&&m&&ae(w,v,m),ae(w,"VER",c.ka),Yr(c,w),w}function Ou(c,m,v){if(m&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Aa&&!c.ma?new lt(new Oi({ab:v})):new lt(c.ma),m.Fa(c.L),m}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mu(){}s=Mu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Js(){}Js.prototype.g=function(c,m){return new yn(c,m)};function yn(c,m){Me.call(this),this.g=new Xs(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(c?c["X-WebChannel-Client-Profile"]=m.sa:c={"X-WebChannel-Client-Profile":m.sa}),this.g.U=c,(c=m&&m.Qb)&&!R(c)&&(this.g.u=c),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!R(m)&&(this.g.G=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new as(this)}S(yn,Me),yn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){Zo(this.g)},yn.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.v&&(v={},v.__data__=Ni(c),c=v);m.i.push(new Et(m.Ya++,c)),m.I==3&&Vi(m)},yn.prototype.N=function(){this.g.l=null,delete this.j,Zo(this.g),delete this.g,yn.Z.N.call(this)};function ku(c){ot.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const v in m){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}S(ku,ot);function Vu(){dn.call(this),this.status=1}S(Vu,dn);function as(c){this.g=c}S(as,Mu),as.prototype.ra=function(){Ke(this.g,"a")},as.prototype.qa=function(c){Ke(this.g,new ku(c))},as.prototype.pa=function(c){Ke(this.g,new Vu)},as.prototype.oa=function(){Ke(this.g,"b")},Js.prototype.createWebChannel=Js.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,Y1=function(){return new Js},Q1=function(){return gi()},K1=vt,pm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ts.NO_ERROR=0,ts.TIMEOUT=8,ts.HTTP_ERROR=6,$c=ts,Vn.COMPLETE="complete",G1=Vn,Zi.EventType=fn,fn.OPEN="a",fn.CLOSE="b",fn.ERROR="c",fn.MESSAGE="d",Me.prototype.listen=Me.prototype.J,Fl=Zi,lt.prototype.listenOnce=lt.prototype.K,lt.prototype.getLastError=lt.prototype.Ha,lt.prototype.getLastErrorCode=lt.prototype.ya,lt.prototype.getStatus=lt.prototype.ca,lt.prototype.getResponseJson=lt.prototype.La,lt.prototype.getResponseText=lt.prototype.la,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Fa,F1=lt}).apply(typeof zc<"u"?zc:typeof self<"u"?self:typeof window<"u"?window:{});const k_="@firebase/firestore",V_="4.9.3";class ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");let Bo="12.7.0";const va=new Mm("@firebase/firestore");function vo(){return va.logLevel}function de(s,...e){if(va.logLevel<=He.DEBUG){const n=e.map(Km);va.debug(`Firestore (${Bo}): ${s}`,...n)}}function Ms(s,...e){if(va.logLevel<=He.ERROR){const n=e.map(Km);va.error(`Firestore (${Bo}): ${s}`,...n)}}function Oo(s,...e){if(va.logLevel<=He.WARN){const n=e.map(Km);va.warn(`Firestore (${Bo}): ${s}`,...n)}}function Km(s){if(typeof s=="string")return s;try{return(function(n){return JSON.stringify(n)})(s)}catch{return s}}function xe(s,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,X1(s,r,n)}function X1(s,e,n){let r=`FIRESTORE (${Bo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ms(r),new Error(r)}function st(s,e,n,r){let l="Unexpected state";typeof n=="string"?l=n:r=n,s||X1(e,l,r)}function De(s,e){return s}const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends Vs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Is{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class $1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(ln.UNAUTHENTICATED)))}shutdown(){}}class ux{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class cx{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){st(this.o===void 0,42304);let r=this.i;const l=y=>this.i!==r?(r=this.i,n(y)):Promise.resolve();let u=new Is;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Is,e.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const y=u;e.enqueueRetryable((async()=>{await y.promise,await l(this.currentUser)}))},p=y=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((y=>p(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Is)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(st(typeof r.accessToken=="string",31837,{l:r}),new $1(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return st(e===null||typeof e=="string",2055,{h:e}),new ln(e)}}class hx{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class fx{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new hx(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(ln.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class j_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dx{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Kn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){st(this.o===void 0,3512);const r=u=>{u.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,de("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>r(u)))};const l=u=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new j_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(st(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new j_(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function mx(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<s;r++)n[r]=Math.floor(256*Math.random());return n}class Qm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const l=mx(40);for(let u=0;u<l.length;++u)r.length<20&&l[u]<n&&(r+=e.charAt(l[u]%62))}return r}}function Fe(s,e){return s<e?-1:s>e?1:0}function gm(s,e){const n=Math.min(s.length,e.length);for(let r=0;r<n;r++){const l=s.charAt(r),u=e.charAt(r);if(l!==u)return Zd(l)===Zd(u)?Fe(l,u):Zd(l)?1:-1}return Fe(s.length,e.length)}const px=55296,gx=57343;function Zd(s){const e=s.charCodeAt(0);return e>=px&&e<=gx}function Mo(s,e,n){return s.length===e.length&&s.every(((r,l)=>n(r,e[l])))}const L_="__name__";class Hi{constructor(e,n,r){n===void 0?n=0:n>e.length&&xe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&xe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Hi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Hi?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let l=0;l<r;l++){const u=Hi.compareSegments(e.get(l),n.get(l));if(u!==0)return u}return Fe(e.length,n.length)}static compareSegments(e,n){const r=Hi.isNumericId(e),l=Hi.isNumericId(n);return r&&!l?-1:!r&&l?1:r&&l?Hi.extractNumericId(e).compare(Hi.extractNumericId(n)):gm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Cr.fromString(e.substring(4,e.length-2))}}class pt extends Hi{construct(e,n,r){return new pt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ye(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((l=>l.length>0)))}return new pt(n)}static emptyPath(){return new pt([])}}const yx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends Hi{construct(e,n,r){return new tn(e,n,r)}static isValidIdentifier(e){return yx.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===L_}static keyField(){return new tn([L_])}static fromServerFormat(e){const n=[];let r="",l=0;const u=()=>{if(r.length===0)throw new ye(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let d=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new ye(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[l+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new ye(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,l+=2}else p==="`"?(d=!d,l++):p!=="."||d?(r+=p,l++):(u(),l++)}if(u(),d)throw new ye(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tn(n)}static emptyPath(){return new tn([])}}class Te{constructor(e){this.path=e}static fromPath(e){return new Te(pt.fromString(e))}static fromName(e){return new Te(pt.fromString(e).popFirst(5))}static empty(){return new Te(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return pt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new pt(e.slice()))}}function J1(s,e,n){if(!n)throw new ye(ne.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function _x(s,e,n,r){if(e===!0&&r===!0)throw new ye(ne.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function P_(s){if(!Te.isDocumentKey(s))throw new ye(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function U_(s){if(Te.isDocumentKey(s))throw new ye(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function W1(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Ym(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":xe(12329,{type:typeof s})}function Ea(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ye(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ym(s);throw new ye(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}function Ut(s,e){const n={typeString:s};return e&&(n.value=e),n}function gu(s,e){if(!W1(s))throw new ye(ne.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const l=e[r].typeString,u="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){n=`JSON missing required field: '${r}'`;break}const d=s[r];if(l&&typeof d!==l){n=`JSON field '${r}' must be a ${l}.`;break}if(u!==void 0&&d!==u.value){n=`Expected '${r}' field to equal '${u.value}'`;break}}if(n)throw new ye(ne.INVALID_ARGUMENT,n);return!0}const z_=-62135596800,B_=1e6;class gt{static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*B_);return new gt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ye(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ye(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<z_)throw new ye(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/B_}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(gu(e,gt._jsonSchema))return new gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-z_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}gt._jsonSchemaVersion="firestore/timestamp/1.0",gt._jsonSchema={type:Ut("string",gt._jsonSchemaVersion),seconds:Ut("number"),nanoseconds:Ut("number")};class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new gt(0,0))}static max(){return new Re(new gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const nu=-1;function vx(s,e){const n=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,l=Re.fromTimestamp(r===1e9?new gt(n+1,0):new gt(n,r));return new Nr(l,Te.empty(),e)}function Ex(s){return new Nr(s.readTime,s.key,nu)}class Nr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Nr(Re.min(),Te.empty(),nu)}static max(){return new Nr(Re.max(),Te.empty(),nu)}}function bx(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=Te.comparator(s.documentKey,e.documentKey),n!==0?n:Fe(s.largestBatchId,e.largestBatchId))}const Tx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function qo(s){if(s.code!==ne.FAILED_PRECONDITION||s.message!==Tx)throw s;de("LocalStore","Unexpectedly lost primary lease")}class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ee(((r,l)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,l)},this.catchCallback=u=>{this.wrapFailure(n,u).next(r,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ee?n:ee.resolve(n)}catch(n){return ee.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ee.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ee.reject(n)}static resolve(e){return new ee(((n,r)=>{n(e)}))}static reject(e){return new ee(((n,r)=>{r(e)}))}static waitFor(e){return new ee(((n,r)=>{let l=0,u=0,d=!1;e.forEach((p=>{++l,p.next((()=>{++u,d&&u===l&&n()}),(y=>r(y)))})),d=!0,u===l&&n()}))}static or(e){let n=ee.resolve(!1);for(const r of e)n=n.next((l=>l?ee.resolve(l):r()));return n}static forEach(e,n){const r=[];return e.forEach(((l,u)=>{r.push(n.call(this,l,u))})),this.waitFor(r)}static mapArray(e,n){return new ee(((r,l)=>{const u=e.length,d=new Array(u);let p=0;for(let y=0;y<u;y++){const g=y;n(e[g]).next((T=>{d[g]=T,++p,p===u&&r(d)}),(T=>l(T)))}}))}static doWhile(e,n){return new ee(((r,l)=>{const u=()=>{e()===!0?n().next((()=>{u()}),l):r()};u()}))}}function Sx(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ho(s){return s.name==="IndexedDbTransactionError"}class Ih{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ih.ce=-1;const Xm=-1;function Nh(s){return s==null}function uh(s){return s===0&&1/s==-1/0}function Ax(s){return typeof s=="number"&&Number.isInteger(s)&&!uh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const Z1="";function xx(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=q_(e)),e=Cx(s.get(n),e);return q_(e)}function Cx(s,e){let n=e;const r=s.length;for(let l=0;l<r;l++){const u=s.charAt(l);switch(u){case"\0":n+="";break;case Z1:n+="";break;default:n+=u}}return n}function q_(s){return s+Z1+""}function H_(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function wa(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function eE(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class Tt{constructor(e,n){this.comparator=e,this.root=n||en.EMPTY}insert(e,n){return new Tt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,en.BLACK,null,null))}remove(e){return new Tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,en.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const l=this.comparator(e,r.key);if(l===0)return n+r.left.size;l<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bc(this.root,e,this.comparator,!0)}}class Bc{constructor(e,n,r,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?r(e.key,n):1,n&&l&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class en{constructor(e,n,r,l,u){this.key=e,this.value=n,this.color=r??en.RED,this.left=l??en.EMPTY,this.right=u??en.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,l,u){return new en(e??this.key,n??this.value,r??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let l=this;const u=r(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,n,r),null):u===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,r)),l.fixUp()}removeMin(){if(this.left.isEmpty())return en.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return en.EMPTY;r=l.right.min(),l=l.copy(r.key,r.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xe(27949);return e+(this.isRed()?0:1)}}en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw xe(57766)}get value(){throw xe(16141)}get color(){throw xe(16727)}get left(){throw xe(29726)}get right(){throw xe(36894)}copy(e,n,r,l,u){return this}insert(e,n,r){return new en(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ft{constructor(e){this.comparator=e,this.data=new Tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const l=r.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new F_(this.data.getIterator())}getIteratorFrom(e){return new F_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=r.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ft(this.comparator);return n.data=e,n}}class F_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ci{constructor(e){this.fields=e,e.sort(tn.comparator)}static empty(){return new Ci([])}unionWith(e){let n=new Ft(tn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ci(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Mo(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class tE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new tE("Invalid base64 string: "+u):u}})(e);return new nn(n)}static fromUint8Array(e){const n=(function(l){let u="";for(let d=0;d<l.length;++d)u+=String.fromCharCode(l[d]);return u})(e);return new nn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let l=0;l<n.length;l++)r[l]=n.charCodeAt(l);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const Rx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dr(s){if(st(!!s,39018),typeof s=="string"){let e=0;const n=Rx.exec(s);if(st(!!n,46558,{timestamp:s}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Nt(s.seconds),nanos:Nt(s.nanos)}}function Nt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Or(s){return typeof s=="string"?nn.fromBase64String(s):nn.fromUint8Array(s)}const nE="server_timestamp",iE="__type__",sE="__previous_value__",rE="__local_write_time__";function $m(s){return(s?.mapValue?.fields||{})[iE]?.stringValue===nE}function Dh(s){const e=s.mapValue.fields[sE];return $m(e)?Dh(e):e}function iu(s){const e=Dr(s.mapValue.fields[rE].timestampValue);return new gt(e.seconds,e.nanos)}class Ix{constructor(e,n,r,l,u,d,p,y,g,T){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=l,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=y,this.useFetchStreams=g,this.isUsingEmulator=T}}const ch="(default)";class su{constructor(e,n){this.projectId=e,this.database=n||ch}static empty(){return new su("","")}get isDefaultDatabase(){return this.database===ch}isEqual(e){return e instanceof su&&e.projectId===this.projectId&&e.database===this.database}}const aE="__type__",Nx="__max__",qc={mapValue:{}},oE="__vector__",hh="value";function Mr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?$m(s)?4:Ox(s)?9007199254740991:Dx(s)?10:11:xe(28295,{value:s})}function Ji(s,e){if(s===e)return!0;const n=Mr(s);if(n!==Mr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return iu(s).isEqual(iu(e));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const d=Dr(l.timestampValue),p=Dr(u.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(l,u){return Or(l.bytesValue).isEqual(Or(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(l,u){return Nt(l.geoPointValue.latitude)===Nt(u.geoPointValue.latitude)&&Nt(l.geoPointValue.longitude)===Nt(u.geoPointValue.longitude)})(s,e);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return Nt(l.integerValue)===Nt(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const d=Nt(l.doubleValue),p=Nt(u.doubleValue);return d===p?uh(d)===uh(p):isNaN(d)&&isNaN(p)}return!1})(s,e);case 9:return Mo(s.arrayValue.values||[],e.arrayValue.values||[],Ji);case 10:case 11:return(function(l,u){const d=l.mapValue.fields||{},p=u.mapValue.fields||{};if(H_(d)!==H_(p))return!1;for(const y in d)if(d.hasOwnProperty(y)&&(p[y]===void 0||!Ji(d[y],p[y])))return!1;return!0})(s,e);default:return xe(52216,{left:s})}}function ru(s,e){return(s.values||[]).find((n=>Ji(n,e)))!==void 0}function ko(s,e){if(s===e)return 0;const n=Mr(s),r=Mr(e);if(n!==r)return Fe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Fe(s.booleanValue,e.booleanValue);case 2:return(function(u,d){const p=Nt(u.integerValue||u.doubleValue),y=Nt(d.integerValue||d.doubleValue);return p<y?-1:p>y?1:p===y?0:isNaN(p)?isNaN(y)?0:-1:1})(s,e);case 3:return G_(s.timestampValue,e.timestampValue);case 4:return G_(iu(s),iu(e));case 5:return gm(s.stringValue,e.stringValue);case 6:return(function(u,d){const p=Or(u),y=Or(d);return p.compareTo(y)})(s.bytesValue,e.bytesValue);case 7:return(function(u,d){const p=u.split("/"),y=d.split("/");for(let g=0;g<p.length&&g<y.length;g++){const T=Fe(p[g],y[g]);if(T!==0)return T}return Fe(p.length,y.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,d){const p=Fe(Nt(u.latitude),Nt(d.latitude));return p!==0?p:Fe(Nt(u.longitude),Nt(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return K_(s.arrayValue,e.arrayValue);case 10:return(function(u,d){const p=u.fields||{},y=d.fields||{},g=p[hh]?.arrayValue,T=y[hh]?.arrayValue,S=Fe(g?.values?.length||0,T?.values?.length||0);return S!==0?S:K_(g,T)})(s.mapValue,e.mapValue);case 11:return(function(u,d){if(u===qc.mapValue&&d===qc.mapValue)return 0;if(u===qc.mapValue)return 1;if(d===qc.mapValue)return-1;const p=u.fields||{},y=Object.keys(p),g=d.fields||{},T=Object.keys(g);y.sort(),T.sort();for(let S=0;S<y.length&&S<T.length;++S){const D=gm(y[S],T[S]);if(D!==0)return D;const V=ko(p[y[S]],g[T[S]]);if(V!==0)return V}return Fe(y.length,T.length)})(s.mapValue,e.mapValue);default:throw xe(23264,{he:n})}}function G_(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Fe(s,e);const n=Dr(s),r=Dr(e),l=Fe(n.seconds,r.seconds);return l!==0?l:Fe(n.nanos,r.nanos)}function K_(s,e){const n=s.values||[],r=e.values||[];for(let l=0;l<n.length&&l<r.length;++l){const u=ko(n[l],r[l]);if(u)return u}return Fe(n.length,r.length)}function Vo(s){return ym(s)}function ym(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const r=Dr(n);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return Or(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return Te.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let r="[",l=!0;for(const u of n.values||[])l?l=!1:r+=",",r+=ym(u);return r+"]"})(s.arrayValue):"mapValue"in s?(function(n){const r=Object.keys(n.fields||{}).sort();let l="{",u=!0;for(const d of r)u?u=!1:l+=",",l+=`${d}:${ym(n.fields[d])}`;return l+"}"})(s.mapValue):xe(61005,{value:s})}function Jc(s){switch(Mr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Dh(s);return e?16+Jc(e):16;case 5:return 2*s.stringValue.length;case 6:return Or(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((l,u)=>l+Jc(u)),0)})(s.arrayValue);case 10:case 11:return(function(r){let l=0;return wa(r.fields,((u,d)=>{l+=u.length+Jc(d)})),l})(s.mapValue);default:throw xe(13486,{value:s})}}function _m(s){return!!s&&"integerValue"in s}function Jm(s){return!!s&&"arrayValue"in s}function Q_(s){return!!s&&"nullValue"in s}function Y_(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Wc(s){return!!s&&"mapValue"in s}function Dx(s){return(s?.mapValue?.fields||{})[aE]?.stringValue===oE}function $l(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return wa(s.mapValue.fields,((n,r)=>e.mapValue.fields[n]=$l(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$l(s.arrayValue.values[n]);return e}return{...s}}function Ox(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===Nx}class fi{constructor(e){this.value=e}static empty(){return new fi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Wc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$l(n)}setAll(e){let n=tn.emptyPath(),r={},l=[];e.forEach(((d,p)=>{if(!n.isImmediateParentOf(p)){const y=this.getFieldsMap(n);this.applyChanges(y,r,l),r={},l=[],n=p.popLast()}d?r[p.lastSegment()]=$l(d):l.push(p.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,r,l)}delete(e){const n=this.field(e.popLast());Wc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ji(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let l=n.mapValue.fields[e.get(r)];Wc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,r){wa(n,((l,u)=>e[l]=u));for(const l of r)delete e[l]}clone(){return new fi($l(this.value))}}function lE(s){const e=[];return wa(s.fields,((n,r)=>{const l=new tn([n]);if(Wc(r)){const u=lE(r.mapValue).fields;if(u.length===0)e.push(l);else for(const d of u)e.push(l.child(d))}else e.push(l)})),new Ci(e)}class un{constructor(e,n,r,l,u,d,p){this.key=e,this.documentType=n,this.version=r,this.readTime=l,this.createTime=u,this.data=d,this.documentState=p}static newInvalidDocument(e){return new un(e,0,Re.min(),Re.min(),Re.min(),fi.empty(),0)}static newFoundDocument(e,n,r,l){return new un(e,1,n,Re.min(),r,l,0)}static newNoDocument(e,n){return new un(e,2,n,Re.min(),Re.min(),fi.empty(),0)}static newUnknownDocument(e,n){return new un(e,3,n,Re.min(),Re.min(),fi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class fh{constructor(e,n){this.position=e,this.inclusive=n}}function X_(s,e,n){let r=0;for(let l=0;l<s.position.length;l++){const u=e[l],d=s.position[l];if(u.field.isKeyField()?r=Te.comparator(Te.fromName(d.referenceValue),n.key):r=ko(d,n.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function $_(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!Ji(s.position[n],e.position[n]))return!1;return!0}class dh{constructor(e,n="asc"){this.field=e,this.dir=n}}function Mx(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class uE{}class qt extends uE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Vx(e,n,r):n==="array-contains"?new Px(e,r):n==="in"?new Ux(e,r):n==="not-in"?new zx(e,r):n==="array-contains-any"?new Bx(e,r):new qt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new jx(e,r):new Lx(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ko(n,this.value)):n!==null&&Mr(this.value)===Mr(n)&&this.matchesComparison(ko(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wi extends uE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Wi(e,n)}matches(e){return cE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function cE(s){return s.op==="and"}function hE(s){return kx(s)&&cE(s)}function kx(s){for(const e of s.filters)if(e instanceof Wi)return!1;return!0}function vm(s){if(s instanceof qt)return s.field.canonicalString()+s.op.toString()+Vo(s.value);if(hE(s))return s.filters.map((e=>vm(e))).join(",");{const e=s.filters.map((n=>vm(n))).join(",");return`${s.op}(${e})`}}function fE(s,e){return s instanceof qt?(function(r,l){return l instanceof qt&&r.op===l.op&&r.field.isEqual(l.field)&&Ji(r.value,l.value)})(s,e):s instanceof Wi?(function(r,l){return l instanceof Wi&&r.op===l.op&&r.filters.length===l.filters.length?r.filters.reduce(((u,d,p)=>u&&fE(d,l.filters[p])),!0):!1})(s,e):void xe(19439)}function dE(s){return s instanceof qt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Vo(n.value)}`})(s):s instanceof Wi?(function(n){return n.op.toString()+" {"+n.getFilters().map(dE).join(" ,")+"}"})(s):"Filter"}class Vx extends qt{constructor(e,n,r){super(e,n,r),this.key=Te.fromName(r.referenceValue)}matches(e){const n=Te.comparator(e.key,this.key);return this.matchesComparison(n)}}class jx extends qt{constructor(e,n){super(e,"in",n),this.keys=mE("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Lx extends qt{constructor(e,n){super(e,"not-in",n),this.keys=mE("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function mE(s,e){return(e.arrayValue?.values||[]).map((n=>Te.fromName(n.referenceValue)))}class Px extends qt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Jm(n)&&ru(n.arrayValue,this.value)}}class Ux extends qt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ru(this.value.arrayValue,n)}}class zx extends qt{constructor(e,n){super(e,"not-in",n)}matches(e){if(ru(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ru(this.value.arrayValue,n)}}class Bx extends qt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Jm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>ru(this.value.arrayValue,r)))}}class qx{constructor(e,n=null,r=[],l=[],u=null,d=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=l,this.limit=u,this.startAt=d,this.endAt=p,this.Te=null}}function J_(s,e=null,n=[],r=[],l=null,u=null,d=null){return new qx(s,e,n,r,l,u,d)}function Wm(s){const e=De(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>vm(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),Nh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Vo(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Vo(r))).join(",")),e.Te=n}return e.Te}function Zm(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!Mx(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!fE(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!$_(s.startAt,e.startAt)&&$_(s.endAt,e.endAt)}function Em(s){return Te.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class Oh{constructor(e,n=null,r=[],l=[],u=null,d="F",p=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=l,this.limit=u,this.limitType=d,this.startAt=p,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Hx(s,e,n,r,l,u,d,p){return new Oh(s,e,n,r,l,u,d,p)}function ep(s){return new Oh(s)}function W_(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Fx(s){return s.collectionGroup!==null}function Jl(s){const e=De(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new Ft(tn.comparator);return d.filters.forEach((y=>{y.getFlattenedFilters().forEach((g=>{g.isInequality()&&(p=p.add(g.field))}))})),p})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new dh(u,r))})),n.has(tn.keyField().canonicalString())||e.Ie.push(new dh(tn.keyField(),r))}return e.Ie}function Qi(s){const e=De(s);return e.Ee||(e.Ee=Gx(e,Jl(s))),e.Ee}function Gx(s,e){if(s.limitType==="F")return J_(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new dh(l.field,u)}));const n=s.endAt?new fh(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new fh(s.startAt.position,s.startAt.inclusive):null;return J_(s.path,s.collectionGroup,e,s.filters,s.limit,n,r)}}function bm(s,e,n){return new Oh(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Mh(s,e){return Zm(Qi(s),Qi(e))&&s.limitType===e.limitType}function pE(s){return`${Wm(Qi(s))}|lt:${s.limitType}`}function Eo(s){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((l=>dE(l))).join(", ")}]`),Nh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((l=>Vo(l))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((l=>Vo(l))).join(",")),`Target(${r})`})(Qi(s))}; limitType=${s.limitType})`}function kh(s,e){return e.isFoundDocument()&&(function(r,l){const u=l.key.path;return r.collectionGroup!==null?l.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):Te.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(s,e)&&(function(r,l){for(const u of Jl(r))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(r,l){for(const u of r.filters)if(!u.matches(l))return!1;return!0})(s,e)&&(function(r,l){return!(r.startAt&&!(function(d,p,y){const g=X_(d,p,y);return d.inclusive?g<=0:g<0})(r.startAt,Jl(r),l)||r.endAt&&!(function(d,p,y){const g=X_(d,p,y);return d.inclusive?g>=0:g>0})(r.endAt,Jl(r),l))})(s,e)}function Kx(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function gE(s){return(e,n)=>{let r=!1;for(const l of Jl(s)){const u=Qx(l,e,n);if(u!==0)return u;r=r||l.field.isKeyField()}return 0}}function Qx(s,e,n){const r=s.field.isKeyField()?Te.comparator(e.key,n.key):(function(u,d,p){const y=d.data.field(u),g=p.data.field(u);return y!==null&&g!==null?ko(y,g):xe(42886)})(s.field,e,n);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return xe(19790,{direction:s.dir})}}class Sa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[l,u]of r)if(this.equalsFn(l,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),l=this.inner[r];if(l===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],e))return void(l[u]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return r.length===1?delete this.inner[n]:r.splice(l,1),this.innerSize--,!0;return!1}forEach(e){wa(this.inner,((n,r)=>{for(const[l,u]of r)e(l,u)}))}isEmpty(){return eE(this.inner)}size(){return this.innerSize}}const Yx=new Tt(Te.comparator);function ks(){return Yx}const yE=new Tt(Te.comparator);function Gl(...s){let e=yE;for(const n of s)e=e.insert(n.key,n);return e}function _E(s){let e=yE;return s.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function ma(){return Wl()}function vE(){return Wl()}function Wl(){return new Sa((s=>s.toString()),((s,e)=>s.isEqual(e)))}const Xx=new Tt(Te.comparator),$x=new Ft(Te.comparator);function Ge(...s){let e=$x;for(const n of s)e=e.add(n);return e}const Jx=new Ft(Fe);function Wx(){return Jx}function tp(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uh(e)?"-0":e}}function EE(s){return{integerValue:""+s}}function Zx(s,e){return Ax(e)?EE(e):tp(s,e)}class Vh{constructor(){this._=void 0}}function eC(s,e,n){return s instanceof au?(function(l,u){const d={fields:{[iE]:{stringValue:nE},[rE]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&$m(u)&&(u=Dh(u)),u&&(d.fields[sE]=u),{mapValue:d}})(n,e):s instanceof ou?TE(s,e):s instanceof lu?wE(s,e):(function(l,u){const d=bE(l,u),p=Z_(d)+Z_(l.Ae);return _m(d)&&_m(l.Ae)?EE(p):tp(l.serializer,p)})(s,e)}function tC(s,e,n){return s instanceof ou?TE(s,e):s instanceof lu?wE(s,e):n}function bE(s,e){return s instanceof mh?(function(r){return _m(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(e)?e:{integerValue:0}:null}class au extends Vh{}class ou extends Vh{constructor(e){super(),this.elements=e}}function TE(s,e){const n=SE(e);for(const r of s.elements)n.some((l=>Ji(l,r)))||n.push(r);return{arrayValue:{values:n}}}class lu extends Vh{constructor(e){super(),this.elements=e}}function wE(s,e){let n=SE(e);for(const r of s.elements)n=n.filter((l=>!Ji(l,r)));return{arrayValue:{values:n}}}class mh extends Vh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Z_(s){return Nt(s.integerValue||s.doubleValue)}function SE(s){return Jm(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class nC{constructor(e,n){this.field=e,this.transform=n}}function iC(s,e){return s.field.isEqual(e.field)&&(function(r,l){return r instanceof ou&&l instanceof ou||r instanceof lu&&l instanceof lu?Mo(r.elements,l.elements,Ji):r instanceof mh&&l instanceof mh?Ji(r.Ae,l.Ae):r instanceof au&&l instanceof au})(s.transform,e.transform)}class sC{constructor(e,n){this.version=e,this.transformResults=n}}class Ns{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ns}static exists(e){return new Ns(void 0,e)}static updateTime(e){return new Ns(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zc(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class jh{}function AE(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new CE(s.key,Ns.none()):new yu(s.key,s.data,Ns.none());{const n=s.data,r=fi.empty();let l=new Ft(tn.comparator);for(let u of e.fields)if(!l.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?r.delete(u):r.set(u,d),l=l.add(u)}return new Aa(s.key,r,new Ci(l.toArray()),Ns.none())}}function rC(s,e,n){s instanceof yu?(function(l,u,d){const p=l.value.clone(),y=tv(l.fieldTransforms,u,d.transformResults);p.setAll(y),u.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(s,e,n):s instanceof Aa?(function(l,u,d){if(!Zc(l.precondition,u))return void u.convertToUnknownDocument(d.version);const p=tv(l.fieldTransforms,u,d.transformResults),y=u.data;y.setAll(xE(l)),y.setAll(p),u.convertToFoundDocument(d.version,y).setHasCommittedMutations()})(s,e,n):(function(l,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function Zl(s,e,n,r){return s instanceof yu?(function(u,d,p,y){if(!Zc(u.precondition,d))return p;const g=u.value.clone(),T=nv(u.fieldTransforms,y,d);return g.setAll(T),d.convertToFoundDocument(d.version,g).setHasLocalMutations(),null})(s,e,n,r):s instanceof Aa?(function(u,d,p,y){if(!Zc(u.precondition,d))return p;const g=nv(u.fieldTransforms,y,d),T=d.data;return T.setAll(xE(u)),T.setAll(g),d.convertToFoundDocument(d.version,T).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((S=>S.field)))})(s,e,n,r):(function(u,d,p){return Zc(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(s,e,n)}function aC(s,e){let n=null;for(const r of s.fieldTransforms){const l=e.data.field(r.field),u=bE(r.transform,l||null);u!=null&&(n===null&&(n=fi.empty()),n.set(r.field,u))}return n||null}function ev(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,l){return r===void 0&&l===void 0||!(!r||!l)&&Mo(r,l,((u,d)=>iC(u,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class yu extends jh{constructor(e,n,r,l=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Aa extends jh{constructor(e,n,r,l,u=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function xE(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=s.data.field(n);e.set(n,r)}})),e}function tv(s,e,n){const r=new Map;st(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let l=0;l<n.length;l++){const u=s[l],d=u.transform,p=e.data.field(u.field);r.set(u.field,tC(d,p,n[l]))}return r}function nv(s,e,n){const r=new Map;for(const l of s){const u=l.transform,d=n.data.field(l.field);r.set(l.field,eC(u,d,e))}return r}class CE extends jh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oC extends jh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class lC{constructor(e,n,r,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=l}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(e.key)&&rC(u,e,r[l])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Zl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Zl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=vE();return this.mutations.forEach((l=>{const u=e.get(l.key),d=u.overlayedDocument;let p=this.applyToLocalView(d,u.mutatedFields);p=n.has(l.key)?null:p;const y=AE(d,p);y!==null&&r.set(l.key,y),d.isValidDocument()||d.convertToNoDocument(Re.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ge())}isEqual(e){return this.batchId===e.batchId&&Mo(this.mutations,e.mutations,((n,r)=>ev(n,r)))&&Mo(this.baseMutations,e.baseMutations,((n,r)=>ev(n,r)))}}class np{constructor(e,n,r,l){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=l}static from(e,n,r){st(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let l=(function(){return Xx})();const u=e.mutations;for(let d=0;d<u.length;d++)l=l.insert(u[d].key,r[d].version);return new np(e,n,r,l)}}class uC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class cC{constructor(e,n){this.count=e,this.unchangedNames=n}}var Pt,Ye;function hC(s){switch(s){case ne.OK:return xe(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return xe(15467,{code:s})}}function RE(s){if(s===void 0)return Ms("GRPC error has no .code"),ne.UNKNOWN;switch(s){case Pt.OK:return ne.OK;case Pt.CANCELLED:return ne.CANCELLED;case Pt.UNKNOWN:return ne.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return ne.INTERNAL;case Pt.UNAVAILABLE:return ne.UNAVAILABLE;case Pt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Pt.NOT_FOUND:return ne.NOT_FOUND;case Pt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Pt.ABORTED:return ne.ABORTED;case Pt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Pt.DATA_LOSS:return ne.DATA_LOSS;default:return xe(39323,{code:s})}}(Ye=Pt||(Pt={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";function fC(){return new TextEncoder}const dC=new Cr([4294967295,4294967295],0);function iv(s){const e=fC().encode(s),n=new H1;return n.update(e),new Uint8Array(n.digest())}function sv(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),l=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Cr([n,r],0),new Cr([l,u],0)]}class ip{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Kl(`Invalid padding: ${n}`);if(r<0)throw new Kl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Kl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Kl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Cr.fromNumber(this.ge)}ye(e,n,r){let l=e.add(n.multiply(Cr.fromNumber(r)));return l.compare(dC)===1&&(l=new Cr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=iv(e),[r,l]=sv(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(r,l,u);if(!this.we(d))return!1}return!0}static create(e,n,r){const l=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new ip(u,l,n);return r.forEach((p=>d.insert(p))),d}insert(e){if(this.ge===0)return;const n=iv(e),[r,l]=sv(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(r,l,u);this.Se(d)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Kl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Lh{constructor(e,n,r,l,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const l=new Map;return l.set(e,_u.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Lh(Re.min(),l,new Tt(Fe),ks(),Ge())}}class _u{constructor(e,n,r,l,u){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new _u(r,n,Ge(),Ge(),Ge())}}class eh{constructor(e,n,r,l){this.be=e,this.removedTargetIds=n,this.key=r,this.De=l}}class IE{constructor(e,n){this.targetId=e,this.Ce=n}}class NE{constructor(e,n,r=nn.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=l}}class rv{constructor(){this.ve=0,this.Fe=av(),this.Me=nn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ge(),n=Ge(),r=Ge();return this.Fe.forEach(((l,u)=>{switch(u){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:r=r.add(l);break;default:xe(38017,{changeType:u})}})),new _u(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=av()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,st(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class mC{constructor(e){this.Ge=e,this.ze=new Map,this.je=ks(),this.Je=Hc(),this.He=Hc(),this.Ye=new Tt(Fe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:xe(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,r=e.Ce.count,l=this.ot(n);if(l){const u=l.target;if(Em(u))if(r===0){const d=new Te(u.path);this.et(n,d,un.newNoDocument(d,Re.min()))}else st(r===1,20013,{expectedCount:r});else{const d=this._t(n);if(d!==r){const p=this.ut(e),y=p?this.ct(p,e,d):1;if(y!==0){this.it(n);const g=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,g)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:l=0},hashCount:u=0}=n;let d,p;try{d=Or(r).toUint8Array()}catch(y){if(y instanceof tE)return Oo("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{p=new ip(d,l,u)}catch(y){return Oo(y instanceof Kl?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return p.ge===0?null:p}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let l=0;return r.forEach((u=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(n,u,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((u,d)=>{const p=this.ot(d);if(p){if(u.current&&Em(p.target)){const y=new Te(p.target.path);this.It(y).has(d)||this.Et(d,y)||this.et(d,y,un.newNoDocument(y,e))}u.Be&&(n.set(d,u.ke()),u.qe())}}));let r=Ge();this.He.forEach(((u,d)=>{let p=!0;d.forEachWhile((y=>{const g=this.ot(y);return!g||g.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const l=new Lh(e,n,this.Ye,this.je,r);return this.je=ks(),this.Je=Hc(),this.He=Hc(),this.Ye=new Tt(Fe),l}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new rv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ft(Fe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ft(Fe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||de("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new rv),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Hc(){return new Tt(Te.comparator)}function av(){return new Tt(Te.comparator)}const pC={asc:"ASCENDING",desc:"DESCENDING"},gC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yC={and:"AND",or:"OR"};class _C{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Tm(s,e){return s.useProto3Json||Nh(e)?e:{value:e}}function ph(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DE(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function vC(s,e){return ph(s,e.toTimestamp())}function Yi(s){return st(!!s,49232),Re.fromTimestamp((function(n){const r=Dr(n);return new gt(r.seconds,r.nanos)})(s))}function sp(s,e){return wm(s,e).canonicalString()}function wm(s,e){const n=(function(l){return new pt(["projects",l.projectId,"databases",l.database])})(s).child("documents");return e===void 0?n:n.child(e)}function OE(s){const e=pt.fromString(s);return st(LE(e),10190,{key:e.toString()}),e}function Sm(s,e){return sp(s.databaseId,e.path)}function em(s,e){const n=OE(e);if(n.get(1)!==s.databaseId.projectId)throw new ye(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new ye(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new Te(kE(n))}function ME(s,e){return sp(s.databaseId,e)}function EC(s){const e=OE(s);return e.length===4?pt.emptyPath():kE(e)}function Am(s){return new pt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function kE(s){return st(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function ov(s,e,n){return{name:Sm(s,e),fields:n.value.mapValue.fields}}function bC(s,e){let n;if("targetChange"in e){e.targetChange;const r=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:xe(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],u=(function(g,T){return g.useProto3Json?(st(T===void 0||typeof T=="string",58123),nn.fromBase64String(T||"")):(st(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),nn.fromUint8Array(T||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(g){const T=g.code===void 0?ne.UNKNOWN:RE(g.code);return new ye(T,g.message||"")})(d);n=new NE(r,l,u,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const l=em(s,r.document.name),u=Yi(r.document.updateTime),d=r.document.createTime?Yi(r.document.createTime):Re.min(),p=new fi({mapValue:{fields:r.document.fields}}),y=un.newFoundDocument(l,u,d,p),g=r.targetIds||[],T=r.removedTargetIds||[];n=new eh(g,T,y.key,y)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const l=em(s,r.document),u=r.readTime?Yi(r.readTime):Re.min(),d=un.newNoDocument(l,u),p=r.removedTargetIds||[];n=new eh([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const l=em(s,r.document),u=r.removedTargetIds||[];n=new eh([],u,l,null)}else{if(!("filter"in e))return xe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:l=0,unchangedNames:u}=r,d=new cC(l,u),p=r.targetId;n=new IE(p,d)}}return n}function TC(s,e){let n;if(e instanceof yu)n={update:ov(s,e.key,e.value)};else if(e instanceof CE)n={delete:Sm(s,e.key)};else if(e instanceof Aa)n={update:ov(s,e.key,e.data),updateMask:DC(e.fieldMask)};else{if(!(e instanceof oC))return xe(16599,{Vt:e.type});n={verify:Sm(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(u,d){const p=d.transform;if(p instanceof au)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof ou)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof lu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof mh)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw xe(20930,{transform:d.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:vC(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:xe(27497)})(s,e.precondition)),n}function wC(s,e){return s&&s.length>0?(st(e!==void 0,14353),s.map((n=>(function(l,u){let d=l.updateTime?Yi(l.updateTime):Yi(u);return d.isEqual(Re.min())&&(d=Yi(u)),new sC(d,l.transformResults||[])})(n,e)))):[]}function SC(s,e){return{documents:[ME(s,e.path)]}}function AC(s,e){const n={structuredQuery:{}},r=e.path;let l;e.collectionGroup!==null?(l=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ME(s,l);const u=(function(g){if(g.length!==0)return jE(Wi.create(g,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const d=(function(g){if(g.length!==0)return g.map((T=>(function(D){return{field:bo(D.field),direction:RC(D.dir)}})(T)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const p=Tm(s,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:n,parent:l}}function xC(s){let e=EC(s.parent);const n=s.structuredQuery,r=n.from?n.from.length:0;let l=null;if(r>0){st(r===1,65062);const T=n.from[0];T.allDescendants?l=T.collectionId:e=e.child(T.collectionId)}let u=[];n.where&&(u=(function(S){const D=VE(S);return D instanceof Wi&&hE(D)?D.getFilters():[D]})(n.where));let d=[];n.orderBy&&(d=(function(S){return S.map((D=>(function(q){return new dh(To(q.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(D)))})(n.orderBy));let p=null;n.limit&&(p=(function(S){let D;return D=typeof S=="object"?S.value:S,Nh(D)?null:D})(n.limit));let y=null;n.startAt&&(y=(function(S){const D=!!S.before,V=S.values||[];return new fh(V,D)})(n.startAt));let g=null;return n.endAt&&(g=(function(S){const D=!S.before,V=S.values||[];return new fh(V,D)})(n.endAt)),Hx(e,l,d,u,p,"F",y,g)}function CC(s,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function VE(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=To(n.unaryFilter.field);return qt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const l=To(n.unaryFilter.field);return qt.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=To(n.unaryFilter.field);return qt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=To(n.unaryFilter.field);return qt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xe(61313);default:return xe(60726)}})(s):s.fieldFilter!==void 0?(function(n){return qt.create(To(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xe(58110);default:return xe(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return Wi.create(n.compositeFilter.filters.map((r=>VE(r))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return xe(1026)}})(n.compositeFilter.op))})(s):xe(30097,{filter:s})}function RC(s){return pC[s]}function IC(s){return gC[s]}function NC(s){return yC[s]}function bo(s){return{fieldPath:s.canonicalString()}}function To(s){return tn.fromServerFormat(s.fieldPath)}function jE(s){return s instanceof qt?(function(n){if(n.op==="=="){if(Y_(n.value))return{unaryFilter:{field:bo(n.field),op:"IS_NAN"}};if(Q_(n.value))return{unaryFilter:{field:bo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Y_(n.value))return{unaryFilter:{field:bo(n.field),op:"IS_NOT_NAN"}};if(Q_(n.value))return{unaryFilter:{field:bo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bo(n.field),op:IC(n.op),value:n.value}}})(s):s instanceof Wi?(function(n){const r=n.getFilters().map((l=>jE(l)));return r.length===1?r[0]:{compositeFilter:{op:NC(n.op),filters:r}}})(s):xe(54877,{filter:s})}function DC(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function LE(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}class br{constructor(e,n,r,l,u=Re.min(),d=Re.min(),p=nn.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=y}withSequenceNumber(e){return new br(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class OC{constructor(e){this.yt=e}}function MC(s){const e=xC({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?bm(e,e.limit,"L"):e}class kC{constructor(){this.Cn=new VC}addToCollectionParentIndex(e,n){return this.Cn.add(n),ee.resolve()}getCollectionParents(e,n){return ee.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ee.resolve()}deleteFieldIndex(e,n){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,n){return ee.resolve()}getDocumentsMatchingTarget(e,n){return ee.resolve(null)}getIndexType(e,n){return ee.resolve(0)}getFieldIndexes(e,n){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,n){return ee.resolve(Nr.min())}getMinOffsetFromCollectionGroup(e,n){return ee.resolve(Nr.min())}updateCollectionGroup(e,n,r){return ee.resolve()}updateIndexEntries(e,n){return ee.resolve()}}class VC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),l=this.index[n]||new Ft(pt.comparator),u=!l.has(r);return this.index[n]=l.add(r),u}has(e){const n=e.lastSegment(),r=e.popLast(),l=this.index[n];return l&&l.has(r)}getEntries(e){return(this.index[e]||new Ft(pt.comparator)).toArray()}}const lv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},PE=41943040;class In{static withCacheSize(e){return new In(e,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}In.DEFAULT_COLLECTION_PERCENTILE=10,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,In.DEFAULT=new In(PE,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),In.DISABLED=new In(-1,0,0);class jo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new jo(0)}static cr(){return new jo(-1)}}const uv="LruGarbageCollector",jC=1048576;function cv([s,e],[n,r]){const l=Fe(s,n);return l===0?Fe(e,r):l}class LC{constructor(e){this.Ir=e,this.buffer=new Ft(cv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();cv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class PC{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){de(uv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ho(n)?de(uv,"Ignoring IndexedDB error during garbage collection: ",n):await qo(n)}await this.Vr(3e5)}))}}class UC{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return ee.resolve(Ih.ce);const r=new LC(n);return this.mr.forEachTarget(e,(l=>r.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>r.Ar(l))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(lv)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lv):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,l,u,d,p,y,g;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),l=this.params.maximumSequenceNumbersToCollect):l=S,d=Date.now(),this.nthSequenceNumber(e,l)))).next((S=>(r=S,p=Date.now(),this.removeTargets(e,r,n)))).next((S=>(u=S,y=Date.now(),this.removeOrphanedDocuments(e,r)))).next((S=>(g=Date.now(),vo()<=He.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-T}ms
	Determined least recently used ${l} in `+(p-d)+`ms
	Removed ${u} targets in `+(y-p)+`ms
	Removed ${S} documents in `+(g-y)+`ms
Total Duration: ${g-T}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:S}))))}}function zC(s,e){return new UC(s,e)}class BC{constructor(){this.changes=new Sa((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,un.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ee.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class qC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class HC{constructor(e,n,r,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=l}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(r=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(r!==null&&Zl(r.mutation,l,Ci.empty(),gt.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Ge()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Ge()){const l=ma();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,r).next((u=>{let d=Gl();return u.forEach(((p,y)=>{d=d.insert(p,y.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const r=ma();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Ge())))}populateOverlays(e,n,r){const l=[];return r.forEach((u=>{n.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(e,l).next((u=>{u.forEach(((d,p)=>{n.set(d,p)}))}))}computeViews(e,n,r,l){let u=ks();const d=Wl(),p=(function(){return Wl()})();return n.forEach(((y,g)=>{const T=r.get(g.key);l.has(g.key)&&(T===void 0||T.mutation instanceof Aa)?u=u.insert(g.key,g):T!==void 0?(d.set(g.key,T.mutation.getFieldMask()),Zl(T.mutation,g,T.mutation.getFieldMask(),gt.now())):d.set(g.key,Ci.empty())})),this.recalculateAndSaveOverlays(e,u).next((y=>(y.forEach(((g,T)=>d.set(g,T))),n.forEach(((g,T)=>p.set(g,new qC(T,d.get(g)??null)))),p)))}recalculateAndSaveOverlays(e,n){const r=Wl();let l=new Tt(((d,p)=>d-p)),u=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const p of d)p.keys().forEach((y=>{const g=n.get(y);if(g===null)return;let T=r.get(y)||Ci.empty();T=p.applyToLocalView(g,T),r.set(y,T);const S=(l.get(p.batchId)||Ge()).add(y);l=l.insert(p.batchId,S)}))})).next((()=>{const d=[],p=l.getReverseIterator();for(;p.hasNext();){const y=p.getNext(),g=y.key,T=y.value,S=vE();T.forEach((D=>{if(!u.has(D)){const V=AE(n.get(D),r.get(D));V!==null&&S.set(D,V),u=u.add(D)}})),d.push(this.documentOverlayCache.saveOverlays(e,g,S))}return ee.waitFor(d)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,l){return(function(d){return Te.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Fx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,l):this.getDocumentsMatchingCollectionQuery(e,n,r,l)}getNextDocuments(e,n,r,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,l).next((u=>{const d=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,l-u.size):ee.resolve(ma());let p=nu,y=u;return d.next((g=>ee.forEach(g,((T,S)=>(p<S.largestBatchId&&(p=S.largestBatchId),u.get(T)?ee.resolve():this.remoteDocumentCache.getEntry(e,T).next((D=>{y=y.insert(T,D)}))))).next((()=>this.populateOverlays(e,g,u))).next((()=>this.computeViews(e,y,g,Ge()))).next((T=>({batchId:p,changes:_E(T)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Te(n)).next((r=>{let l=Gl();return r.isFoundDocument()&&(l=l.insert(r.key,r)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,l){const u=n.collectionGroup;let d=Gl();return this.indexManager.getCollectionParents(e,u).next((p=>ee.forEach(p,(y=>{const g=(function(S,D){return new Oh(D,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(n,y.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,r,l).next((T=>{T.forEach(((S,D)=>{d=d.insert(S,D)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,r,l){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,u,l)))).next((d=>{u.forEach(((y,g)=>{const T=g.getKey();d.get(T)===null&&(d=d.insert(T,un.newInvalidDocument(T)))}));let p=Gl();return d.forEach(((y,g)=>{const T=u.get(y);T!==void 0&&Zl(T.mutation,g,Ci.empty(),gt.now()),kh(n,g)&&(p=p.insert(y,g))})),p}))}}class FC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ee.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:Yi(l.createTime)}})(n)),ee.resolve()}getNamedQuery(e,n){return ee.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:MC(l.bundledQuery),readTime:Yi(l.readTime)}})(n)),ee.resolve()}}class GC{constructor(){this.overlays=new Tt(Te.comparator),this.qr=new Map}getOverlay(e,n){return ee.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ma();return ee.forEach(n,(l=>this.getOverlay(e,l).next((u=>{u!==null&&r.set(l,u)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((l,u)=>{this.St(e,n,u)})),ee.resolve()}removeOverlaysForBatchId(e,n,r){const l=this.qr.get(r);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),ee.resolve()}getOverlaysForCollection(e,n,r){const l=ma(),u=n.length+1,d=new Te(n.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const y=p.getNext().value,g=y.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===u&&y.largestBatchId>r&&l.set(y.getKey(),y)}return ee.resolve(l)}getOverlaysForCollectionGroup(e,n,r,l){let u=new Tt(((g,T)=>g-T));const d=this.overlays.getIterator();for(;d.hasNext();){const g=d.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>r){let T=u.get(g.largestBatchId);T===null&&(T=ma(),u=u.insert(g.largestBatchId,T)),T.set(g.getKey(),g)}}const p=ma(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((g,T)=>p.set(g,T))),!(p.size()>=l)););return ee.resolve(p)}St(e,n,r){const l=this.overlays.get(r.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(r.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new uC(n,r));let u=this.qr.get(n);u===void 0&&(u=Ge(),this.qr.set(n,u)),this.qr.set(n,u.add(r.key))}}class KC{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ee.resolve()}}class rp{constructor(){this.Qr=new Ft(Qt.$r),this.Ur=new Ft(Qt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Qt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Qt(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new Te(new pt([])),r=new Qt(n,e),l=new Qt(n,e+1),u=[];return this.Ur.forEachInRange([r,l],(d=>{this.Gr(d),u.push(d.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Te(new pt([])),r=new Qt(n,e),l=new Qt(n,e+1);let u=Ge();return this.Ur.forEachInRange([r,l],(d=>{u=u.add(d.key)})),u}containsKey(e){const n=new Qt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Qt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Te.comparator(e.key,n.key)||Fe(e.Yr,n.Yr)}static Kr(e,n){return Fe(e.Yr,n.Yr)||Te.comparator(e.key,n.key)}}class QC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ft(Qt.$r)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,l){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new lC(u,n,r,l);this.mutationQueue.push(d);for(const p of l)this.Zr=this.Zr.add(new Qt(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ee.resolve(d)}lookupMutationBatch(e,n){return ee.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,l=this.ei(r),u=l<0?0:l;return ee.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?Xm:this.tr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Qt(n,0),l=new Qt(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,l],(d=>{const p=this.Xr(d.Yr);u.push(p)})),ee.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ft(Fe);return n.forEach((l=>{const u=new Qt(l,0),d=new Qt(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,d],(p=>{r=r.add(p.Yr)}))})),ee.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,l=r.length+1;let u=r;Te.isDocumentKey(u)||(u=u.child(""));const d=new Qt(new Te(u),0);let p=new Ft(Fe);return this.Zr.forEachWhile((y=>{const g=y.key.path;return!!r.isPrefixOf(g)&&(g.length===l&&(p=p.add(y.Yr)),!0)}),d),ee.resolve(this.ti(p))}ti(e){const n=[];return e.forEach((r=>{const l=this.Xr(r);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){st(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ee.forEach(n.mutations,(l=>{const u=new Qt(l.key,n.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Qt(n,0),l=this.Zr.firstAfterOrEqual(r);return ee.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class YC{constructor(e){this.ri=e,this.docs=(function(){return new Tt(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,l=this.docs.get(r),u=l?l.size:0,d=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ee.resolve(r?r.document.mutableCopy():un.newInvalidDocument(n))}getEntries(e,n){let r=ks();return n.forEach((l=>{const u=this.docs.get(l);r=r.insert(l,u?u.document.mutableCopy():un.newInvalidDocument(l))})),ee.resolve(r)}getDocumentsMatchingQuery(e,n,r,l){let u=ks();const d=n.path,p=new Te(d.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(p);for(;y.hasNext();){const{key:g,value:{document:T}}=y.getNext();if(!d.isPrefixOf(g.path))break;g.path.length>d.length+1||bx(Ex(T),r)<=0||(l.has(T.key)||kh(n,T))&&(u=u.insert(T.key,T.mutableCopy()))}return ee.resolve(u)}getAllFromCollectionGroup(e,n,r,l){xe(9500)}ii(e,n){return ee.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new XC(this)}getSize(e){return ee.resolve(this.size)}}class XC extends BC{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(r)})),ee.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class $C{constructor(e){this.persistence=e,this.si=new Sa((n=>Wm(n)),Zm),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new rp,this.targetCount=0,this.ai=jo.ur()}forEachTarget(e,n){return this.si.forEach(((r,l)=>n(l))),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),ee.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new jo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ee.resolve()}updateTargetData(e,n){return this.Pr(n),ee.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,n,r){let l=0;const u=[];return this.si.forEach(((d,p)=>{p.sequenceNumber<=n&&r.get(p.targetId)===null&&(this.si.delete(d),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),ee.waitFor(u).next((()=>l))}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return ee.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),ee.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const l=this.persistence.referenceDelegate,u=[];return l&&n.forEach((d=>{u.push(l.markPotentiallyOrphaned(e,d))})),ee.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ee.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return ee.resolve(r)}containsKey(e,n){return ee.resolve(this._i.containsKey(n))}}class UE{constructor(e,n){this.ui={},this.overlays={},this.ci=new Ih(0),this.li=!1,this.li=!0,this.hi=new KC,this.referenceDelegate=e(this),this.Pi=new $C(this),this.indexManager=new kC,this.remoteDocumentCache=(function(l){return new YC(l)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new OC(n),this.Ii=new FC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new GC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new QC(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){de("MemoryPersistence","Starting transaction:",e);const l=new JC(this.ci.next());return this.referenceDelegate.Ei(),r(l).next((u=>this.referenceDelegate.di(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ai(e,n){return ee.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class JC extends wx{constructor(e){super(),this.currentSequenceNumber=e}}class ap{constructor(e){this.persistence=e,this.Ri=new rp,this.Vi=null}static mi(e){return new ap(e)}get fi(){if(this.Vi)return this.Vi;throw xe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),ee.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),ee.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ee.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.fi,(r=>{const l=Te.fromPath(r);return this.gi(e,l).next((u=>{u||n.removeEntry(l,Re.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ee.or([()=>ee.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class gh{constructor(e,n){this.persistence=e,this.pi=new Sa((r=>xx(r.path)),((r,l)=>r.isEqual(l))),this.garbageCollector=zC(this,n)}static mi(e,n){return new gh(e,n)}Ei(){}di(e){return ee.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((l=>r+l))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return ee.forEach(this.pi,((r,l)=>this.br(e,r,l).next((u=>u?ee.resolve():n(l)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ii(e,(d=>this.br(e,d,n).next((p=>{p||(r++,u.removeEntry(d,Re.min()))})))).next((()=>u.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ee.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ee.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ee.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Jc(e.data.value)),n}br(e,n,r){return ee.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.pi.get(n);return ee.resolve(l!==void 0&&l>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class op{constructor(e,n,r,l){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=l}static As(e,n){let r=Ge(),l=Ge();for(const u of n.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new op(e,n.fromCache,r,l)}}class WC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class ZC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Pw()?8:Sx(cn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,l){const u={result:null};return this.ys(e,n).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ws(e,n,l,r).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new WC;return this.Ss(e,n,d).next((p=>{if(u.result=p,this.Vs)return this.bs(e,n,d,p.size)}))})).next((()=>u.result))}bs(e,n,r,l){return r.documentReadCount<this.fs?(vo()<=He.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",Eo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ee.resolve()):(vo()<=He.DEBUG&&de("QueryEngine","Query:",Eo(n),"scans",r.documentReadCount,"local documents and returns",l,"documents as results."),r.documentReadCount>this.gs*l?(vo()<=He.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",Eo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qi(n))):ee.resolve())}ys(e,n){if(W_(n))return ee.resolve(null);let r=Qi(n);return this.indexManager.getIndexType(e,r).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=bm(n,null,"F"),r=Qi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((u=>{const d=Ge(...u);return this.ps.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,r).next((y=>{const g=this.Ds(n,p);return this.Cs(n,g,d,y.readTime)?this.ys(e,bm(n,null,"F")):this.vs(e,g,n,y)}))))})))))}ws(e,n,r,l){return W_(n)||l.isEqual(Re.min())?ee.resolve(null):this.ps.getDocuments(e,r).next((u=>{const d=this.Ds(n,u);return this.Cs(n,d,r,l)?ee.resolve(null):(vo()<=He.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Eo(n)),this.vs(e,d,n,vx(l,nu)).next((p=>p)))}))}Ds(e,n){let r=new Ft(gE(e));return n.forEach(((l,u)=>{kh(e,u)&&(r=r.add(u))})),r}Cs(e,n,r,l){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}Ss(e,n,r){return vo()<=He.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",Eo(n)),this.ps.getDocumentsMatchingQuery(e,n,Nr.min(),r)}vs(e,n,r,l){return this.ps.getDocumentsMatchingQuery(e,r,l).next((u=>(n.forEach((d=>{u=u.insert(d.key,d)})),u)))}}const lp="LocalStore",eR=3e8;class tR{constructor(e,n,r,l){this.persistence=e,this.Fs=n,this.serializer=l,this.Ms=new Tt(Fe),this.xs=new Sa((u=>Wm(u)),Zm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new HC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function nR(s,e,n,r){return new tR(s,e,n,r)}async function zE(s,e){const n=De(s);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let l;return n.mutationQueue.getAllMutationBatches(r).next((u=>(l=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((u=>{const d=[],p=[];let y=Ge();for(const g of l){d.push(g.batchId);for(const T of g.mutations)y=y.add(T.key)}for(const g of u){p.push(g.batchId);for(const T of g.mutations)y=y.add(T.key)}return n.localDocuments.getDocuments(r,y).next((g=>({Ls:g,removedBatchIds:d,addedBatchIds:p})))}))}))}function iR(s,e){const n=De(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const l=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,y,g,T){const S=g.batch,D=S.keys();let V=ee.resolve();return D.forEach((q=>{V=V.next((()=>T.getEntry(y,q))).next((B=>{const F=g.docVersions.get(q);st(F!==null,48541),B.version.compareTo(F)<0&&(S.applyToRemoteDocument(B,g),B.isValidDocument()&&(B.setReadTime(g.commitVersion),T.addEntry(B)))}))})),V.next((()=>p.mutationQueue.removeMutationBatch(y,S)))})(n,r,e,u).next((()=>u.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let y=Ge();for(let g=0;g<p.mutationResults.length;++g)p.mutationResults[g].transformResults.length>0&&(y=y.add(p.batch.mutations[g].key));return y})(e)))).next((()=>n.localDocuments.getDocuments(r,l)))}))}function BE(s){const e=De(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function sR(s,e){const n=De(s),r=e.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const p=[];e.targetChanges.forEach(((T,S)=>{const D=l.get(S);if(!D)return;p.push(n.Pi.removeMatchingKeys(u,T.removedDocuments,S).next((()=>n.Pi.addMatchingKeys(u,T.addedDocuments,S))));let V=D.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(S)!==null?V=V.withResumeToken(nn.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):T.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(T.resumeToken,r)),l=l.insert(S,V),(function(B,F,ie){return B.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=eR?!0:ie.addedDocuments.size+ie.modifiedDocuments.size+ie.removedDocuments.size>0})(D,V,T)&&p.push(n.Pi.updateTargetData(u,V))}));let y=ks(),g=Ge();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(u,T))})),p.push(rR(u,d,e.documentUpdates).next((T=>{y=T.ks,g=T.qs}))),!r.isEqual(Re.min())){const T=n.Pi.getLastRemoteSnapshotVersion(u).next((S=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));p.push(T)}return ee.waitFor(p).next((()=>d.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,y,g))).next((()=>y))})).then((u=>(n.Ms=l,u)))}function rR(s,e,n){let r=Ge(),l=Ge();return n.forEach((u=>r=r.add(u))),e.getEntries(s,r).next((u=>{let d=ks();return n.forEach(((p,y)=>{const g=u.get(p);y.isFoundDocument()!==g.isFoundDocument()&&(l=l.add(p)),y.isNoDocument()&&y.version.isEqual(Re.min())?(e.removeEntry(p,y.readTime),d=d.insert(p,y)):!g.isValidDocument()||y.version.compareTo(g.version)>0||y.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(y),d=d.insert(p,y)):de(lp,"Ignoring outdated watch update for ",p,". Current version:",g.version," Watch version:",y.version)})),{ks:d,qs:l}}))}function aR(s,e){const n=De(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Xm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function oR(s,e){const n=De(s);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let l;return n.Pi.getTargetData(r,e).next((u=>u?(l=u,ee.resolve(l)):n.Pi.allocateTargetId(r).next((d=>(l=new br(e,d,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,l).next((()=>l)))))))})).then((r=>{const l=n.Ms.get(r.targetId);return(l===null||r.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function xm(s,e,n){const r=De(s),l=r.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",u,(d=>r.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!Ho(d))throw d;de(lp,`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ms=r.Ms.remove(e),r.xs.delete(l.target)}function hv(s,e,n){const r=De(s);let l=Re.min(),u=Ge();return r.persistence.runTransaction("Execute query","readwrite",(d=>(function(y,g,T){const S=De(y),D=S.xs.get(T);return D!==void 0?ee.resolve(S.Ms.get(D)):S.Pi.getTargetData(g,T)})(r,d,Qi(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(d,p.targetId).next((y=>{u=y}))})).next((()=>r.Fs.getDocumentsMatchingQuery(d,e,n?l:Re.min(),n?u:Ge()))).next((p=>(lR(r,Kx(e),p),{documents:p,Qs:u})))))}function lR(s,e,n){let r=s.Os.get(e)||Re.min();n.forEach(((l,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),s.Os.set(e,r)}class fv{constructor(){this.activeTargetIds=Wx()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class uR{constructor(){this.Mo=new fv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new fv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class cR{Oo(e){}shutdown(){}}const dv="ConnectivityMonitor";class mv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){de(dv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){de(dv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Fc=null;function Cm(){return Fc===null?Fc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Fc++,"0x"+Fc.toString(16)}const tm="RestConnection",hR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fR{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${l}`,this.Wo=this.databaseId.database===ch?`project_id=${r}`:`project_id=${r}&database_id=${l}`}Go(e,n,r,l,u){const d=Cm(),p=this.zo(e,n.toUriEncodedString());de(tm,`Sending RPC '${e}' ${d}:`,p,r);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,l,u);const{host:g}=new URL(p),T=Uo(g);return this.Jo(e,p,y,r,T).then((S=>(de(tm,`Received RPC '${e}' ${d}: `,S),S)),(S=>{throw Oo(tm,`RPC '${e}' ${d} failed with error: `,S,"url: ",p,"request:",r),S}))}Ho(e,n,r,l,u,d){return this.Go(e,n,r,l,u)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Bo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,u)=>e[u]=l)),r&&r.headers.forEach(((l,u)=>e[u]=l))}zo(e,n){const r=hR[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class dR{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const on="WebChannelConnection";class mR extends fR{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,l,u){const d=Cm();return new Promise(((p,y)=>{const g=new F1;g.setWithCredentials(!0),g.listenOnce(G1.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case $c.NO_ERROR:const S=g.getResponseJson();de(on,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(S)),p(S);break;case $c.TIMEOUT:de(on,`RPC '${e}' ${d} timed out`),y(new ye(ne.DEADLINE_EXCEEDED,"Request time out"));break;case $c.HTTP_ERROR:const D=g.getStatus();if(de(on,`RPC '${e}' ${d} failed with status:`,D,"response text:",g.getResponseText()),D>0){let V=g.getResponseJson();Array.isArray(V)&&(V=V[0]);const q=V?.error;if(q&&q.status&&q.message){const B=(function(ie){const fe=ie.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(fe)>=0?fe:ne.UNKNOWN})(q.status);y(new ye(B,q.message))}else y(new ye(ne.UNKNOWN,"Server responded with status "+g.getStatus()))}else y(new ye(ne.UNAVAILABLE,"Connection failed."));break;default:xe(9055,{l_:e,streamId:d,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{de(on,`RPC '${e}' ${d} completed.`)}}));const T=JSON.stringify(l);de(on,`RPC '${e}' ${d} sending request:`,l),g.send(n,"POST",T,r,15)}))}T_(e,n,r){const l=Cm(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=Y1(),p=Q1(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(y.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,n,r),y.encodeInitMessageHeaders=!0;const T=u.join("");de(on,`Creating RPC '${e}' stream ${l}: ${T}`,y);const S=d.createWebChannel(T,y);this.I_(S);let D=!1,V=!1;const q=new dR({Yo:F=>{V?de(on,`Not sending because RPC '${e}' stream ${l} is closed:`,F):(D||(de(on,`Opening RPC '${e}' stream ${l} transport.`),S.open(),D=!0),de(on,`RPC '${e}' stream ${l} sending:`,F),S.send(F))},Zo:()=>S.close()}),B=(F,ie,fe)=>{F.listen(ie,(me=>{try{fe(me)}catch(Oe){setTimeout((()=>{throw Oe}),0)}}))};return B(S,Fl.EventType.OPEN,(()=>{V||(de(on,`RPC '${e}' stream ${l} transport opened.`),q.o_())})),B(S,Fl.EventType.CLOSE,(()=>{V||(V=!0,de(on,`RPC '${e}' stream ${l} transport closed`),q.a_(),this.E_(S))})),B(S,Fl.EventType.ERROR,(F=>{V||(V=!0,Oo(on,`RPC '${e}' stream ${l} transport errored. Name:`,F.name,"Message:",F.message),q.a_(new ye(ne.UNAVAILABLE,"The operation could not be completed")))})),B(S,Fl.EventType.MESSAGE,(F=>{if(!V){const ie=F.data[0];st(!!ie,16349);const fe=ie,me=fe?.error||fe[0]?.error;if(me){de(on,`RPC '${e}' stream ${l} received error:`,me);const Oe=me.status;let Ee=(function(A){const x=Pt[A];if(x!==void 0)return RE(x)})(Oe),we=me.message;Ee===void 0&&(Ee=ne.INTERNAL,we="Unknown error status: "+Oe+" with message "+me.message),V=!0,q.a_(new ye(Ee,we)),S.close()}else de(on,`RPC '${e}' stream ${l} received:`,ie),q.u_(ie)}})),B(p,K1.STAT_EVENT,(F=>{F.stat===pm.PROXY?de(on,`RPC '${e}' stream ${l} detected buffering proxy`):F.stat===pm.NOPROXY&&de(on,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{q.__()}),0),q}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function nm(){return typeof document<"u"?document:null}function Ph(s){return new _C(s,!0)}class qE{constructor(e,n,r=1e3,l=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=l,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-r);l>0&&de("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const pv="PersistentStream";class HE{constructor(e,n,r,l,u,d,p,y){this.Mi=e,this.S_=r,this.b_=l,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new qE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ne.RESOURCE_EXHAUSTED?(Ms(n.toString()),Ms("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,l])=>{this.D_===n&&this.G_(r,l)}),(r=>{e((()=>{const l=new ye(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(l)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{r((()=>this.z_(l)))})),this.stream.onMessage((l=>{r((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return de(pv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(de(pv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class pR extends HE{constructor(e,n,r,l,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,l,d),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=bC(this.serializer,e),r=(function(u){if(!("targetChange"in u))return Re.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?Re.min():d.readTime?Yi(d.readTime):Re.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Am(this.serializer),n.addTarget=(function(u,d){let p;const y=d.target;if(p=Em(y)?{documents:SC(u,y)}:{query:AC(u,y).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=DE(u,d.resumeToken);const g=Tm(u,d.expectedCount);g!==null&&(p.expectedCount=g)}else if(d.snapshotVersion.compareTo(Re.min())>0){p.readTime=ph(u,d.snapshotVersion.toTimestamp());const g=Tm(u,d.expectedCount);g!==null&&(p.expectedCount=g)}return p})(this.serializer,e);const r=CC(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Am(this.serializer),n.removeTarget=e,this.q_(n)}}class gR extends HE{constructor(e,n,r,l,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,l,d),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return st(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,st(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){st(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=wC(e.writeResults,e.commitTime),r=Yi(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Am(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>TC(this.serializer,r)))};this.q_(n)}}class yR{}class _R extends yR{constructor(e,n,r,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new ye(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Go(e,wm(n,r),l,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ye(ne.UNKNOWN,u.toString())}))}Ho(e,n,r,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.Ho(e,wm(n,r),l,d,p,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ye(ne.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class vR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ms(n),this.aa=!1):de("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const ba="RemoteStore";class ER{constructor(e,n,r,l,u){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((d=>{r.enqueueAndForget((async()=>{xa(this)&&(de(ba,"Restarting streams for network reachability change."),await(async function(y){const g=De(y);g.Ea.add(4),await vu(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Uh(g)})(this))}))})),this.Ra=new vR(r,l)}}async function Uh(s){if(xa(s))for(const e of s.da)await e(!0)}async function vu(s){for(const e of s.da)await e(!1)}function FE(s,e){const n=De(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),fp(n)?hp(n):Fo(n).O_()&&cp(n,e))}function up(s,e){const n=De(s),r=Fo(n);n.Ia.delete(e),r.O_()&&GE(n,e),n.Ia.size===0&&(r.O_()?r.L_():xa(n)&&n.Ra.set("Unknown"))}function cp(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Fo(s).Y_(e)}function GE(s,e){s.Va.Ue(e),Fo(s).Z_(e)}function hp(s){s.Va=new mC({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Fo(s).start(),s.Ra.ua()}function fp(s){return xa(s)&&!Fo(s).x_()&&s.Ia.size>0}function xa(s){return De(s).Ea.size===0}function KE(s){s.Va=void 0}async function bR(s){s.Ra.set("Online")}async function TR(s){s.Ia.forEach(((e,n)=>{cp(s,e)}))}async function wR(s,e){KE(s),fp(s)?(s.Ra.ha(e),hp(s)):s.Ra.set("Unknown")}async function SR(s,e,n){if(s.Ra.set("Online"),e instanceof NE&&e.state===2&&e.cause)try{await(async function(l,u){const d=u.cause;for(const p of u.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,d),l.Ia.delete(p),l.Va.removeTarget(p))})(s,e)}catch(r){de(ba,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await yh(s,r)}else if(e instanceof eh?s.Va.Ze(e):e instanceof IE?s.Va.st(e):s.Va.tt(e),!n.isEqual(Re.min()))try{const r=await BE(s.localStore);n.compareTo(r)>=0&&await(function(u,d){const p=u.Va.Tt(d);return p.targetChanges.forEach(((y,g)=>{if(y.resumeToken.approximateByteSize()>0){const T=u.Ia.get(g);T&&u.Ia.set(g,T.withResumeToken(y.resumeToken,d))}})),p.targetMismatches.forEach(((y,g)=>{const T=u.Ia.get(y);if(!T)return;u.Ia.set(y,T.withResumeToken(nn.EMPTY_BYTE_STRING,T.snapshotVersion)),GE(u,y);const S=new br(T.target,y,g,T.sequenceNumber);cp(u,S)})),u.remoteSyncer.applyRemoteEvent(p)})(s,n)}catch(r){de(ba,"Failed to raise snapshot:",r),await yh(s,r)}}async function yh(s,e,n){if(!Ho(e))throw e;s.Ea.add(1),await vu(s),s.Ra.set("Offline"),n||(n=()=>BE(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{de(ba,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await Uh(s)}))}function QE(s,e){return e().catch((n=>yh(s,n,e)))}async function zh(s){const e=De(s),n=kr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Xm;for(;AR(e);)try{const l=await aR(e.localStore,r);if(l===null){e.Ta.length===0&&n.L_();break}r=l.batchId,xR(e,l)}catch(l){await yh(e,l)}YE(e)&&XE(e)}function AR(s){return xa(s)&&s.Ta.length<10}function xR(s,e){s.Ta.push(e);const n=kr(s);n.O_()&&n.X_&&n.ea(e.mutations)}function YE(s){return xa(s)&&!kr(s).x_()&&s.Ta.length>0}function XE(s){kr(s).start()}async function CR(s){kr(s).ra()}async function RR(s){const e=kr(s);for(const n of s.Ta)e.ea(n.mutations)}async function IR(s,e,n){const r=s.Ta.shift(),l=np.from(r,e,n);await QE(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await zh(s)}async function NR(s,e){e&&kr(s).X_&&await(async function(r,l){if((function(d){return hC(d)&&d!==ne.ABORTED})(l.code)){const u=r.Ta.shift();kr(r).B_(),await QE(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,l))),await zh(r)}})(s,e),YE(s)&&XE(s)}async function gv(s,e){const n=De(s);n.asyncQueue.verifyOperationInProgress(),de(ba,"RemoteStore received new credentials");const r=xa(n);n.Ea.add(3),await vu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Uh(n)}async function DR(s,e){const n=De(s);e?(n.Ea.delete(2),await Uh(n)):e||(n.Ea.add(2),await vu(n),n.Ra.set("Unknown"))}function Fo(s){return s.ma||(s.ma=(function(n,r,l){const u=De(n);return u.sa(),new pR(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Xo:bR.bind(null,s),t_:TR.bind(null,s),r_:wR.bind(null,s),H_:SR.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),fp(s)?hp(s):s.Ra.set("Unknown")):(await s.ma.stop(),KE(s))}))),s.ma}function kr(s){return s.fa||(s.fa=(function(n,r,l){const u=De(n);return u.sa(),new gR(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:CR.bind(null,s),r_:NR.bind(null,s),ta:RR.bind(null,s),na:IR.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await zh(s)):(await s.fa.stop(),s.Ta.length>0&&(de(ba,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class dp{constructor(e,n,r,l,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=l,this.removalCallback=u,this.deferred=new Is,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,l,u){const d=Date.now()+r,p=new dp(e,n,d,l,u);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mp(s,e){if(Ms("AsyncQueue",`${e}: ${s}`),Ho(s))return new ye(ne.UNAVAILABLE,`${e}: ${s}`);throw s}class xo{static emptySet(e){return new xo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Te.comparator(n.key,r.key):(n,r)=>Te.comparator(n.key,r.key),this.keyedMap=Gl(),this.sortedSet=new Tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof xo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=r.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new xo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class yv{constructor(){this.ga=new Tt(Te.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):xe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Lo{constructor(e,n,r,l,u,d,p,y,g){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=l,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=y,this.hasCachedResults=g}static fromInitialDocuments(e,n,r,l,u){const d=[];return n.forEach((p=>{d.push({type:0,doc:p})})),new Lo(e,n,xo.emptySet(n),d,r,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==r[l].type||!n[l].doc.isEqual(r[l].doc))return!1;return!0}}class OR{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class MR{constructor(){this.queries=_v(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const l=De(n),u=l.queries;l.queries=_v(),u.forEach(((d,p)=>{for(const y of p.Sa)y.onError(r)}))})(this,new ye(ne.ABORTED,"Firestore shutting down"))}}function _v(){return new Sa((s=>pE(s)),Mh)}async function $E(s,e){const n=De(s);let r=3;const l=e.query;let u=n.queries.get(l);u?!u.ba()&&e.Da()&&(r=2):(u=new OR,r=e.Da()?0:1);try{switch(r){case 0:u.wa=await n.onListen(l,!0);break;case 1:u.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(d){const p=mp(d,`Initialization of query '${Eo(e.query)}' failed`);return void e.onError(p)}n.queries.set(l,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&pp(n)}async function JE(s,e){const n=De(s),r=e.query;let l=3;const u=n.queries.get(r);if(u){const d=u.Sa.indexOf(e);d>=0&&(u.Sa.splice(d,1),u.Sa.length===0?l=e.Da()?0:1:!u.ba()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function kR(s,e){const n=De(s);let r=!1;for(const l of e){const u=l.query,d=n.queries.get(u);if(d){for(const p of d.Sa)p.Fa(l)&&(r=!0);d.wa=l}}r&&pp(n)}function VR(s,e,n){const r=De(s),l=r.queries.get(e);if(l)for(const u of l.Sa)u.onError(n);r.queries.delete(e)}function pp(s){s.Ca.forEach((e=>{e.next()}))}var Rm,vv;(vv=Rm||(Rm={})).Ma="default",vv.Cache="cache";class WE{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const l of e.docChanges)l.type!==3&&r.push(l);e=new Lo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Lo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Rm.Cache}}class ZE{constructor(e){this.key=e}}class eb{constructor(e){this.key=e}}class jR{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ge(),this.mutatedKeys=Ge(),this.eu=gE(e),this.tu=new xo(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new yv,l=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,d=l,p=!1;const y=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,g=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((T,S)=>{const D=l.get(T),V=kh(this.query,S)?S:null,q=!!D&&this.mutatedKeys.has(D.key),B=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let F=!1;D&&V?D.data.isEqual(V.data)?q!==B&&(r.track({type:3,doc:V}),F=!0):this.su(D,V)||(r.track({type:2,doc:V}),F=!0,(y&&this.eu(V,y)>0||g&&this.eu(V,g)<0)&&(p=!0)):!D&&V?(r.track({type:0,doc:V}),F=!0):D&&!V&&(r.track({type:1,doc:D}),F=!0,(y||g)&&(p=!0)),F&&(V?(d=d.add(V),u=B?u.add(T):u.delete(T)):(d=d.delete(T),u=u.delete(T)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const T=this.query.limitType==="F"?d.last():d.first();d=d.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{tu:d,iu:r,Cs:p,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,l){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((T,S)=>(function(V,q){const B=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe(20277,{Rt:F})}};return B(V)-B(q)})(T.type,S.type)||this.eu(T.doc,S.doc))),this.ou(r),l=l??!1;const p=n&&!l?this._u():[],y=this.Xa.size===0&&this.current&&!l?1:0,g=y!==this.Za;return this.Za=y,d.length!==0||g?{snapshot:new Lo(this.query,e.tu,u,d,e.mutatedKeys,y===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new yv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ge(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new eb(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new ZE(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ge();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Lo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const gp="SyncEngine";class LR{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class PR{constructor(e){this.key=e,this.hu=!1}}class UR{constructor(e,n,r,l,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Sa((p=>pE(p)),Mh),this.Iu=new Map,this.Eu=new Set,this.du=new Tt(Te.comparator),this.Au=new Map,this.Ru=new rp,this.Vu={},this.mu=new Map,this.fu=jo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function zR(s,e,n=!0){const r=ab(s);let l;const u=r.Tu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await tb(r,e,n,!0),l}async function BR(s,e){const n=ab(s);await tb(n,e,!0,!1)}async function tb(s,e,n,r){const l=await oR(s.localStore,Qi(e)),u=l.targetId,d=s.sharedClientState.addLocalQueryTarget(u,n);let p;return r&&(p=await qR(s,e,u,d==="current",l.resumeToken)),s.isPrimaryClient&&n&&FE(s.remoteStore,l),p}async function qR(s,e,n,r,l){s.pu=(S,D,V)=>(async function(B,F,ie,fe){let me=F.view.ru(ie);me.Cs&&(me=await hv(B.localStore,F.query,!1).then((({documents:C})=>F.view.ru(C,me))));const Oe=fe&&fe.targetChanges.get(F.targetId),Ee=fe&&fe.targetMismatches.get(F.targetId)!=null,we=F.view.applyChanges(me,B.isPrimaryClient,Oe,Ee);return bv(B,F.targetId,we.au),we.snapshot})(s,S,D,V);const u=await hv(s.localStore,e,!0),d=new jR(e,u.Qs),p=d.ru(u.documents),y=_u.createSynthesizedTargetChangeForCurrentChange(n,r&&s.onlineState!=="Offline",l),g=d.applyChanges(p,s.isPrimaryClient,y);bv(s,n,g.au);const T=new LR(e,n,d);return s.Tu.set(e,T),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),g.snapshot}async function HR(s,e,n){const r=De(s),l=r.Tu.get(e),u=r.Iu.get(l.targetId);if(u.length>1)return r.Iu.set(l.targetId,u.filter((d=>!Mh(d,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(l.targetId),r.sharedClientState.isActiveQueryTarget(l.targetId)||await xm(r.localStore,l.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(l.targetId),n&&up(r.remoteStore,l.targetId),Im(r,l.targetId)})).catch(qo)):(Im(r,l.targetId),await xm(r.localStore,l.targetId,!0))}async function FR(s,e){const n=De(s),r=n.Tu.get(e),l=n.Iu.get(r.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),up(n.remoteStore,r.targetId))}async function GR(s,e,n){const r=WR(s);try{const l=await(function(d,p){const y=De(d),g=gt.now(),T=p.reduce(((V,q)=>V.add(q.key)),Ge());let S,D;return y.persistence.runTransaction("Locally write mutations","readwrite",(V=>{let q=ks(),B=Ge();return y.Ns.getEntries(V,T).next((F=>{q=F,q.forEach(((ie,fe)=>{fe.isValidDocument()||(B=B.add(ie))}))})).next((()=>y.localDocuments.getOverlayedDocuments(V,q))).next((F=>{S=F;const ie=[];for(const fe of p){const me=aC(fe,S.get(fe.key).overlayedDocument);me!=null&&ie.push(new Aa(fe.key,me,lE(me.value.mapValue),Ns.exists(!0)))}return y.mutationQueue.addMutationBatch(V,g,ie,p)})).next((F=>{D=F;const ie=F.applyToLocalDocumentSet(S,B);return y.documentOverlayCache.saveOverlays(V,F.batchId,ie)}))})).then((()=>({batchId:D.batchId,changes:_E(S)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(l.batchId),(function(d,p,y){let g=d.Vu[d.currentUser.toKey()];g||(g=new Tt(Fe)),g=g.insert(p,y),d.Vu[d.currentUser.toKey()]=g})(r,l.batchId,n),await Eu(r,l.changes),await zh(r.remoteStore)}catch(l){const u=mp(l,"Failed to persist write");n.reject(u)}}async function nb(s,e){const n=De(s);try{const r=await sR(n.localStore,e);e.targetChanges.forEach(((l,u)=>{const d=n.Au.get(u);d&&(st(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?st(d.hu,14607):l.removedDocuments.size>0&&(st(d.hu,42227),d.hu=!1))})),await Eu(n,r,e)}catch(r){await qo(r)}}function Ev(s,e,n){const r=De(s);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const l=[];r.Tu.forEach(((u,d)=>{const p=d.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(d,p){const y=De(d);y.onlineState=p;let g=!1;y.queries.forEach(((T,S)=>{for(const D of S.Sa)D.va(p)&&(g=!0)})),g&&pp(y)})(r.eventManager,e),l.length&&r.Pu.H_(l),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function KR(s,e,n){const r=De(s);r.sharedClientState.updateQueryState(e,"rejected",n);const l=r.Au.get(e),u=l&&l.key;if(u){let d=new Tt(Te.comparator);d=d.insert(u,un.newNoDocument(u,Re.min()));const p=Ge().add(u),y=new Lh(Re.min(),new Map,new Tt(Fe),d,p);await nb(r,y),r.du=r.du.remove(u),r.Au.delete(e),yp(r)}else await xm(r.localStore,e,!1).then((()=>Im(r,e,n))).catch(qo)}async function QR(s,e){const n=De(s),r=e.batch.batchId;try{const l=await iR(n.localStore,e);sb(n,r,null),ib(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Eu(n,l)}catch(l){await qo(l)}}async function YR(s,e,n){const r=De(s);try{const l=await(function(d,p){const y=De(d);return y.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let T;return y.mutationQueue.lookupMutationBatch(g,p).next((S=>(st(S!==null,37113),T=S.keys(),y.mutationQueue.removeMutationBatch(g,S)))).next((()=>y.mutationQueue.performConsistencyCheck(g))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(g,T,p))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,T))).next((()=>y.localDocuments.getDocuments(g,T)))}))})(r.localStore,e);sb(r,e,n),ib(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Eu(r,l)}catch(l){await qo(l)}}function ib(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function sb(s,e,n){const r=De(s);let l=r.Vu[r.currentUser.toKey()];if(l){const u=l.get(e);u&&(n?u.reject(n):u.resolve(),l=l.remove(e)),r.Vu[r.currentUser.toKey()]=l}}function Im(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),n&&s.Pu.yu(r,n);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((r=>{s.Ru.containsKey(r)||rb(s,r)}))}function rb(s,e){s.Eu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&(up(s.remoteStore,n),s.du=s.du.remove(e),s.Au.delete(n),yp(s))}function bv(s,e,n){for(const r of n)r instanceof ZE?(s.Ru.addReference(r.key,e),XR(s,r)):r instanceof eb?(de(gp,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,e),s.Ru.containsKey(r.key)||rb(s,r.key)):xe(19791,{wu:r})}function XR(s,e){const n=e.key,r=n.path.canonicalString();s.du.get(n)||s.Eu.has(r)||(de(gp,"New document in limbo: "+n),s.Eu.add(r),yp(s))}function yp(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new Te(pt.fromString(e)),r=s.fu.next();s.Au.set(r,new PR(n)),s.du=s.du.insert(n,r),FE(s.remoteStore,new br(Qi(ep(n.path)),r,"TargetPurposeLimboResolution",Ih.ce))}}async function Eu(s,e,n){const r=De(s),l=[],u=[],d=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,y)=>{d.push(r.pu(y,e,n).then((g=>{if((g||n)&&r.isPrimaryClient){const T=g?!g.fromCache:n?.targetChanges.get(y.targetId)?.current;r.sharedClientState.updateQueryState(y.targetId,T?"current":"not-current")}if(g){l.push(g);const T=op.As(y.targetId,g);u.push(T)}})))})),await Promise.all(d),r.Pu.H_(l),await(async function(y,g){const T=De(y);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>ee.forEach(g,(D=>ee.forEach(D.Es,(V=>T.persistence.referenceDelegate.addReference(S,D.targetId,V))).next((()=>ee.forEach(D.ds,(V=>T.persistence.referenceDelegate.removeReference(S,D.targetId,V)))))))))}catch(S){if(!Ho(S))throw S;de(lp,"Failed to update sequence numbers: "+S)}for(const S of g){const D=S.targetId;if(!S.fromCache){const V=T.Ms.get(D),q=V.snapshotVersion,B=V.withLastLimboFreeSnapshotVersion(q);T.Ms=T.Ms.insert(D,B)}}})(r.localStore,u))}async function $R(s,e){const n=De(s);if(!n.currentUser.isEqual(e)){de(gp,"User change. New user:",e.toKey());const r=await zE(n.localStore,e);n.currentUser=e,(function(u,d){u.mu.forEach((p=>{p.forEach((y=>{y.reject(new ye(ne.CANCELLED,d))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Eu(n,r.Ls)}}function JR(s,e){const n=De(s),r=n.Au.get(e);if(r&&r.hu)return Ge().add(r.key);{let l=Ge();const u=n.Iu.get(e);if(!u)return l;for(const d of u){const p=n.Tu.get(d);l=l.unionWith(p.view.nu)}return l}}function ab(s){const e=De(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=nb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KR.bind(null,e),e.Pu.H_=kR.bind(null,e.eventManager),e.Pu.yu=VR.bind(null,e.eventManager),e}function WR(s){const e=De(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YR.bind(null,e),e}class _h{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ph(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return nR(this.persistence,new ZC,e.initialUser,this.serializer)}Cu(e){return new UE(ap.mi,this.serializer)}Du(e){return new uR}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_h.provider={build:()=>new _h};class ZR extends _h{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){st(this.persistence.referenceDelegate instanceof gh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new PC(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?In.withCacheSize(this.cacheSizeBytes):In.DEFAULT;return new UE((r=>gh.mi(r,n)),this.serializer)}}class Nm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ev(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$R.bind(null,this.syncEngine),await DR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new MR})()}createDatastore(e){const n=Ph(e.databaseInfo.databaseId),r=(function(u){return new mR(u)})(e.databaseInfo);return(function(u,d,p,y){return new _R(u,d,p,y)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,l,u,d,p){return new ER(r,l,u,d,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>Ev(this.syncEngine,n,0)),(function(){return mv.v()?new mv:new cR})())}createSyncEngine(e,n){return(function(l,u,d,p,y,g,T){const S=new UR(l,u,d,p,y,g);return T&&(S.gu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=De(n);de(ba,"RemoteStore shutting down."),r.Ea.add(5),await vu(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Nm.provider={build:()=>new Nm};class ob{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ms("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Vr="FirestoreClient";class eI{constructor(e,n,r,l,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=l,this.user=ln.UNAUTHENTICATED,this.clientId=Qm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async d=>{de(Vr,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(r,(d=>(de(Vr,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Is;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=mp(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function im(s,e){s.asyncQueue.verifyOperationInProgress(),de(Vr,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let r=n.initialUser;s.setCredentialChangeListener((async l=>{r.isEqual(l)||(await zE(e.localStore,l),r=l)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function Tv(s,e){s.asyncQueue.verifyOperationInProgress();const n=await tI(s);de(Vr,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((r=>gv(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,l)=>gv(e.remoteStore,l))),s._onlineComponents=e}async function tI(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){de(Vr,"Using user provided OfflineComponentProvider");try{await im(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===ne.FAILED_PRECONDITION||l.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;Oo("Error using user provided cache. Falling back to memory cache: "+n),await im(s,new _h)}}else de(Vr,"Using default OfflineComponentProvider"),await im(s,new ZR(void 0));return s._offlineComponents}async function lb(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(de(Vr,"Using user provided OnlineComponentProvider"),await Tv(s,s._uninitializedComponentsProvider._online)):(de(Vr,"Using default OnlineComponentProvider"),await Tv(s,new Nm))),s._onlineComponents}function nI(s){return lb(s).then((e=>e.syncEngine))}async function ub(s){const e=await lb(s),n=e.eventManager;return n.onListen=zR.bind(null,e.syncEngine),n.onUnlisten=HR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=BR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=FR.bind(null,e.syncEngine),n}function iI(s,e,n={}){const r=new Is;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,p,y,g){const T=new ob({next:D=>{T.Nu(),d.enqueueAndForget((()=>JE(u,S)));const V=D.docs.has(p);!V&&D.fromCache?g.reject(new ye(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&D.fromCache&&y&&y.source==="server"?g.reject(new ye(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(D)},error:D=>g.reject(D)}),S=new WE(ep(p.path),T,{includeMetadataChanges:!0,qa:!0});return $E(u,S)})(await ub(s),s.asyncQueue,e,n,r))),r.promise}function sI(s,e,n={}){const r=new Is;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,p,y,g){const T=new ob({next:D=>{T.Nu(),d.enqueueAndForget((()=>JE(u,S))),D.fromCache&&y.source==="server"?g.reject(new ye(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(D)},error:D=>g.reject(D)}),S=new WE(p,T,{includeMetadataChanges:!0,qa:!0});return $E(u,S)})(await ub(s),s.asyncQueue,e,n,r))),r.promise}function cb(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const wv=new Map;const hb="firestore.googleapis.com",Sv=!0;class Av{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ye(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hb,this.ssl=Sv}else this.host=e.host,this.ssl=e.ssl??Sv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=PE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<jC)throw new ye(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_x("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cb(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ye(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ye(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ye(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,l){return r.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bh{constructor(e,n,r,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Av({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Av(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new lx;switch(r.type){case"firstParty":return new fx(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ye(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=wv.get(n);r&&(de("ComponentProvider","Removing Datastore"),wv.delete(n),r.terminate())})(this),Promise.resolve()}}function rI(s,e,n,r={}){s=Ea(s,Bh);const l=Uo(e),u=s._getSettings(),d={...u,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${n}`;l&&(Hv(`https://${p}`),Fv("Firestore",!0)),u.host!==hb&&u.host!==p&&Oo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...u,host:p,ssl:l,emulatorOptions:r};if(!ga(y,d)&&(s._setSettings(y),r.mockUserToken)){let g,T;if(typeof r.mockUserToken=="string")g=r.mockUserToken,T=ln.MOCK_USER;else{g=Iw(r.mockUserToken,s._app?.options.projectId);const S=r.mockUserToken.sub||r.mockUserToken.user_id;if(!S)throw new ye(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new ln(S)}s._authCredentials=new ux(new $1(g,T))}}class qh{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new qh(this.firestore,e,this._query)}}class Ht{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ht(this.firestore,e,this._key)}toJSON(){return{type:Ht._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(gu(n,Ht._jsonSchema))return new Ht(e,r||null,new Te(pt.fromString(n.referencePath)))}}Ht._jsonSchemaVersion="firestore/documentReference/1.0",Ht._jsonSchema={type:Ut("string",Ht._jsonSchemaVersion),referencePath:Ut("string")};class Rr extends qh{constructor(e,n,r){super(e,n,ep(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ht(this.firestore,null,new Te(e))}withConverter(e){return new Rr(this.firestore,e,this._path)}}function aI(s,e,...n){if(s=vn(s),J1("collection","path",e),s instanceof Bh){const r=pt.fromString(e,...n);return U_(r),new Rr(s,null,r)}{if(!(s instanceof Ht||s instanceof Rr))throw new ye(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(pt.fromString(e,...n));return U_(r),new Rr(s.firestore,null,r)}}function Po(s,e,...n){if(s=vn(s),arguments.length===1&&(e=Qm.newId()),J1("doc","path",e),s instanceof Bh){const r=pt.fromString(e,...n);return P_(r),new Ht(s,null,new Te(r))}{if(!(s instanceof Ht||s instanceof Rr))throw new ye(ne.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(pt.fromString(e,...n));return P_(r),new Ht(s.firestore,s instanceof Rr?s.converter:null,new Te(r))}}const xv="AsyncQueue";class Cv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new qE(this,"async_queue_retry"),this._c=()=>{const r=nm();r&&de(xv,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=nm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=nm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Is;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ho(e))throw e;de(xv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ms("INTERNAL UNHANDLED ERROR: ",Rv(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=dp.createAndSchedule(this,e,n,r,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&xe(47125,{Pc:Rv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Rv(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Hh extends Bh{constructor(e,n,r,l){super(e,n,r,l),this.type="firestore",this._queue=new Cv,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Cv(e),this._firestoreClient=void 0,await e}}}function oI(s,e){const n=typeof s=="object"?s:jm(),r=typeof s=="string"?s:ch,l=Vm(n,"firestore").getImmediate({identifier:r});if(!l._initialized){const u=Cw("firestore");u&&rI(l,...u)}return l}function _p(s){if(s._terminated)throw new ye(ne.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||lI(s),s._firestoreClient}function lI(s){const e=s._freezeSettings(),n=(function(l,u,d,p){return new Ix(l,u,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,cb(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new eI(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(s._componentsProvider))}class di{constructor(e){this._byteString=e}static fromBase64String(e){try{return new di(nn.fromBase64String(e))}catch(n){throw new ye(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new di(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:di._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(gu(e,di._jsonSchema))return di.fromBase64String(e.bytes)}}di._jsonSchemaVersion="firestore/bytes/1.0",di._jsonSchema={type:Ut("string",di._jsonSchemaVersion),bytes:Ut("string")};class vp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ye(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ep{constructor(e){this._methodName=e}}class Xi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ye(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ye(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Xi._jsonSchemaVersion}}static fromJSON(e){if(gu(e,Xi._jsonSchema))return new Xi(e.latitude,e.longitude)}}Xi._jsonSchemaVersion="firestore/geoPoint/1.0",Xi._jsonSchema={type:Ut("string",Xi._jsonSchemaVersion),latitude:Ut("number"),longitude:Ut("number")};class $i{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,l){if(r.length!==l.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==l[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:$i._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(gu(e,$i._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new $i(e.vectorValues);throw new ye(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}$i._jsonSchemaVersion="firestore/vectorValue/1.0",$i._jsonSchema={type:Ut("string",$i._jsonSchemaVersion),vectorValues:Ut("object")};const uI=/^__.*__$/;class cI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Aa(e,this.data,this.fieldMask,n,this.fieldTransforms):new yu(e,this.data,n,this.fieldTransforms)}}function fb(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe(40011,{Ac:s})}}class bp{constructor(e,n,r,l,u,d){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=l,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new bp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return vh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(fb(this.Ac)&&uI.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class hI{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ph(e)}Cc(e,n,r,l=!1){return new bp({Ac:e,methodName:n,Dc:r,path:tn.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fI(s){const e=s._freezeSettings(),n=Ph(s._databaseId);return new hI(s._databaseId,!!e.ignoreUndefinedProperties,n)}function dI(s,e,n,r,l,u={}){const d=s.Cc(u.merge||u.mergeFields?2:0,e,n,l);gb("Data must be an object, but it was:",d,r);const p=mb(r,d);let y,g;if(u.merge)y=new Ci(d.fieldMask),g=d.fieldTransforms;else if(u.mergeFields){const T=[];for(const S of u.mergeFields){const D=mI(e,S,n);if(!d.contains(D))throw new ye(ne.INVALID_ARGUMENT,`Field '${D}' is specified in your field mask but missing from your input data.`);gI(T,D)||T.push(D)}y=new Ci(T),g=d.fieldTransforms.filter((S=>y.covers(S.field)))}else y=null,g=d.fieldTransforms;return new cI(new fi(p),y,g)}class Tp extends Ep{_toFieldTransform(e){return new nC(e.path,new au)}isEqual(e){return e instanceof Tp}}function db(s,e){if(pb(s=vn(s)))return gb("Unsupported field value:",e,s),mb(s,e);if(s instanceof Ep)return(function(r,l){if(!fb(l.Ac))throw l.Sc(`${r._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,l){const u=[];let d=0;for(const p of r){let y=db(p,l.wc(d));y==null&&(y={nullValue:"NULL_VALUE"}),u.push(y),d++}return{arrayValue:{values:u}}})(s,e)}return(function(r,l){if((r=vn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Zx(l.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=gt.fromDate(r);return{timestampValue:ph(l.serializer,u)}}if(r instanceof gt){const u=new gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ph(l.serializer,u)}}if(r instanceof Xi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof di)return{bytesValue:DE(l.serializer,r._byteString)};if(r instanceof Ht){const u=l.databaseId,d=r.firestore._databaseId;if(!d.isEqual(u))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:sp(r.firestore._databaseId||l.databaseId,r._key.path)}}if(r instanceof $i)return(function(d,p){return{mapValue:{fields:{[aE]:{stringValue:oE},[hh]:{arrayValue:{values:d.toArray().map((g=>{if(typeof g!="number")throw p.Sc("VectorValues must only contain numeric values.");return tp(p.serializer,g)}))}}}}}})(r,l);throw l.Sc(`Unsupported field value: ${Ym(r)}`)})(s,e)}function mb(s,e){const n={};return eE(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wa(s,((r,l)=>{const u=db(l,e.mc(r));u!=null&&(n[r]=u)})),{mapValue:{fields:n}}}function pb(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof gt||s instanceof Xi||s instanceof di||s instanceof Ht||s instanceof Ep||s instanceof $i)}function gb(s,e,n){if(!pb(n)||!W1(n)){const r=Ym(n);throw r==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+r)}}function mI(s,e,n){if((e=vn(e))instanceof vp)return e._internalPath;if(typeof e=="string")return yb(s,e);throw vh("Field path arguments must be of type string or ",s,!1,void 0,n)}const pI=new RegExp("[~\\*/\\[\\]]");function yb(s,e,n){if(e.search(pI)>=0)throw vh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new vp(...e.split("."))._internalPath}catch{throw vh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function vh(s,e,n,r,l){const u=r&&!r.isEmpty(),d=l!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(u||d)&&(y+=" (found",u&&(y+=` in field ${r}`),d&&(y+=` in document ${l}`),y+=")"),new ye(ne.INVALID_ARGUMENT,p+s+y)}function gI(s,e){return s.some((n=>n.isEqual(e)))}class _b{constructor(e,n,r,l,u){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new yI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(vb("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class yI extends _b{data(){return super.data()}}function vb(s,e){return typeof e=="string"?yb(s,e):e instanceof vp?e._internalPath:e._delegate._internalPath}function _I(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ye(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vI{convertValue(e,n="none"){switch(Mr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Or(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw xe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return wa(e,((l,u)=>{r[l]=this.convertValue(u,n)})),r}convertVectorValue(e){const n=e.fields?.[hh].arrayValue?.values?.map((r=>Nt(r.doubleValue)));return new $i(n)}convertGeoPoint(e){return new Xi(Nt(e.latitude),Nt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Dh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(iu(e));default:return null}}convertTimestamp(e){const n=Dr(e);return new gt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=pt.fromString(e);st(LE(r),9688,{name:e});const l=new su(r.get(1),r.get(3)),u=new Te(r.popFirst(5));return l.isEqual(n)||Ms(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}function EI(s,e,n){let r;return r=s?n&&(n.merge||n.mergeFields)?s.toFirestore(e,n):s.toFirestore(e):e,r}class Ql{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pa extends _b{constructor(e,n,r,l,u,d){super(e,n,r,l,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new th(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(vb("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=pa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}pa._jsonSchemaVersion="firestore/documentSnapshot/1.0",pa._jsonSchema={type:Ut("string",pa._jsonSchemaVersion),bundleSource:Ut("string","DocumentSnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class th extends pa{data(e={}){return super.data(e)}}class Co{constructor(e,n,r,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new Ql(l.hasPendingWrites,l.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new th(this._firestore,this._userDataWriter,r.key,r,new Ql(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ye(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((p=>{const y=new th(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Ql(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:y,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const y=new th(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Ql(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let g=-1,T=-1;return p.type!==0&&(g=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),T=d.indexOf(p.doc.key)),{type:bI(p.type),doc:y,oldIndex:g,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Co._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Qm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function bI(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe(61501,{type:s})}}function wp(s){s=Ea(s,Ht);const e=Ea(s.firestore,Hh);return iI(_p(e),s._key).then((n=>SI(e,s,n)))}Co._jsonSchemaVersion="firestore/querySnapshot/1.0",Co._jsonSchema={type:Ut("string",Co._jsonSchemaVersion),bundleSource:Ut("string","QuerySnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class Eb extends vI{constructor(e){super(),this.firestore=e}convertBytes(e){return new di(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ht(this.firestore,null,n)}}function TI(s){s=Ea(s,qh);const e=Ea(s.firestore,Hh),n=_p(e),r=new Eb(e);return _I(s._query),sI(n,s._query).then((l=>new Co(e,r,s,l)))}function Ro(s,e,n){s=Ea(s,Ht);const r=Ea(s.firestore,Hh),l=EI(s.converter,e,n);return wI(r,[dI(fI(r),"setDoc",s._key,l,s.converter!==null,n).toMutation(s._key,Ns.none())])}function wI(s,e){return(function(r,l){const u=new Is;return r.asyncQueue.enqueueAndForget((async()=>GR(await nI(r),l,u))),u.promise})(_p(s),e)}function SI(s,e,n){const r=n.docs.get(e._key),l=new Eb(s);return new pa(s,l,e._key,r,new Ql(n.hasPendingWrites,n.fromCache),e.converter)}function zl(){return new Tp("serverTimestamp")}(function(e,n=!0){(function(l){Bo=l})(zo),Io(new ya("firestore",((r,{instanceIdentifier:l,options:u})=>{const d=r.getProvider("app").getImmediate(),p=new Hh(new cx(r.getProvider("auth-internal")),new dx(d,r.getProvider("app-check-internal")),(function(g,T){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ye(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new su(g.options.projectId,T)})(d,l),d);return u={useFetchStreams:n,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),xr(k_,V_,e),xr(k_,V_,"esm2020")})();const AI={apiKey:"AIzaSyDRfJevjEjaG66KDpNNSw4jVIeFfrEg6KE",authDomain:"japanese-learning-app-fcb27.firebaseapp.com",projectId:"japanese-learning-app-fcb27",storageBucket:"japanese-learning-app-fcb27.appspot.com",messagingSenderId:"999126999380",appId:"1:999126999380:web:21b7ec4100378178ec10c1"},bb=KS().length?jm():Qv(AI),Tr=q1(bb),Eh=oI(bb);const xI=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),CI=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Iv=s=>{const e=CI(s);return e.charAt(0).toUpperCase()+e.slice(1)},Tb=(...s)=>s.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),RI=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var II={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const NI=te.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:l="",children:u,iconNode:d,...p},y)=>te.createElement("svg",{ref:y,...II,width:e,height:e,stroke:s,strokeWidth:r?Number(n)*24/Number(e):n,className:Tb("lucide",l),...!u&&!RI(p)&&{"aria-hidden":"true"},...p},[...d.map(([g,T])=>te.createElement(g,T)),...Array.isArray(u)?u:[u]]));const Ze=(s,e)=>{const n=te.forwardRef(({className:r,...l},u)=>te.createElement(NI,{ref:u,iconNode:e,className:Tb(`lucide-${xI(Iv(s))}`,`lucide-${s}`,r),...l}));return n.displayName=Iv(s),n};const DI=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],wb=Ze("arrow-right",DI);const OI=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],uu=Ze("chevron-down",OI);const MI=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],kI=Ze("chevron-left",MI);const VI=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],jI=Ze("chevron-right",VI);const LI=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],PI=Ze("chevron-up",LI);const UI=[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]],zI=Ze("chevrons-left",UI);const BI=[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]],qI=Ze("chevrons-right",BI);const HI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],bh=Ze("circle-alert",HI);const FI=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],GI=Ze("circle-check-big",FI);const KI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Sb=Ze("circle-x",KI);const QI=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],YI=Ze("download",QI);const XI=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],$I=Ze("eye-off",XI);const JI=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Nv=Ze("folder",JI);const WI=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],ZI=Ze("layers",WI);const eN=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Ab=Ze("loader",eN);const tN=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],nN=Ze("log-out",tN);const iN=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],xb=Ze("pause",iN);const sN=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],rN=Ze("pen-tool",sN);const aN=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Sp=Ze("play",aN);const oN=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],lN=Ze("refresh-cw",oN);const uN=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],cN=Ze("repeat",uN);const hN=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Cb=Ze("save",hN);const fN=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],dN=Ze("settings",fN);const mN=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],pN=Ze("shuffle",mN);const gN=[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]],yN=Ze("skip-back",gN);const _N=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],vN=Ze("skip-forward",_N);const EN=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],bN=Ze("star",EN);const TN=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Rb=Ze("trash-2",TN);const wN=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Dv=Ze("triangle-alert",wN);const SN=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],AN=Ze("undo",SN);const xN=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],CN=Ze("volume-2",xN);const RN=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ib=Ze("x",RN),IN=new Set(["id","localId","book","folderId","isMarked","mistakes","confidence","responseTime","is_problem","mistake_count","last_practiced","lastPracticed"]),NN=[{id:"isMarked",label:"",width:"w-12",type:"action"},{id:"audio",label:"",width:"w-12",type:"action"}],DN={id:"selection",label:"#",width:"w-10",type:"system",fixed:"left"},ON=(s,e)=>{const n={...s},r=s.id?String(s.id):null;return n.id=r,n.localId=r||`local_${e}_${Date.now()}`,n.book=String(s.book||"1"),n.folderId=String(s.book||"Uncategorized"),n.isMarked=s.is_problem===!0||s.is_problem==="true",n.responseTime=0,n.japanese===void 0&&(n.japanese=String(s.hiragana||s.japanese||"")),s.japanese||Object.defineProperty(n,"_isSyntheticJapanese",{value:!0,enumerable:!1}),n.lesson||(n.lesson=String(s.lesson||"1")),n.cando||(n.cando=String(s.cando||"1")),n.bangla||(n.bangla=String(s.bangla||"")),n},Ov=(s,e)=>{const n={};let r=!1;return["japanese","kanji","bangla","lesson","cando","isMarked"].forEach(u=>{JSON.stringify(s[u])!==JSON.stringify(e[u])&&(u==="japanese"?n.hiragana=e[u]:u==="isMarked"?n.is_problem=e[u]:n[u]=e[u],r=!0)}),r?n:null},MN=({message:s,type:e,onClose:n})=>{te.useEffect(()=>{const u=setTimeout(n,3e3);return()=>clearTimeout(u)},[n]);let r="bg-slate-800";e==="error"&&(r="bg-red-600"),e==="warning"&&(r="bg-amber-600"),e==="success"&&(r="bg-green-600");const l=typeof s=="object"?JSON.stringify(s):s;return E.jsx("div",{className:`fixed bottom-24 right-6 ${r} text-white px-6 py-3 rounded-lg shadow-xl z-[100] flex items-center font-medium animate-in fade-in slide-in-from-bottom-5`,children:l})},kN=({value:s,max:e=5})=>{const n=Math.min(s||0,e),r=[];for(let l=0;l<e;l++){let u="bg-slate-200";l<n&&(n<=2?u="bg-yellow-400":n<=3?u="bg-orange-500":u="bg-red-600"),r.push(E.jsx("div",{className:`h-3 w-1.5 rounded-sm ${u}`},l))}return E.jsx("div",{className:"flex gap-0.5",children:r})},VN=Gi.memo(({item:s,columnOrder:e,columnDefs:n,columnVisibility:r,columnWidths:l,hiddenColumns:u,revealedCells:d,selectedIds:p,playbackMode:y,isPlaying:g,playbackQueue:T,currentIndex:S,index:D,isEditMode:V,onToggleSelection:q,onUpdateCell:B,onRevealCell:F,onPlaySingle:ie,onMark:fe,onDeleteRequest:me})=>{if(!s)return null;const Oe=p.has(s.localId),Ee=y==="playlist"&&g&&T[S]===s.localId,we=y==="single"&&g&&T[S]===s.localId,C=Ee||we,A=x=>{if(!r||!(r[x]!==!1))return null;const O="",j=u[x];switch(x){case"lastPracticed":return E.jsx("td",{"data-col-id":x,className:"w-24 px-2 py-0.5 border-r border-slate-100 text-center text-xs text-slate-500",children:s.lastPracticed||"-"});case"selection":return E.jsx("td",{"data-col-id":x,className:"w-10 px-2 py-0.5 border-r border-slate-100 text-center font-medium text-slate-400 text-xs",children:D+1});case"audio":return E.jsx("td",{"data-col-id":x,className:`w-12 px-2 py-0.5 border-r border-slate-100 text-center ${O}`,children:E.jsx("button",{onClick:()=>ie(s),className:`p-1 rounded-full transition-colors ${C?"bg-indigo-600 text-white":"text-slate-400 hover:text-indigo-600 hover:bg-indigo-50"}`,children:C&&g?E.jsx(xb,{size:14}):E.jsx(Sp,{size:14})})});case"mistakes":return E.jsx("td",{"data-col-id":x,className:`w-24 px-2 py-0.5 border-r border-slate-100 ${O}`,children:E.jsx(kN,{value:s.mistakes})});case"confidence":return E.jsx("td",{"data-col-id":x,className:`w-20 px-2 py-0.5 border-r border-slate-100 text-center ${O}`,children:E.jsxs("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${s.confidence>=80?"bg-green-100 text-green-700":s.confidence>=50?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:[s.confidence,"%"]})});case"responseTime":return E.jsx("td",{"data-col-id":x,className:`w-20 px-2 py-0.5 border-r border-slate-100 text-center text-xs text-slate-500 font-mono ${O}`,children:s.responseTime>0?`${s.responseTime}s`:"-"});case"isMarked":return E.jsx("td",{"data-col-id":x,className:`w-12 px-2 py-0.5 border-r border-slate-100 text-center ${O}`,children:E.jsx("button",{onClick:()=>fe(s.localId),className:"p-0.5 hover:bg-slate-100 rounded",children:E.jsx(bh,{size:16,className:s.isMarked?"text-red-500 fill-red-500":"text-slate-200"})})});case"delete":return E.jsx("td",{"data-col-id":x,className:"w-12 px-2 py-0.5 border-r border-slate-100 text-center",children:V&&E.jsx("button",{onClick:()=>me("single",s.localId,s.japanese),className:"p-1 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded transition-colors group-hover:text-slate-400",children:E.jsx(Rb,{size:16})})});default:const R=s[x],Xe=typeof R=="object"&&R!==null?JSON.stringify(R):String(R||""),et=d[x]===s.localId,Y=!j||et,Q=x==="japanese"||x==="hiragana"||x==="Hiragana";return E.jsx("td",{"data-col-id":x,className:`px-0 border-r border-slate-100 ${!Y&&!V?"bg-slate-100":"bg-white"}`,children:!Y&&!V?E.jsx("div",{onClick:()=>F(s.localId,x),className:"w-full h-full px-2 py-0.5 text-transparent cursor-pointer hover:bg-slate-200 flex items-center justify-center transition-colors group/cell",children:E.jsx($I,{size:16,className:"text-slate-300 group-hover/cell:text-slate-500"})}):V?E.jsx("input",{className:"w-full h-full px-2 py-0.5 bg-transparent outline-none text-sm border-2 border-transparent focus:border-amber-500 focus:bg-amber-50 transition-all",value:Xe,onChange:se=>B(s.localId,x,se.target.value)}):E.jsx("div",{className:`w-full h-full px-2 py-0.5 flex items-center text-sm leading-tight ${Q?"font-bold":""} ${C?"text-indigo-700":"text-slate-800"}`,children:Xe})})}};return E.jsx("tr",{className:`group border-b border-slate-100 hover:bg-blue-50/30 transition-colors ${Oe?"bg-blue-50":C?"bg-indigo-50 border-indigo-200":"bg-white"}`,children:e.map(x=>E.jsx(Gi.Fragment,{children:(!n.find(k=>k.id===x)?.editOnly||V)&&A(x)},x))})}),jN=({playbackMode:s,playbackQueue:e,currentIndex:n,vocabList:r,isPlaying:l,audioConfig:u,onPrevTrack:d,onNextTrack:p,onTogglePlayPause:y,onCycleRepeat:g,onCycleSpeed:T,onToggleBangla:S,onHide:D,onToggleMark:V})=>{if(s!=="playlist"||e.length===0)return null;const q=r.find(B=>B.localId===e[n]);return q?E.jsxs("div",{className:"w-full bg-white/95 backdrop-blur-sm border-t border-slate-200 h-12 flex items-center justify-between px-3 md:px-4 shadow-[0_-4px_10px_-1px_rgba(0,0,0,0.1)] z-50 transition-transform duration-300",children:[E.jsxs("div",{className:"flex items-center gap-2 w-1/4 min-w-0",children:[E.jsx("div",{className:"bg-indigo-100 p-1.5 rounded-lg text-indigo-600 hidden md:block shrink-0",children:E.jsx(ZI,{size:18})}),E.jsxs("div",{className:"overflow-hidden flex flex-col justify-center",children:[E.jsx("div",{className:"font-bold text-slate-800 truncate text-sm leading-tight",children:q.japanese}),E.jsx("div",{className:"text-[10px] text-slate-500 truncate leading-tight",children:q.bangla})]})]}),E.jsxs("div",{className:"flex items-center justify-center gap-2 flex-1",children:[E.jsx("button",{onClick:d,className:"text-slate-400 hover:text-indigo-600 hover:bg-slate-100 p-1.5 rounded-full transition-colors",children:E.jsx(yN,{size:18})}),E.jsx("button",{onClick:y,className:"flex-shrink-0 w-9 h-9 flex items-center justify-center rounded-full shadow-sm transform active:scale-95 transition-all bg-indigo-600 text-white hover:bg-indigo-700",children:l?E.jsx(xb,{size:18,fill:"white"}):E.jsx(Sp,{size:18,fill:"white",className:"ml-0.5"})}),E.jsx("button",{onClick:p,className:"text-slate-400 hover:text-indigo-600 hover:bg-slate-100 p-1.5 rounded-full transition-colors",children:E.jsx(vN,{size:18})}),E.jsx("button",{onClick:()=>V(q.id||q.localId),className:`flex-shrink-0 w-8 h-8 flex items-center justify-center rounded-full transition-colors order-last outline-none ${q.isMarked?"text-amber-400 bg-amber-50":"text-slate-300 hover:text-amber-400 hover:bg-slate-50"}`,title:q.isMarked?"Unmark":"Mark",children:E.jsx(bN,{size:18,fill:q.isMarked?"currentColor":"none"})}),E.jsxs("div",{className:"hidden md:block text-[9px] text-slate-400 font-mono tracking-widest uppercase ml-2",children:[n+1," / ",e.length,"  ",u.repeatMode.toUpperCase()]})]}),E.jsxs("div",{className:"flex items-center gap-2 w-1/4 justify-end min-w-0",children:[E.jsxs("div",{className:"relative group shrink-0",children:[E.jsx("select",{value:u.repeatPerItem,onChange:B=>{const F=parseInt(B.target.value);g(F)},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10",children:[1,2,3,5,10,20,30,40,50,100].map(B=>E.jsxs("option",{value:B,children:[B,"x"]},B))}),E.jsxs("button",{className:`px-2 py-1 rounded-[6px] flex items-center gap-1 transition-all ${u.repeatPerItem>1?"bg-indigo-100 text-indigo-600":"bg-slate-100 text-slate-500"}`,title:`Repeat: ${u.repeatPerItem}x`,children:[E.jsx(cN,{size:14}),E.jsxs("span",{className:"text-[10px] font-bold",children:[u.repeatPerItem,"x"]})]})]}),E.jsxs("button",{onClick:T,className:"px-2 py-1 rounded-[6px] bg-slate-100 text-slate-500 text-[10px] font-bold w-10 hover:bg-slate-200 transition-colors",title:"Speed",children:[u.speed,"x"]}),E.jsx("button",{onClick:D,className:"p-1 rounded-lg text-slate-400 hover:bg-slate-100 hover:text-slate-600 transition-colors ml-1",title:"Hide",children:E.jsx(uu,{size:18})})]})]}):null},LN=({colId:s,def:e,isEditMode:n,sortConfig:r,onSort:l,columnVisibility:u,onDragStart:d,onDragOver:p,onDrop:y,columnWidths:g,setColumnWidths:T})=>{if(!e||u[s]===!1)return null;const S=e.fixed||e.id==="selection"||e.id==="delete",D=V=>{V.preventDefault(),V.stopPropagation();const q=V.clientX,B=g[s]||160,F=document.getElementById(`col-${s}`);let ie;const fe=Oe=>{ie&&cancelAnimationFrame(ie),ie=requestAnimationFrame(()=>{const Ee=Oe.clientX-q,we=Math.max(80,B+Ee);F&&(F.style.width=`${we}px`)})},me=Oe=>{document.removeEventListener("mousemove",fe),document.removeEventListener("mouseup",me),ie&&cancelAnimationFrame(ie);const Ee=Oe.clientX-q,we=Math.max(80,B+Ee);T(C=>({...C,[s]:we}))};document.addEventListener("mousemove",fe),document.addEventListener("mouseup",me)};return E.jsxs("th",{draggable:!S,onDragStart:V=>!S&&d(V,s),onDragOver:S?void 0:p,onDrop:V=>!S&&y(V,s),"data-col-id":s,className:`
        relative
        px-2 py-1
        bg-slate-50
        border-b border-r border-slate-200
        text-xs font-bold uppercase tracking-wider
        select-none
        ${S?"text-center":"cursor-move hover:bg-slate-100"}
        ${n?"bg-amber-50 border-amber-200":""}
      `,children:[E.jsxs("div",{className:"flex items-center gap-1",onClick:()=>e.sortable&&l(e.id),children:[e.icon&&E.jsx(e.icon,{size:14}),E.jsx("span",{children:e.label}),r.key===e.id&&E.jsx("span",{className:"ml-auto",children:r.direction==="asc"?"":""})]}),!S&&E.jsx("div",{onMouseDown:D,className:`\r
            absolute top-0 right-0\r
            h-full w-1\r
            cursor-col-resize\r
            hover:bg-indigo-400\r
          `})]})},Mv=({label:s,items:e,activeValues:n,onToggle:r,color:l="blue"})=>{if(!e||e.length===0)return null;const u=Array.isArray(n)?n:[],d={blue:{active:"bg-blue-600 text-white shadow-md shadow-blue-200",inactive:"bg-white text-slate-600 border border-slate-200 hover:bg-slate-50 hover:border-blue-300"},indigo:{active:"bg-indigo-600 text-white shadow-md shadow-indigo-200",inactive:"bg-white text-slate-600 border border-slate-200 hover:bg-slate-50 hover:border-indigo-300"}},p=d[l]||d.blue;return E.jsxs("div",{className:"flex items-center gap-2 overflow-hidden px-1 select-none transition-all duration-300 h-7 border-b border-transparent",children:[E.jsx("div",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-wider mr-0.5 w-[50px] shrink-0 text-right",children:s==="L"?"Lesson":"Can-do"}),E.jsxs("div",{className:"flex gap-1 overflow-x-auto items-center h-full no-scrollbar",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:[E.jsx("style",{children:" .no-scrollbar::-webkit-scrollbar { display: none; } "}),e.map(([y,g])=>{const T=u.includes(y);return E.jsxs("button",{onClick:()=>r(y),title:`${s==="L"?"Lesson":"Can-do"} ${y}  ${g} words`,className:`
                                    flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-bold transition-all whitespace-nowrap border shrink-0
                                    ${T?p.active:p.inactive}
                                `,children:[E.jsxs("span",{children:[s,y]}),E.jsx("span",{className:`text-[9px] opacity-70 ${T?"bg-white/20 px-1 rounded-[2px]":"text-slate-400 bg-slate-100 px-1 rounded-[2px]"}`,children:g}),T&&E.jsx(Ib,{size:10,className:"ml-0.5 opacity-80 hover:opacity-100"})]},y)})]})]})},PN=(s,e=600)=>{const[n,r]=te.useState(0);return Gi.useEffect(()=>{let l=n;const u=performance.now();let d;const p=y=>{const g=y-u,T=Math.min(g/e,1),S=1-Math.pow(1-T,4);r(Math.floor(l+(s-l)*S)),T<1&&(d=requestAnimationFrame(p))};return l!==s&&(d=requestAnimationFrame(p)),()=>cancelAnimationFrame(d)},[s]),n},kv=({label:s,options:e,selectedValues:n,onChange:r})=>{const l=Array.isArray(n)?n:[],u=l.length===0,[d,p]=te.useState(!1),y=Gi.useRef(null),[g,T]=te.useState({top:0,left:0}),S=Gi.useRef(null);Gi.useEffect(()=>{const B=ie=>{y.current&&!y.current.contains(ie.target)&&(!S.current||!S.current.contains(ie.target))&&p(!1)},F=ie=>{S.current&&S.current.contains(ie.target)||d&&p(!1)};return document.addEventListener("mousedown",B),window.addEventListener("scroll",F,!0),()=>{document.removeEventListener("mousedown",B),window.removeEventListener("scroll",F,!0)}},[d]);const D=B=>{let F;l.includes(B)?F=l.filter(ie=>ie!==B):F=[...l,B],r(F)},V=()=>{r([])},q=u?"All":l.length===1?l[0]:`${l.length} selected`;return E.jsxs("div",{className:"relative group flex-shrink-0",ref:y,children:[E.jsxs("button",{onClick:B=>{if(!d){const F=B.currentTarget.getBoundingClientRect();T({top:F.bottom+4,left:F.left})}p(!d)},title:`${s} Filter`,className:`
                    flex items-center justify-center gap-2 appearance-none 
                    transition-all duration-200
                    text-xs font-bold 
                    rounded shadow-sm
                    focus:outline-none 
                    ${d?"ring-2 ring-indigo-200":""}
                    h-8 min-w-[32px] md:min-w-[100px] md:px-2 md:justify-between px-0
                    ${u?"bg-white text-slate-700 border border-slate-300 hover:border-indigo-400":"bg-indigo-600 text-white border border-indigo-600 shadow-indigo-200"}
                `,children:[E.jsxs("div",{className:"md:hidden flex items-center justify-center gap-0.5",children:[E.jsx("span",{className:"text-[11px] uppercase",children:s.charAt(0)}),E.jsx(uu,{size:10,strokeWidth:3,className:`transition-transform ${d?"rotate-180":""} opacity-80`})]}),E.jsxs("span",{className:"hidden md:block truncate max-w-[100px]",children:[s,": ",q]}),E.jsx(uu,{size:12,className:`hidden md:block transition-transform ${d?"rotate-180":""} ${u?"text-slate-400":"text-indigo-200"}`})]}),d&&E.jsxs("div",{ref:S,style:{position:"fixed",top:g.top,left:g.left},className:"w-48 bg-white rounded-lg shadow-xl border border-slate-200 z-[9999] max-h-64 overflow-y-auto p-1 animate-in fade-in zoom-in-95 duration-100 origin-top-left",children:[E.jsxs("div",{onClick:()=>{V(),p(!1)},className:`flex items-center gap-2 px-2 py-1.5 rounded cursor-pointer text-xs font-bold ${u?"bg-indigo-50 text-indigo-600":"text-slate-600 hover:bg-slate-50"}`,children:[E.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center ${u?"bg-indigo-600 border-indigo-600":"border-slate-300 bg-white"}`,children:u&&E.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-sm"})}),"All"]}),E.jsx("div",{className:"h-px bg-slate-100 my-1"}),e.map(B=>{const F=l.includes(B);return E.jsxs("div",{onClick:()=>D(B),className:`flex items-center gap-2 px-2 py-1.5 rounded cursor-pointer text-xs font-medium ${F?"bg-indigo-50 text-indigo-600":"text-slate-600 hover:bg-slate-50"}`,children:[E.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center ${F?"bg-indigo-600 border-indigo-600 text-white":"border-slate-300 bg-white"}`,children:F&&E.jsx("svg",{width:"10",height:"8",viewBox:"0 0 10 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:E.jsx("path",{d:"M1 4L3.5 6.5L9 1",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),s," ",B]},B)})]})]})},UN=({currentFolderId:s,folders:e,vocabList:n,selectedIds:r,isEditMode:l,hasUnsavedChanges:u,filters:d,hiddenColumns:p,viewMode:y,onFolderChange:g,onDeleteRequest:T,onEditModeToggle:S,onFilterChange:D,onViewModeChange:V,onVisibilityToggle:q,onSave:B,onDiscard:F,onPracticeStart:ie,onPlaylistStart:fe,onImportOpen:me,setIsColumnManagerOpen:Oe,isSyncing:Ee,filteredData:we,onStartSmartPractice:C,trendData:A,suggestion:x,onApplySuggestion:k,onRefresh:O,onShuffle:j,isPlaying:R,onTogglePlay:Xe,showingCount:et,totalCount:Y})=>{PN(et!==void 0?et:we.length);const[Q,se]=te.useState(!1),[ce,Ce]=te.useState(!1),I=Gi.useRef(null),[X,re]=te.useState(0),[le,he]=te.useState(typeof window<"u"?window.innerWidth>=768:!0);Gi.useLayoutEffect(()=>{const ke=()=>he(window.innerWidth>=768);window.addEventListener("resize",ke);const Me=new ResizeObserver(Ke=>{for(let zt of Ke)zt.contentRect.width>0&&re(Math.floor(zt.contentRect.width))});return I.current&&Me.observe(I.current),I.current&&re(I.current.offsetWidth),()=>{window.removeEventListener("resize",ke),Me.disconnect()}},[]);const _e=90,ve=36;let ze=X-_e;const it=le||ze>=ve;!le&&it&&(ze-=ve);const Nn=le||!l&&ze>=ve;!le&&Nn&&!l&&(ze-=ve);const Qn=le||!l&&ze>=ve;!le&&Qn&&!l&&(ze-=ve);const Dn=le||ze>=ve;!le&&Dn&&(ze-=ve);const pi=le||ze>=ve;!le&&pi&&(ze-=ve);const Yt=le||ze>=ve;!le&&Yt&&(ze-=ve);const Ii=le||ze>=100,On=te.useMemo(()=>{const ke={};return n.forEach(Me=>{const Ke=Me.lesson||"?";ke[Ke]=(ke[Ke]||0)+1}),Object.entries(ke).sort((Me,Ke)=>(parseInt(Me[0])||999)-(parseInt(Ke[0])||999))},[n]),Mn=te.useMemo(()=>{const ke={};return n.forEach(Me=>{const Ke=Me.cando||"?";ke[Ke]=(ke[Ke]||0)+1}),Object.entries(ke).sort()},[n]);return E.jsxs("div",{className:"bg-white border-b border-slate-200 flex flex-col flex-shrink-0 z-20 shadow-sm sticky top-0 max-w-[100vw]",children:[Q&&E.jsxs("div",{className:"flex flex-col gap-0.5 p-0.5 bg-slate-50/50 border-b border-slate-100 overflow-hidden animate-in slide-in-from-top-2 duration-300",children:[E.jsx(Mv,{label:"L",items:On,activeValues:d.lesson,onToggle:ke=>{const Me=d.lesson||[];let zt=Me.includes(ke)?Me.filter(Yn=>Yn!==ke):[...Me,ke];D({...d,lesson:zt})},color:"blue"}),E.jsx(Mv,{label:"C",items:Mn,activeValues:d.cando,onToggle:ke=>{const Me=d.cando||[];let zt=Me.includes(ke)?Me.filter(Yn=>Yn!==ke):[...Me,ke];D({...d,cando:zt})},color:"indigo"})]}),E.jsx("div",{className:"bg-white z-10 border-b border-slate-200 shadow-sm max-w-[100vw]",children:E.jsxs("div",{ref:I,className:"flex items-center gap-1 p-1 overflow-x-auto no-scrollbar",children:[Ee&&E.jsx(Ab,{size:12,className:"text-blue-600 animate-spin mr-2 flex-shrink-0"}),u&&!Ee&&E.jsx("div",{className:"w-2 h-2 bg-red-600 rounded-full mr-2 animate-pulse flex-shrink-0",title:"Unsaved Changes"}),E.jsxs("div",{className:"flex gap-1",children:[E.jsx(kv,{label:"Lesson",options:[...new Set(n.map(ke=>String(ke.lesson)))].sort((ke,Me)=>(parseInt(ke)||0)-(parseInt(Me)||0)),selectedValues:d.lesson,onChange:ke=>D({...d,lesson:ke})}),E.jsx(kv,{label:"Can-do",options:[...new Set(n.map(ke=>String(ke.cando)))].sort((ke,Me)=>(parseInt(ke)||0)-(parseInt(Me)||0)),selectedValues:d.cando,onChange:ke=>D({...d,cando:ke})})]}),E.jsx("div",{className:"w-px h-6 bg-slate-100 mx-1 flex-shrink-0"}),it&&E.jsxs("button",{onClick:()=>V("problem"),className:`flex-shrink-0 flex items-center gap-1 px-3 py-1.5 rounded-md text-xs font-bold transition-all whitespace-nowrap ${y==="problem"?"bg-red-100 text-red-600 border border-red-200":"bg-white text-slate-600 border border-slate-200 hover:bg-slate-50"}`,title:"Toggle Marked View",children:[E.jsx(bh,{size:14}),E.jsx("span",{className:"hidden md:inline",children:"Marked"})]}),!l&&E.jsxs(E.Fragment,{children:[Nn&&E.jsx("button",{onClick:R?Xe:fe,disabled:Ee,className:`flex-shrink-0 w-8 h-8 flex items-center justify-center rounded-lg shadow-sm transition-colors disabled:opacity-50 ${R?"bg-slate-800 text-white hover:bg-slate-900":"bg-white border border-slate-200 text-slate-800 hover:bg-slate-50"}`,title:R?"Pause":"Start Playlist",children:R?E.jsxs("div",{className:"flex gap-0.5",children:[E.jsx("div",{className:"w-1 h-3 bg-current rounded-full"}),E.jsx("div",{className:"w-1 h-3 bg-current rounded-full"})]}):E.jsx(Sp,{size:14,className:"ml-0.5"})}),Qn&&E.jsx("button",{onClick:j,disabled:Ee,className:"flex-shrink-0 w-8 h-8 flex items-center justify-center bg-white border border-slate-200 text-purple-600 rounded-lg shadow-sm hover:bg-slate-50 disabled:opacity-50",title:"Shuffle",children:E.jsx(pN,{size:14})})]}),pi&&E.jsx("button",{onClick:O,disabled:Ee,className:"flex-shrink-0 w-8 h-8 flex items-center justify-center bg-white border border-slate-200 text-slate-600 rounded-lg shadow-sm hover:bg-slate-50 disabled:opacity-50",title:"Refresh",children:E.jsx(lN,{size:14,className:Ee?"animate-spin":""})}),Ii&&E.jsxs("div",{className:"hidden md:flex items-center gap-0.5 scale-90 origin-left",children:[E.jsx("button",{onClick:()=>q("bangla"),className:`px-1.5 py-0.5 rounded text-[10px] font-bold border transition-colors ${p.bangla?"bg-slate-800 text-white border-slate-800":"bg-white text-slate-600 border-slate-200"}`,children:"BN"}),E.jsx("button",{onClick:()=>q("japanese"),className:`px-1.5 py-0.5 rounded text-[10px] font-bold border transition-colors ${p.japanese?"bg-slate-800 text-white border-slate-800":"bg-white text-slate-600 border-slate-200"}`,children:"JP"}),E.jsx("button",{onClick:()=>q("kanji"),className:`px-1.5 py-0.5 rounded text-[10px] font-bold border transition-colors ${p.kanji?"bg-slate-800 text-white border-slate-800":"bg-white text-slate-600 border-slate-200"}`,children:"KN"})]}),Ii&&E.jsxs("div",{className:"md:hidden flex items-center gap-0.5",children:[E.jsx("button",{onClick:()=>q("bangla"),className:`w-8 h-8 flex items-center justify-center rounded-lg border text-[10px] font-bold transition-colors ${p.bangla?"bg-slate-800 text-white border-slate-800":"bg-white text-slate-600 border-slate-200"}`,children:"BN"}),E.jsx("button",{onClick:()=>q("japanese"),className:`w-8 h-8 flex items-center justify-center rounded-lg border text-[10px] font-bold transition-colors ${p.japanese?"bg-slate-800 text-white border-slate-800":"bg-white text-slate-600 border-slate-200"}`,children:"JP"}),E.jsx("button",{onClick:()=>q("kanji"),className:`w-8 h-8 flex items-center justify-center rounded-lg border text-[10px] font-bold transition-colors ${p.kanji?"bg-slate-800 text-white border-slate-800":"bg-white text-slate-600 border-slate-200"}`,children:"KN"})]}),l&&E.jsxs(E.Fragment,{children:[E.jsx("button",{onClick:F,className:"bg-white border px-2 py-1 rounded text-xs whitespace-nowrap",children:E.jsx(AN,{size:14})}),E.jsx("button",{onClick:B,className:"bg-green-600 text-white px-2 py-1 rounded text-xs whitespace-nowrap",children:E.jsx(Cb,{size:14})})]}),Dn&&E.jsxs("button",{onClick:()=>se(!Q),className:`flex-shrink-0 flex items-center gap-1 px-3 py-1.5 rounded-md text-xs font-semibold transition-all shadow-sm ${Q?"bg-indigo-600 text-white border border-indigo-600 shadow-indigo-200":"bg-white text-slate-600 border border-slate-200"}`,title:Q?"Hide Chips":"Show Chips",children:[Q?E.jsx(uu,{size:14}):E.jsx(wb,{size:14}),E.jsx("span",{className:"hidden md:inline",children:"Chips"})]}),Yt&&E.jsx("button",{onClick:()=>Oe(!0),className:"flex-shrink-0 w-8 h-8 flex items-center justify-center bg-white border border-slate-200 text-slate-600 rounded-lg shadow-sm hover:bg-slate-50 disabled:opacity-50",title:"Columns",children:E.jsx(dN,{size:14})}),E.jsxs("div",{className:"hidden md:flex items-center gap-2 ml-auto mr-2 text-[11px] bg-slate-100 px-3 py-1.5 rounded-full border border-slate-200",children:[E.jsx("div",{className:"font-bold text-slate-700 max-w-[200px] truncate",children:s==="root"?"My Drive":e.find(ke=>ke.id===s)?.name||"..."}),E.jsx("div",{className:"text-slate-300",children:"|"}),E.jsxs("div",{className:"text-slate-600 font-medium",children:["Showing ",E.jsx("span",{className:"text-slate-900 font-bold font-mono",children:et!==void 0?et:we.length})," / ",E.jsx("span",{className:"font-mono",children:Y!==void 0?Y:n.length})]})]})]})})]})},zN=({isOpen:s,onClose:e,allColumns:n,columnOrder:r,setColumnOrder:l,columnVisibility:u,setColumnVisibility:d})=>{if(!s)return null;const p=(g,T)=>{if(T<0||T>=r.length)return;const S=[...r],[D]=S.splice(g,1);S.splice(T,0,D),l(S)},y=g=>{d(T=>({...T,[g]:!T[g]}))};return E.jsx("div",{className:"fixed inset-0 z-[120] bg-slate-900/60 backdrop-blur-sm flex items-center justify-center p-4",children:E.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-sm overflow-hidden flex flex-col max-h-[80vh]",children:[E.jsxs("div",{className:"p-4 border-b bg-slate-50 flex justify-between items-center",children:[E.jsx("h3",{className:"font-bold text-slate-700",children:"Manage Columns"}),E.jsx("button",{onClick:e,children:E.jsx(Sb,{size:20,className:"text-slate-400 hover:text-slate-600"})})]}),E.jsx("div",{className:"p-4 overflow-y-auto flex-1 space-y-2",children:r.map((g,T)=>{const S=n.find(V=>V.id===g);if(!S)return null;const D=u[g]!==!1;return E.jsxs("div",{className:`flex items-center gap-3 p-2 rounded-lg border ${D?"bg-white border-slate-200":"bg-slate-50 border-slate-100 opacity-60"}`,children:[E.jsx("input",{type:"checkbox",checked:D,onChange:()=>y(S.id),className:"rounded text-indigo-600 focus:ring-indigo-500",disabled:S.id==="selection"}),E.jsx("span",{className:"flex-1 text-sm font-bold text-slate-700",children:S.label||(S.icon?E.jsx(S.icon,{size:14}):"System")}),D&&E.jsxs("div",{className:"flex gap-1",children:[E.jsx("button",{onClick:()=>p(T,T-1),disabled:T===0||S.fixed||S.id==="selection"||S.id==="delete",className:"p-1 hover:bg-slate-100 rounded text-slate-400 hover:text-indigo-600 disabled:opacity-20",children:E.jsx(PI,{size:16})}),E.jsx("button",{onClick:()=>p(T,T+1),disabled:T===r.length-1||S.fixed||S.id==="selection"||S.id==="delete",className:"p-1 hover:bg-slate-100 rounded text-slate-400 hover:text-indigo-600 disabled:opacity-20",children:E.jsx(uu,{size:16})})]})]},S.id)})}),E.jsxs("div",{className:"p-4 border-t bg-slate-50 text-right",children:[E.jsx("button",{onClick:()=>{l(n.map(T=>T.id));const g={};n.forEach(T=>g[T.id]=!0),d(g)},className:"text-xs text-red-500 font-bold hover:underline mr-4",children:"Reset Default"}),E.jsx("button",{onClick:e,className:"px-4 py-2 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 text-sm",children:"Done"})]})]})})},BN=({isOpen:s,onClose:e,onImport:n})=>{const[r,l]=te.useState("input"),[u,d]=te.useState(""),[p,y]=te.useState([]),[g,T]=te.useState([]);if(!s)return null;const S=()=>{const B=u.trim().split(`
`).map(ie=>ie.split("	")).filter(ie=>ie.length>0&&ie.some(fe=>fe.trim()));if(B.length===0){alert("No data found");return}y(B);const F=Math.max(...B.map(ie=>ie.length));T(new Array(F).fill("skip")),l("mapping")},D=(q,B)=>{const F=[...g];B!=="skip"&&F.includes(B)&&(F[F.indexOf(B)]="skip"),F[q]=B,T(F)},V=()=>{const q=p.map(B=>{const F={};return g.forEach((ie,fe)=>{ie!=="skip"&&(F[ie]=B[fe])}),F});n(q),l("input"),d(""),y([])};return E.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center p-4",children:E.jsxs("div",{className:"bg-white w-full max-w-4xl rounded-2xl shadow-2xl flex flex-col max-h-[90vh]",children:[E.jsxs("div",{className:"p-6 border-b flex justify-between items-center",children:[E.jsxs("div",{children:[E.jsx("h2",{className:"text-xl font-bold text-slate-800",children:r==="input"?"Step 1: Paste Data":"Step 2: Map Columns"}),E.jsx("p",{className:"text-sm text-slate-500 mt-1",children:r==="input"?"Paste your vocabulary from Excel or Google Sheets.":"Assign column types. Hiragana is required."})]}),E.jsx("button",{onClick:e,children:E.jsx(Sb,{className:"text-slate-400 hover:text-red-500",size:24})})]}),E.jsx("div",{className:"p-6 flex-1 overflow-y-auto",children:r==="input"?E.jsx("textarea",{autoFocus:!0,value:u,onChange:q=>d(q.target.value),placeholder:`Example:
			1	1
			1	1`,className:"w-full h-96 p-4 border border-slate-300 rounded-xl font-mono text-sm bg-slate-50 focus:ring-2 focus:ring-indigo-500 outline-none resize-none"}):E.jsx("div",{className:"space-y-6",children:E.jsx("div",{className:"border border-slate-200 rounded-lg overflow-x-auto",children:E.jsxs("table",{className:"w-full text-sm text-left border-collapse",children:[E.jsx("thead",{children:E.jsx("tr",{children:g.map((q,B)=>E.jsxs("th",{className:"p-2 border-b border-r border-slate-200 bg-slate-50 min-w-[150px]",children:[E.jsxs("div",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:["Column ",String.fromCharCode(65+B)]}),E.jsxs("select",{value:q,onChange:F=>D(B,F.target.value),className:`w-full p-2 rounded border text-sm font-bold ${q==="skip"?"text-slate-400 border-slate-200":"text-indigo-700 border-indigo-300 bg-indigo-50"}`,children:[E.jsx("option",{value:"skip",children:"Skip"}),E.jsx("option",{value:"japanese",children:"Hiragana (Req)"}),E.jsx("option",{value:"kanji",children:"Kanji"}),E.jsx("option",{value:"bangla",children:"Bangla"}),E.jsx("option",{value:"lesson",children:"Lesson No."}),E.jsx("option",{value:"cando",children:"Can-do No."})]})]},B))})}),E.jsx("tbody",{children:p.slice(0,5).map((q,B)=>E.jsx("tr",{className:"border-b border-slate-100 last:border-0",children:g.map((F,ie)=>E.jsx("td",{className:`p-3 border-r border-slate-100 ${g[ie]==="skip"?"text-slate-400 bg-slate-50":"text-slate-800"}`,children:q[ie]||E.jsx("span",{className:"italic text-slate-300",children:"empty"})},ie))},B))})]})})})}),E.jsx("div",{className:"p-6 border-t bg-slate-50 rounded-b-2xl flex justify-between items-center",children:E.jsxs("div",{className:"flex gap-3 ml-auto",children:[r==="mapping"&&E.jsx("button",{onClick:()=>l("input"),className:"px-4 py-2.5 text-slate-600 font-bold hover:bg-slate-200 rounded-lg transition-colors",children:"Back"}),r==="input"?E.jsxs("button",{onClick:S,disabled:!u.trim(),className:"px-6 py-2.5 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 disabled:opacity-50 transition-colors shadow-sm flex items-center gap-2",children:["Next Step ",E.jsx(wb,{size:16})]}):E.jsxs("button",{onClick:V,disabled:!g.includes("japanese"),className:"px-6 py-2.5 bg-green-600 text-white font-bold rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:bg-slate-400 shadow-sm transition-colors flex items-center gap-2",children:[E.jsx(GI,{size:16})," Confirm Import"]})]})})]})})},qN=({user:s,isMobile:e})=>{const[n,r]=te.useState(!1),l=te.useRef(null);te.useEffect(()=>{const d=p=>{l.current&&!l.current.contains(p.target)&&r(!1)};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[]);const u=async()=>{try{await C1(Tr)}catch(d){console.error("Logout failed",d)}};return s?E.jsxs("div",{className:"relative p-4 mt-auto border-t border-slate-800",ref:l,children:[E.jsxs("button",{onClick:()=>r(!n),className:`flex items-center gap-3 w-full p-2 rounded-full hover:bg-slate-800 transition-colors ${n?"bg-slate-800":""}`,title:s.email,children:[E.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden border border-slate-600 bg-slate-700 flex items-center justify-center shrink-0",children:s.photoURL?E.jsx("img",{src:s.photoURL,alt:"User",className:"w-full h-full object-cover"}):E.jsx("div",{className:"text-slate-300 font-bold text-sm",children:(s.displayName||s.email||"U").charAt(0).toUpperCase()})}),E.jsxs("div",{className:`flex-1 text-left overflow-hidden ${e?"block":"hidden lg:block"}`,children:[E.jsx("div",{className:"text-sm font-medium text-white truncate",children:s.displayName||"User"}),E.jsx("div",{className:"text-xs text-slate-400 truncate",children:s.email})]})]}),n&&E.jsxs("div",{className:"absolute bottom-full left-4 mb-2 w-48 bg-white rounded-lg shadow-xl overflow-hidden py-1 z-50 animate-in fade-in zoom-in-95 origin-bottom-left",style:{left:e?"16px":"64px",bottom:"16px"},children:[E.jsxs("div",{className:"px-4 py-3 border-b border-gray-100 bg-gray-50",children:[E.jsx("p",{className:"text-sm font-bold text-gray-900 truncate",children:s.displayName||"User"}),E.jsx("p",{className:"text-xs text-gray-500 truncate",children:s.email})]}),E.jsxs("button",{onClick:u,className:"w-full text-left px-4 py-3 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2 font-medium",children:[E.jsx(nN,{size:16}),"Sign out"]})]})]}):null},Vv=({folders:s,currentFolderId:e,handleFolderChange:n,isMobile:r=!1,user:l})=>E.jsxs("div",{className:`${r?"w-full":"w-16 lg:w-64"} bg-slate-900 border-r border-slate-800 flex flex-col h-full flex-shrink-0 transition-all`,children:[E.jsxs("div",{className:`p-4 h-16 border-b border-slate-800 flex items-center ${r?"justify-start":"justify-center lg:justify-start"} gap-3`,children:[E.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-lg text-white flex items-center justify-center font-bold text-lg shadow-lg flex-shrink-0",children:""}),E.jsxs("span",{className:`${r?"block":"hidden lg:block"} font-bold text-white text-lg`,children:["Irodori",E.jsx("span",{className:"text-indigo-400",children:"AI"})]})]}),E.jsxs("div",{className:"flex-1 overflow-y-auto py-4 space-y-1",children:[E.jsx("div",{className:`${r?"block":"hidden lg:block"} px-4 text-xs font-bold text-slate-500 uppercase tracking-wider mb-2`,children:"My Workbooks"}),E.jsxs("button",{onClick:()=>n("root"),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium transition-colors ${e==="root"?"bg-slate-800 text-white border-r-2 border-indigo-500":"text-slate-400 hover:bg-slate-800 hover:text-white"}`,children:[E.jsx(Nv,{size:20,className:"flex-shrink-0"}),E.jsx("span",{className:`${r?"block":"hidden lg:block"}`,children:"All Books"})]}),s.filter(u=>u.parentId==="root").map(u=>E.jsx("div",{className:"group relative",children:E.jsxs("button",{onClick:()=>n(u.id),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium transition-colors ${e===u.id?"bg-slate-800 text-white border-r-2 border-indigo-500":"text-slate-400 hover:bg-slate-800 hover:text-white"}`,children:[E.jsx(Nv,{size:20,className:`flex-shrink-0 ${e===u.id?"text-yellow-400 fill-yellow-400":""}`}),E.jsx("span",{className:`${r?"block":"hidden lg:block"}`,children:u.name})]})},u.id))]}),E.jsx(qN,{user:l,isMobile:r})]}),HN=({currentPage:s,totalPages:e,itemsPerPage:n,onPageChange:r,onItemsPerPageChange:l,totalItems:u})=>{const d=[50,100,150,250,500,1e3],p=te.useMemo(()=>{const y=[];if(e<=7)for(let g=1;g<=e;g++)y.push(g);else if(s<=4){for(let g=1;g<=5;g++)y.push(g);y.push("..."),y.push(e)}else if(s>=e-3){y.push(1),y.push("...");for(let g=e-4;g<=e;g++)y.push(g)}else y.push(1),y.push("..."),y.push(s-1),y.push(s),y.push(s+1),y.push("..."),y.push(e);return y},[s,e]);return E.jsxs("div",{className:"flex flex-row flex-wrap items-center justify-between gap-2 py-2 px-3 bg-white border-t border-slate-100 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.02)] z-20 text-xs",children:[E.jsxs("div",{className:"flex items-center gap-2 group order-1",children:[E.jsx("label",{htmlFor:"rows-per-page",className:"hidden sm:block text-[10px] font-bold uppercase tracking-wider text-slate-400 group-hover:text-slate-600 transition-colors",children:"Rows"}),E.jsxs("div",{className:"relative",children:[E.jsx("select",{id:"rows-per-page",value:n,onChange:y=>l(Number(y.target.value)),className:"appearance-none bg-slate-50 border border-slate-200 text-slate-700 text-xs font-bold rounded pl-2 pr-6 py-1 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 hover:border-slate-300 transition-all cursor-pointer shadow-sm",children:d.map(y=>E.jsx("option",{value:y,children:y},y))}),E.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none text-slate-500",children:E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),E.jsxs("div",{className:"flex items-center gap-1 order-2",children:[E.jsxs("div",{className:"flex items-center gap-1 mr-1",children:[E.jsx(Gc,{onClick:()=>r(1),disabled:s===1,title:"First Page",children:E.jsx(zI,{size:14})}),E.jsx(Gc,{onClick:()=>r(s-1),disabled:s===1,title:"Previous Page",children:E.jsx(kI,{size:14})})]}),E.jsx("div",{className:"flex items-center gap-1",children:p.map((y,g)=>E.jsx(Gi.Fragment,{children:y==="..."?E.jsx("span",{className:"text-slate-400 px-0.5 select-none font-medium",children:"..."}):E.jsx("button",{onClick:()=>r(y),className:`
                    min-w-[28px] h-7 px-1.5 rounded text-xs font-bold transition-all duration-200 border
                    ${s===y?"bg-indigo-600 text-white border-indigo-600 shadow-sm shadow-indigo-200":"bg-white text-slate-600 border-slate-200 hover:bg-slate-50 hover:text-indigo-600 hover:border-indigo-200"}
                  `,children:y})},g))}),E.jsxs("div",{className:"flex items-center gap-1 ml-1",children:[E.jsx(Gc,{onClick:()=>r(s+1),disabled:s===e,title:"Next Page",children:E.jsx(jI,{size:14})}),E.jsx(Gc,{onClick:()=>r(e),disabled:s===e,title:"Last Page",children:E.jsx(qI,{size:14})})]})]})]})},Gc=({onClick:s,disabled:e,title:n,children:r})=>E.jsx("button",{onClick:s,disabled:e,title:n,className:`
      p-1.5 rounded transition-all duration-200 flex items-center justify-center border
      ${e?"text-slate-300 bg-slate-50 border-transparent cursor-not-allowed":"text-slate-500 bg-white border-slate-200 hover:text-indigo-600 hover:bg-indigo-50 hover:border-indigo-100 active:scale-95"}
    `,children:r}),Dm={YIELD_TO_UI:!1,PRELOAD_VOICE:!0,FORCE_RELOAD_ON_EVERY_CLICK:!1,FALLBACK_TIMEOUT_MS:50};window._speechUtteranceHolder=null;window.androidAudioFinished=()=>{window._currentAndroidCallback&&(window._currentAndroidCallback(),window._currentAndroidCallback=null)};const jv=()=>{window.Android&&window.Android.stop?(window.Android.stop(),window._currentAndroidCallback=null):window.AndroidNative&&window.AndroidNative.stop&&(window.AndroidNative.stop(),window._currentAndroidCallback=null),window.speechSynthesis&&window.speechSynthesis.cancel(),window._speechUtteranceHolder=null};let wr=null;const Th=()=>{if(!wr)try{const s=window.speechSynthesis.getVoices();wr=s.find(e=>e.lang==="ja-JP"&&/natural|google|premium|kyoko|otoya/i.test(e.name)),wr||(wr=s.find(e=>e.lang==="ja-JP"))}catch(s){console.warn("TTS Voice Load Error",s)}};window.speechSynthesis&&Dm.PRELOAD_VOICE&&setTimeout(()=>{Th(),window.speechSynthesis.onvoiceschanged!==void 0&&(window.speechSynthesis.onvoiceschanged=Th)},100);const FN=(s,e)=>{GN(s,e)},GN=(s,e)=>{if(window.Android&&window.Android.speak){window._currentAndroidCallback=e,window.Android.speak(s);return}if(window.AndroidNative&&window.AndroidNative.speak){window._currentAndroidCallback=e,window.AndroidNative.speak(s);return}if(!window.speechSynthesis){e&&e();return}if(!s){e&&e();return}try{window.speechSynthesis.cancel()}catch(l){console.warn("TTS Cancel failed",l)}const n=(l=1)=>{try{const u=new SpeechSynthesisUtterance(s);u.lang="ja-JP",u.rate=1,(!wr||Dm.FORCE_RELOAD_ON_EVERY_CLICK)&&Th(),wr&&(u.voice=wr),window._speechUtteranceHolder=u,u.onstart=()=>{u._hasStarted=!0},u.onend=()=>{window._speechUtteranceHolder=null,e&&e()},u.onerror=d=>{console.error(`TTS Error (Attempt ${l})`,d),window._speechUtteranceHolder=null,!u._hasStarted&&l<=2?(console.log("Retrying TTS..."),setTimeout(()=>n(l+1),50)):e&&e()},window.speechSynthesis.speak(u)}catch(u){console.error("TTS Speak Error",u),l<=2?setTimeout(()=>n(l+1),50):e&&e()}},r=window.speechSynthesis.getVoices();if(wr||r.length>0)n();else{const l=()=>{Th(),n(),window.speechSynthesis.removeEventListener("voiceschanged",l)};window.speechSynthesis.addEventListener("voiceschanged",l),setTimeout(()=>{window._speechUtteranceHolder===null&&n()},Dm.FALLBACK_TIMEOUT_MS)}},KN=(s,e,n)=>{const[r,l]=te.useState("idle"),[u,d]=te.useState(!1),[p,y]=te.useState([]),[g,T]=te.useState(-1),[S,D]=te.useState(0),[V,q]=te.useState({speed:1,repeatMode:"1x",includeBangla:!1}),[B,F]=te.useState(!1);te.useRef(null);const ie=()=>{u?(jv(),d(!1)):d(!0)},fe=te.useCallback(()=>{jv(),d(!1),l("idle"),y([]),T(-1),D(0),F(!1)},[]),me=te.useCallback(()=>{if(u){if(S<(V.repeatPerItem||1)-1){setTimeout(()=>D(C=>C+1),500);return}g<p.length-1?setTimeout(()=>{D(0),T(C=>C+1)},800):r==="playlist"&&V.playlistLoop?setTimeout(()=>{D(0),T(0)},800):(d(!1),D(0),T(0),n("Playback Finished"))}},[u,S,V,g,p.length,r,n]),Oe=()=>{const C=p[g],A=s.find(x=>x.localId===C)||s.find(x=>x.id===C);if(!A){me();return}FN(A.japanese,()=>{me()})};te.useEffect(()=>{u&&g>=0&&g<p.length&&Oe()},[u,g,p,S]);const Ee=(C=0)=>{y(e.map(A=>A.localId)),T(C),l("playlist"),D(0),d(!0),F(!1)},we=te.useCallback(C=>{fe(),l("single"),y([C.localId]),T(0),d(!0)},[fe]);return{playbackMode:r,isPlaying:u,playbackQueue:p,currentIndex:g,audioConfig:V,isAudioBarManuallyHidden:B,setAudioConfig:q,setIsAudioBarManuallyHidden:F,togglePlayPause:ie,stopPlaylist:fe,startPlaylist:Ee,handlePlaySingle:we,onPrevTrack:()=>{g>0&&T(C=>C-1)},onNextTrack:()=>{g<p.length-1&&T(C=>C+1)}}},QN=(s=[],e,n,r,l,u,d,p)=>{const y=d?p:s,g=Array.isArray(y)?y:[],T=te.useMemo(()=>{let V=[...g];if(e!=="root"&&(V=V.filter(q=>q.folderId===e)),n){const q=n.toLowerCase();V=V.filter(B=>B.japanese.includes(q)||B.bangla.includes(q)||B.kanji.includes(q))}if(Array.isArray(r.lesson)&&r.lesson.length>0){const q=r.lesson.map(String);V=V.filter(B=>q.includes(String(B.lesson)))}else r.lesson!=="all"&&!Array.isArray(r.lesson)&&(V=V.filter(q=>String(q.lesson)===String(r.lesson)));if(Array.isArray(r.cando)&&r.cando.length>0){const q=r.cando.map(String);V=V.filter(B=>q.includes(String(B.cando)))}else r.cando!=="all"&&!Array.isArray(r.cando)&&(V=V.filter(q=>String(q.cando)===String(r.cando)));if(u==="problem"?V=V.filter(q=>q.isMarked):u==="weak"&&(V=V.filter(q=>q.isMarked)),l.key==="random")for(let q=V.length-1;q>0;q--){const B=Math.floor(Math.random()*(q+1));[V[q],V[B]]=[V[B],V[q]]}else l.key&&V.sort((q,B)=>{let F=q[l.key],ie=B[l.key];return typeof F=="string"&&(F=F.toLowerCase()),typeof ie=="string"&&(ie=ie.toLowerCase()),(F<ie?-1:1)*(l.direction==="asc"?1:-1)});return V},[g,e,n,r,l,u]),S=te.useMemo(()=>{if(!s||!Array.isArray(s))return[];const V=new Date;return Array.from({length:7},(q,B)=>{const F=new Date(V);return F.setDate(V.getDate()-(6-B)),{date:F.toISOString().split("T")[0],score:0,hasActivity:!1}})},[s]),D=te.useMemo(()=>{if(!s||!Array.isArray(s))return null;const V=s.filter(B=>B.isMarked);if(V.length===0)return null;const q={};return V.forEach(B=>{const F=`${B.lesson}-${B.cando}`;q[F]||(q[F]={count:0,lesson:B.lesson,cando:B.cando}),q[F].count++}),Object.values(q).sort((B,F)=>F.count-B.count)[0]||null},[s]);return{filteredAndSortedData:T,trendData:S,weaknessSuggestion:D,safeDataList:g}},YN=(s,e,n)=>te.useMemo(()=>{let r=0;return n==="root"?r=s.length:r=s.filter(u=>u.folderId===n).length,{showingCount:e.length,totalCount:r}},[s,e,n]),Fh=()=>Eh,Gh=()=>Tr.currentUser?Tr.currentUser.uid:null,XN=async()=>{const s=Fh();if(!s)return null;const e=Gh();if(!e)return console.warn("[Firestore] No user ID available. Skipping load."),null;try{console.log(`[Firestore] Fetching config for ${e}`);const n=Po(s,"users",e,"preferences","config"),r=await wp(n);return r.exists()?r.data():null}catch(n){return console.error("[Firestore] Failed to load config",n),null}},$N=async s=>{const e=Fh();if(!e)return;const n=Gh();if(!n){console.warn("[Firestore] No user ID available. Skipping save.");return}try{console.log(`[Firestore] Saving config for ${n}`,s);const r=Po(e,"users",n,"preferences","config");await Ro(r,s,{merge:!0})}catch(r){console.error("[Firestore] Failed to save config",r)}},qi={itemsPerPage:"itemsPerPage",columnOrder:"columnOrder",columnVisibility:"columnVisibility",columnWidths:"columnWidths"},Bl={itemsPerPage:500,columnOrder:[],columnVisibility:{},columnWidths:{}};class JN{constructor(){this._isHydrated=!1,this._listeners=new Set,this._backgroundSync()}loadPreferences(){return{itemsPerPage:this._get(qi.itemsPerPage,Bl.itemsPerPage),columnOrder:this._get(qi.columnOrder,Bl.columnOrder),columnVisibility:this._get(qi.columnVisibility,Bl.columnVisibility),columnWidths:this._get(qi.columnWidths,Bl.columnWidths)}}subscribe(e){return this._listeners.add(e),()=>this._listeners.delete(e)}_notifyListeners(){const e=this.loadPreferences();this._listeners.forEach(n=>n(e))}savePreferences(e){if(Object.keys(e).forEach(n=>{qi[n]?this._set(qi[n],e[n]):console.warn(`PreferenceStore: Unknown preference key '${n}'`)}),this._isHydrated){const n={};Object.keys(e).forEach(r=>{qi[r]&&(n[r]=e[r])}),Object.keys(n).length>0&&$N(n)}else console.log("[PreferenceStore] Skipping Firestore save (not hydrated).",e)}async _backgroundSync(){const e=await XN();if(e){console.log("[PreferenceStore] Synced config from Firestore",e);let n=!1;Object.keys(qi).forEach(r=>{if(e[r]!==void 0){const l=this._get(qi[r],Bl[r]);JSON.stringify(l)!==JSON.stringify(e[r])&&(this._set(qi[r],e[r]),n=!0)}}),n&&this._notifyListeners()}this._isHydrated=!0,console.log("[PreferenceStore] Hydration complete. Firestore writes enabled.")}_get(e,n){try{const r=localStorage.getItem(e);return r===null?n:JSON.parse(r)}catch(r){return console.warn(`PreferenceStore: Failed to load '${e}'`,r),n}}_set(e,n){try{localStorage.setItem(e,JSON.stringify(n))}catch(r){console.warn(`PreferenceStore: Failed to save '${e}'`,r)}}}const Ts=new JN,WN=async()=>{const s=Fh();if(!s)return{};const e=Gh();if(!e)return console.warn("[Firestore] No user ID available for progress fetch."),{};try{console.log(`[Firestore] Fetching learning progress for ${e}`);const n=aI(s,"users",e,"progress"),r=await TI(n),l={};return r.empty?(console.log("[Firestore] No progress data found."),{}):(r.forEach(u=>{l[u.id]=u.data()}),console.log(`[Firestore] Loaded ${Object.keys(l).length} progress items.`),l)}catch(n){return console.error("[Firestore] Failed to fetch progress",n),{}}},ZN=async(s,e)=>{const n=Fh();if(!n)return;const r=Gh();if(!r){console.warn("[Firestore] No user ID available. Skipping save.");return}try{console.log(`[Firestore] Updating progress for ${s}`,e);const l=Po(n,"users",r,"progress",s);await Ro(l,{...e,updatedAt:new Date().toISOString()},{merge:!0})}catch(l){throw console.error("[Firestore] Failed to update progress",l),l}};function e4({vocabList:s,setVocabList:e,folders:n,setFolders:r,currentFolderId:l,setCurrentFolderId:u,isLoading:d,setIsLoading:p,isSyncing:y,setIsSyncing:g,apiService:T,fetchSheetData:S,user:D}){const[V,q]=te.useState(!1),[B,F]=te.useState([]),[ie,fe]=te.useState(!1),[me,Oe]=te.useState({japanese:!1,kanji:!1,bangla:!1}),[Ee,we]=te.useState({japanese:null,kanji:null,bangla:null}),C=te.useRef(0),[A,x]=te.useState(()=>Ts.loadPreferences().columnOrder),[k,O]=te.useState(()=>Ts.loadPreferences().columnVisibility),[j,R]=te.useState(()=>Ts.loadPreferences().columnWidths),[Xe,et]=te.useState(!1),[Y,Q]=te.useState(!1);te.useEffect(()=>{Ts.savePreferences({columnWidths:j})},[j]);const se=te.useMemo(()=>{let Z=[];if(s&&s.length>0){const oe=s[0];Z=Object.keys(oe).filter(Ie=>!IN.has(Ie)).filter(Ie=>Ie!=="japanese"||!oe._isSyntheticJapanese).map(Ie=>({id:Ie,label:Ie,width:"min-w-[140px]",type:"text",sortable:!0}))}return[DN,...Z,...NN]},[s]);te.useEffect(()=>{x(Z=>{const oe=Z||[],ae=new Set(oe),Ie=se.filter($e=>!ae.has($e.id)).map($e=>$e.id);return[...oe,...Ie]})},[se]),te.useEffect(()=>{Ts.savePreferences({columnOrder:A})},[A]),te.useEffect(()=>{Ts.savePreferences({columnVisibility:k})},[k]);const[ce,Ce]=te.useState({key:null,direction:"asc"}),[I,X]=te.useState({lesson:[],cando:[]}),[re,le]=te.useState(""),[he,_e]=te.useState("all"),[ve,ze]=te.useState(new Set),[it,Nn]=te.useState([]),[Qn,Dn]=te.useState(0),[pi,Yt]=te.useState(!1),[Ii,On]=te.useState(!1),[Mn,ke]=te.useState({open:!1,type:null,targetId:null,targetName:""}),[Me,Ke]=te.useState(!1),[zt,Yn]=te.useState({open:!1,pendingAction:null}),[Ls,Gt]=te.useState(null),Dt=te.useCallback((Z,oe="success")=>Gt({message:Z,type:oe}),[]),{filteredAndSortedData:hn,trendData:Pr,weaknessSuggestion:Ni,safeDataList:Go}=QN(s,l,re,I,ce,he,V,B),{showingCount:Ur,totalCount:zr}=YN(s,hn,l),[Zi,fn]=te.useState(1),[ot,dn]=te.useState(()=>Ts.loadPreferences().itemsPerPage);te.useEffect(()=>{Ts.savePreferences({itemsPerPage:ot})},[ot]),te.useEffect(()=>{const Z=Ts.subscribe(oe=>{oe.itemsPerPage!==ot&&dn(oe.itemsPerPage),JSON.stringify(oe.columnOrder)!==JSON.stringify(A)&&x(oe.columnOrder),JSON.stringify(oe.columnVisibility)!==JSON.stringify(k)&&O(oe.columnVisibility),JSON.stringify(oe.columnWidths)!==JSON.stringify(j)&&R(oe.columnWidths)});return()=>Z()},[ot,A,k,j]),te.useEffect(()=>{fn(1)},[l,re,I,he,ce]);const vt=te.useMemo(()=>{const Z=(Zi-1)*ot;return hn.slice(Z,Z+ot)},[hn,Zi,ot]),Ca=Math.ceil(hn.length/ot),{playbackMode:gi,isPlaying:Ps,playbackQueue:mn,currentIndex:Di,audioConfig:wt,isAudioBarManuallyHidden:kn,setAudioConfig:En,setIsAudioBarManuallyHidden:bn,togglePlayPause:Ra,startPlaylist:Ia,handlePlaySingle:Xn,onPrevTrack:es,onNextTrack:Ko}=KN(s,hn,Dt),ts=te.useMemo(()=>l==="root"?s:s.filter(Z=>Z.folderId===l),[s,l]),Vn=Z=>{V&&ie?Yn({open:!0,pendingAction:Z}):(V&&q(!1),Z())},ns=Z=>Vn(()=>u(Z)),is=Z=>Vn(()=>X(Z)),yi=(Z="standard")=>{let oe=hn;if(Z==="smart"&&(oe=oe.filter(ae=>ae.isMarked)),oe.length===0&&(oe=hn.slice(0,10)),oe.length===0){Dt("No words to practice!","error");return}Nn([...oe].sort(()=>Math.random()-.5)),Dn(0),Yt(!0)},Na=()=>Vn(()=>yi()),jn=()=>Vn(()=>Ia(0)),Ln=Z=>Vn(()=>_e(he===Z?"all":Z)),St=Z=>Vn(()=>X({lesson:Z.lesson,cando:Z.cando})),Ot=async()=>{if(V&&ie){Dt("Save or discard changes before refreshing","warning");return}g(!0);try{await S(!0),Dt("Data refreshed from Sheet","success")}catch(Z){console.error(Z),Dt("Refresh failed","error")}finally{g(!1)}},$n=()=>Vn(()=>{const Z=s.filter(Ie=>Ie.isMarked),oe=Ie=>[...Ie].sort(()=>Math.random()-.5);let ae=[...oe(Z).slice(0,15),...oe(s.filter(Ie=>!Ie.isMarked)).slice(0,5)];ae.length===0&&(ae=oe(s).slice(0,20)),Nn(ae),Dn(0),Yt(!0)}),Us=()=>{F(JSON.parse(JSON.stringify(s))),fe(!1),q(!0),Ke(!1),Dt("Edit Mode Started","warning")},Da=async()=>{if(y)return;const Z=[],oe=[];if(B.forEach(ae=>{if(!ae.id)oe.push(ae);else{const Ie=s.find($e=>$e.id===ae.id);Ie&&JSON.stringify(Ov(Ie,ae))&&Z.push({id:ae.id,...Ov(Ie,ae)})}}),Z.length===0&&oe.length===0){fe(!1);return}g(!0),e(JSON.parse(JSON.stringify(B))),fe(!1);try{oe.length&&await T.sendAdd(oe),Z.length&&await T.sendUpdate(Z),Dt("Saved!","success"),q(!1),await S()}catch(ae){console.error(ae),Dt("Save failed","error"),fe(!0)}finally{g(!1)}},Oa=()=>{F([]),fe(!1),q(!1)},Ma=()=>{Da(),Yn({open:!1,pendingAction:null}),zt.pendingAction?.()},Jn=()=>{fe(!1),q(!1),Yn({open:!1,pendingAction:null}),zt.pendingAction?.()},zs=()=>Yn({open:!1,pendingAction:null});te.useEffect(()=>{we({japanese:null,kanji:null,bangla:null})},[l,I,re,ce,he]);const Wn=Z=>{Oe(oe=>({...oe,[Z]:!oe[Z]})),we(oe=>({...oe,[Z]:null}))},Tn=te.useCallback((Z,oe)=>we(ae=>({...ae,[oe]:Z})),[]),pn=te.useCallback((Z,oe,ae)=>{V&&(F(Ie=>Ie.map($e=>$e.localId===Z?{...$e,[oe]:ae}:$e)),fe(!0))},[V]),Pn=te.useCallback(async Z=>{if(V)F(oe=>oe.map(ae=>ae.localId===Z?{...ae,isMarked:!ae.isMarked}:ae)),fe(!0);else{const oe=s.find(Ie=>Ie.localId===Z);if(!oe||!oe.id)return;const ae=!oe.isMarked;e(Ie=>Ie.map($e=>$e.localId===Z?{...$e,isMarked:ae}:$e)),C.current===0&&g(!0),C.current+=1;try{await ZN(oe.id,{isMarked:ae})}catch(Ie){console.error(Ie),e($e=>$e.map(gn=>gn.localId===Z?{...gn,isMarked:!ae}:gn)),Dt("Failed to update mark","error")}finally{C.current-=1,C.current===0&&g(!1)}}},[V,s,T,e,Dt]),Et=async()=>{Yt(!1)},Bs=te.useCallback((Z,oe,ae)=>{!V&&Z!=="folder"||ke({open:!0,type:Z,targetId:oe,targetName:ae})},[V]),Br=async()=>{V&&(Mn.type==="single"?F(Z=>Z.filter(oe=>oe.localId!==Mn.targetId)):(F(Z=>Z.filter(oe=>!ve.has(oe.localId))),ze(new Set)),fe(!0)),ke({open:!1,type:null,targetId:null,targetName:""})},Zn=te.useCallback(Z=>{ze(oe=>{const ae=new Set(oe);return ae.has(Z)?ae.delete(Z):ae.add(Z),ae})},[]),ei=Z=>Ce({key:Z,direction:ce.key===Z&&ce.direction==="asc"?"desc":"asc"}),qs=()=>Ce({key:"random",seed:Date.now()}),qr=(Z,oe)=>{Z.dataTransfer.setData("text/plain",oe),Z.dataTransfer.effectAllowed="move"},Hr=Z=>{Z.preventDefault(),Z.dataTransfer.dropEffect="move"},ka=(Z,oe)=>{Z.preventDefault();const ae=Z.dataTransfer.getData("text/plain");if(ae===oe)return;const Ie=A.indexOf(ae),$e=A.indexOf(oe);if(Ie<0||$e<0)return;const gn=[...A],[rn]=gn.splice(Ie,1);gn.splice($e,0,rn),x(gn)},Hs=async Z=>{const oe=Z.map(ae=>({...ae,id:null,localId:`imported_${Date.now()}_${Math.random()}`,folderId:l==="root"?"Uncategorized":l,book:n.find(Ie=>Ie.id===l)?.name||"Uncategorized",mistakes:0,confidence:0,isMarked:!1,lesson:ae.lesson||"1",cando:ae.cando||"1",japanese:ae.japanese||"",bangla:ae.bangla||"",kanji:ae.kanji||""}));if(V)F(ae=>[...ae,...oe]),fe(!0);else{g(!0);try{await T.sendAdd(oe),Dt("Imported successfully","success"),await S()}catch{Dt("Import failed","error")}finally{g(!1)}}On(!1)},sn=Z=>{Qn<it.length-1?Dn(oe=>oe+1):Et()};if(d)return E.jsxs("div",{className:"h-screen flex items-center justify-center font-bold text-slate-500",children:[E.jsx(Ab,{className:"animate-spin mr-2"})," Loading..."]});if(pi)return E.jsx("div",{className:"p-4 bg-slate-100 h-screen flex flex-col items-center justify-center",children:E.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl text-center",children:[E.jsx("h2",{className:"text-4xl font-bold mb-4",children:it[Qn]?.japanese}),E.jsxs("div",{className:"flex gap-4 mt-8",children:[E.jsx("button",{onClick:()=>sn(),className:"px-6 py-3 bg-red-100 text-red-600 rounded-lg font-bold",children:"Hard"}),E.jsx("button",{onClick:()=>sn(),className:"px-6 py-3 bg-green-100 text-green-600 rounded-lg font-bold",children:"Easy"})]}),E.jsx("button",{onClick:()=>Et(),className:"mt-8 text-slate-400 underline text-sm",children:"Save & Exit"})]})});const bt=gi==="playlist"&&mn.length>0&&!kn,Mt=gi==="playlist"&&mn.length>0&&kn;return E.jsxs("div",{className:"flex h-screen w-full bg-slate-100 font-sans text-slate-800 overflow-hidden",children:[Ls&&E.jsx(MN,{message:Ls.message,type:Ls.type,onClose:()=>Gt(null)}),E.jsx("div",{className:"hidden md:flex h-full flex-shrink-0",children:E.jsx(Vv,{folders:n,currentFolderId:l,handleFolderChange:ns,user:D})}),Y&&E.jsxs("div",{className:"fixed inset-0 z-[100] md:hidden",children:[E.jsx("div",{className:"absolute inset-0 bg-slate-900/50 backdrop-blur-sm",onClick:()=>Q(!1)}),E.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-64 bg-slate-900 shadow-2xl animate-in slide-in-from-left duration-200",children:E.jsx(Vv,{folders:n,currentFolderId:l,handleFolderChange:Z=>{ns(Z),Q(!1)},isMobile:!0,user:D})})]}),E.jsxs("div",{className:"flex-1 flex flex-col min-w-0 bg-slate-50",children:[E.jsxs("div",{className:"md:hidden bg-slate-900 text-white px-3 py-1.5 flex items-center justify-between shadow-md z-20 h-11 shrink-0",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("div",{className:"w-7 h-7 bg-indigo-600 rounded flex-shrink-0 flex items-center justify-center font-bold text-base shadow-lg",children:""}),E.jsxs("span",{className:"font-bold text-base tracking-tight leading-none",children:["Irodori",E.jsx("span",{className:"text-indigo-400",children:"AI"})]})]}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsxs("div",{className:"text-[10px] text-slate-300 font-mono text-right leading-none flex flex-col gap-0.5",children:[E.jsx("div",{className:"font-bold text-white max-w-[100px] truncate",children:l==="root"?"My Drive":n.find(Z=>Z.id===l)?.name||"..."}),E.jsxs("div",{className:"opacity-80",children:[Ur," / ",zr]})]}),E.jsx("button",{onClick:()=>Q(!0),className:"md:hidden p-1 -mr-1",children:E.jsxs("div",{className:"space-y-[3px]",children:[E.jsx("div",{className:"w-4 h-0.5 bg-white rounded-full"}),E.jsx("div",{className:"w-4 h-0.5 bg-white rounded-full"}),E.jsx("div",{className:"w-4 h-0.5 bg-white rounded-full"})]})})]})]}),E.jsx(UN,{currentFolderId:l,folders:n,vocabList:ts,selectedIds:ve,isEditMode:V,hasUnsavedChanges:ie,filters:I,hiddenColumns:me,viewMode:he,onFolderChange:ns,onDeleteRequest:Bs,onEditModeToggle:()=>Ke(!0),onFilterChange:is,onViewModeChange:Ln,onVisibilityToggle:Wn,onSave:Da,onDiscard:Oa,onPracticeStart:Na,onPlaylistStart:jn,onImportOpen:()=>On(!0),setIsColumnManagerOpen:et,isSyncing:y,filteredData:hn,onStartSmartPractice:$n,trendData:Pr,suggestion:Ni,onApplySuggestion:St,onRefresh:Ot,onShuffle:qs,isPlaying:Ps,onTogglePlay:Ra,showingCount:Ur,totalCount:zr}),E.jsx("div",{className:"flex-1 overflow-auto transition-all duration-300",style:{paddingBottom:bt?"96px":"0px"},children:E.jsxs("table",{className:"w-full border-collapse bg-white text-sm table-fixed",children:[E.jsx("colgroup",{children:A.map(Z=>{const oe=se.find(Ie=>Ie.id===Z);if(!oe||oe.editOnly&&!V||k[Z]===!1)return null;let ae=j[Z];if(!ae){const Ie={"w-10":40,"w-12":48,"w-16":64,"w-20":80,"w-24":96,"w-32":128,"w-40":160,"w-48":192,"w-64":256},$e=oe.width&&typeof oe.width=="string"&&oe.width.match(/w-(\d+)/);Ie[oe.width]?ae=Ie[oe.width]:$e?ae=parseInt($e[1])*4:ae=160}return E.jsx("col",{id:`col-${Z}`,style:{width:ae}},Z)})}),E.jsx("thead",{className:"sticky top-0 z-10 shadow-sm",children:E.jsx("tr",{children:A.map(Z=>{const oe=se.find(ae=>ae.id===Z);return(!oe?.editOnly||V)&&E.jsx(LN,{colId:Z,def:oe,isEditMode:V,sortConfig:ce,onSort:ei,columnVisibility:k,onDragStart:qr,onDragOver:Hr,onDrop:ka,onShuffle:qs,columnWidths:j,setColumnWidths:R},Z)})})}),E.jsx("tbody",{children:vt.map((Z,oe)=>E.jsx(VN,{item:Z,index:(Zi-1)*ot+oe,columnOrder:A,columnDefs:se,columnVisibility:k,columnWidths:j,selectedIds:ve,playbackMode:gi,isPlaying:Ps,playbackQueue:mn,currentIndex:Di,hiddenColumns:me,revealedCells:Ee,isEditMode:V,onToggleSelection:Zn,onUpdateCell:pn,onRevealCell:Tn,onPlaySingle:Xn,onMark:Pn,onDeleteRequest:Bs},Z.localId))})]})}),E.jsx(HN,{currentPage:Zi,totalPages:Ca,itemsPerPage:ot,onPageChange:fn,onItemsPerPageChange:Z=>{dn(Z),fn(1)},totalItems:hn.length}),bt&&E.jsx(jN,{playbackMode:gi,playbackQueue:mn,currentIndex:Di,vocabList:Go,isPlaying:Ps,audioConfig:wt,onPrevTrack:es,onNextTrack:Ko,onTogglePlayPause:Ra,onCycleRepeat:Z=>En(oe=>({...oe,repeatPerItem:Z,repeatMode:`${Z}x`})),onCycleSpeed:()=>En(Z=>({...Z,speed:Z.speed===1?1.5:1})),onToggleBangla:()=>En(Z=>({...Z,includeBangla:!Z.includeBangla})),onHide:()=>bn(!0),onToggleMark:Pn}),Mt&&E.jsx("button",{onClick:()=>bn(!1),className:"fixed bottom-6 right-6 p-3 bg-indigo-600 text-white rounded-full shadow-lg hover:bg-indigo-700 hover:scale-105 transition-all z-50 animate-bounce",title:"Show Player",children:E.jsx(CN,{size:24})})]}),Mn.open&&E.jsx("div",{className:"fixed inset-0 z-[100] bg-slate-900/60 backdrop-blur-sm flex items-center justify-center p-4",children:E.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-sm overflow-hidden",children:[E.jsxs("div",{className:"bg-red-50 p-6 flex flex-col items-center text-center",children:[E.jsx(bh,{className:"text-red-600 mb-4",size:24}),E.jsx("h3",{className:"text-xl font-bold",children:"Delete?"}),E.jsxs("p",{className:"text-sm text-slate-500 mt-2",children:["Delete ",Mn.targetName,"?"]})]}),E.jsxs("div",{className:"p-4 bg-white flex justify-end gap-3",children:[E.jsx("button",{onClick:()=>ke({...Mn,open:!1}),className:"flex-1 px-4 py-2.5 font-bold text-slate-600 hover:bg-slate-100 rounded-lg",children:"Cancel"}),E.jsx("button",{onClick:Br,className:"flex-1 px-4 py-2.5 bg-red-600 text-white font-bold rounded-lg hover:bg-red-700",children:"Delete"})]})]})}),Me&&E.jsx("div",{className:"fixed inset-0 z-[100] bg-slate-900/60 backdrop-blur-sm flex items-center justify-center p-4",children:E.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-sm overflow-hidden",children:[E.jsxs("div",{className:"bg-amber-50 p-6 flex flex-col items-center text-center",children:[E.jsx(rN,{className:"text-amber-600 mb-4",size:24}),E.jsx("h3",{className:"text-xl font-bold",children:"Enable Editing?"}),E.jsxs("p",{className:"text-sm text-slate-500 mt-2",children:["You are entering Edit Mode.",E.jsx("br",{}),"Changes are temporary until you click Save."]})]}),E.jsxs("div",{className:"p-4 bg-white flex justify-end gap-3",children:[E.jsx("button",{onClick:()=>Ke(!1),className:"flex-1 px-4 py-2.5 font-bold text-slate-600 hover:bg-slate-100 rounded-lg",children:"Cancel"}),E.jsx("button",{onClick:Us,className:"flex-1 px-4 py-2.5 bg-amber-500 text-white font-bold rounded-lg hover:bg-amber-600",children:"Start Editing"})]})]})}),zt.open&&E.jsx("div",{className:"fixed inset-0 z-[110] bg-slate-900/70 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in",children:E.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in-95",children:[E.jsxs("div",{className:"bg-amber-50 p-6 flex flex-col items-center text-center border-b border-amber-100",children:[E.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center mb-4",children:E.jsx(bh,{className:"text-amber-600",size:24})}),E.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"Unsaved Changes"}),E.jsxs("p",{className:"text-sm text-slate-500 mt-2",children:["You have unsaved edits in this session.",E.jsx("br",{}),"What would you like to do?"]})]}),E.jsxs("div",{className:"p-4 bg-white flex flex-col gap-2",children:[E.jsxs("button",{onClick:Ma,className:"w-full px-4 py-3 bg-green-600 text-white font-bold rounded-lg hover:bg-green-700 flex items-center justify-center gap-2",children:[E.jsx(Cb,{size:16})," Save & Continue"]}),E.jsxs("button",{onClick:Jn,className:"w-full px-4 py-3 bg-white border-2 border-red-100 text-red-600 font-bold rounded-lg hover:bg-red-50 flex items-center justify-center gap-2",children:[E.jsx(Rb,{size:16})," Discard Changes"]}),E.jsx("button",{onClick:zs,className:"w-full px-4 py-3 text-slate-500 font-bold hover:bg-slate-50 rounded-lg",children:"Cancel (Stay Here)"})]})]})}),E.jsx(zN,{isOpen:Xe,onClose:()=>et(!1),allColumns:se,columnOrder:A,setColumnOrder:x,columnVisibility:k,setColumnVisibility:O}),E.jsx(BN,{isOpen:Ii,onClose:()=>On(!1),onImport:Hs})]})}const t4=(s,e)=>{if(!s||!e)return null;const n=s.split(".").map(Number),r=e.split(".").map(Number);for(let l=0;l<Math.max(n.length,r.length);l++){const u=n[l]||0,d=r[l]||0;if(u>d)return 1;if(u<d)return-1}return 0},n4=()=>{const[s,e]=te.useState(!1),[n,r]=te.useState({force:!1,message:"",storeUrl:"",version:""});return te.useEffect(()=>{(async()=>{try{const u="https://japanese-learning-app-fcb27.web.app/app-version.json",d=await fetch(`${u}?t=${Date.now()}`,{cache:"no-store"});if(!d.ok)return;const p=await d.json();t4(p.version,"90.90.721")===1&&(e(!0),r(p))}catch{}})()},[]),{updateAvailable:s,...n}},i4=()=>{const{updateAvailable:s,force:e,message:n,version:r}=n4(),[l,u]=Gi.useState(!1);if(!s||l&&!e)return null;const d=()=>{window.location.reload()};return E.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-end sm:items-center justify-center p-4 pointer-events-none",children:[e&&E.jsx("div",{className:"absolute inset-0 bg-slate-900/95 backdrop-blur-md pointer-events-auto"}),!e&&E.jsx("div",{className:"absolute inset-0 bg-black/20 pointer-events-auto",onClick:()=>u(!0)}),E.jsxs("div",{className:`
                relative w-full max-w-md bg-white rounded-xl shadow-2xl overflow-hidden pointer-events-auto
                animate-in slide-in-from-bottom-4 duration-300
                ${e?"scale-105 ring-4 ring-red-500/20":"border border-slate-200"}
            `,children:[E.jsxs("div",{className:`${e?"bg-red-600":"bg-indigo-600"} px-6 py-4 flex items-center justify-between`,children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e?E.jsx(Dv,{className:"text-white",size:20}):E.jsx(YI,{className:"text-white",size:20})}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-white font-bold text-lg leading-none",children:e?"Critical Update Required":"Update Available"}),E.jsxs("p",{className:`${e?"text-red-100":"text-indigo-200"} text-xs mt-1`,children:["Version ",r]})]})]}),!e&&E.jsx("button",{onClick:()=>u(!0),className:"text-white/70 hover:text-white transition-colors p-1",children:E.jsx(Ib,{size:20})})]}),E.jsxs("div",{className:"p-6",children:[E.jsx("p",{className:"text-slate-600 mb-6 leading-relaxed text-sm",children:n||"A new version of the application is available. Please update to continue ensuring the best experience."}),E.jsxs("div",{className:"space-y-3",children:[E.jsx("button",{onClick:d,className:`w-full flex items-center justify-center gap-2 font-bold py-3.5 px-4 rounded-lg transition-all active:scale-95 text-sm
                                ${e?"bg-red-600 hover:bg-red-700 text-white shadow-lg shadow-red-500/30":"bg-indigo-600 hover:bg-indigo-700 text-white shadow-lg shadow-indigo-500/30"}`,children:e?"Update Now":"Reload to Update"}),!e&&E.jsx("button",{onClick:()=>u(!0),className:"w-full py-3 text-slate-500 hover:text-slate-700 font-medium text-sm transition-colors",children:"Not now"})]}),e&&E.jsxs("div",{className:"flex items-start gap-2 mt-6 p-3 bg-red-50 rounded text-xs text-red-600 border border-red-100",children:[E.jsx(Dv,{size:14,className:"min-w-[14px] mt-0.5"}),E.jsx("p",{children:"This update includes critical security or feature changes. You cannot continue using the app without updating."})]})]})]})]})},s4=async()=>{const s=new Fi;try{const n=(await U1(Tr,s)).user,r=Po(Eh,"users",n.uid);return(await wp(r)).exists()||await Ro(r,{uid:n.uid,email:n.email,displayName:n.displayName,photoURL:n.photoURL,createdAt:new Date,role:"user"}),n}catch(e){throw console.error("Google Login Error:",e),e}},sm="https://script.google.com/macros/s/AKfycbwXyfE5aiGFaLh9MfX_4oxHLS9J_I6K8pyoHgUmJQZDmbqECS19Q8lGsOUxBFADWthh_Q/exec";function r4(){const[s,e]=te.useState(null),[n,r]=te.useState(!0),l=typeof window<"u"&&!!window.Android,[u,d]=te.useState([]),[p,y]=te.useState([]),[g,T]=te.useState("root"),[S,D]=te.useState(!0),[V,q]=te.useState(!1),[B,F]=te.useState(""),[ie,fe]=te.useState(""),[me,Oe]=te.useState(""),[Ee,we]=te.useState(!1),[C,A]=te.useState(!1),[x,k]=te.useState(""),[O,j]=te.useState(!1),R=async Q=>{Q.preventDefault(),k(""),j(!0);try{const{createUserWithEmailAndPassword:se,signInWithEmailAndPassword:ce,updateProfile:Ce}=await n_(async()=>{const{createUserWithEmailAndPassword:I,signInWithEmailAndPassword:X,updateProfile:re}=await Promise.resolve().then(()=>O_);return{createUserWithEmailAndPassword:I,signInWithEmailAndPassword:X,updateProfile:re}},void 0,import.meta.url);if(Ee){if(!me.trim())throw new Error("First Name is required.");const I=await se(Tr,B,ie);await Ce(I.user,{displayName:me});const X=Po(Eh,"users",I.user.uid);await Ro(X,{displayName:me,email:B,uid:I.user.uid,provider:"password",deviceType:"android",createdAt:zl(),lastLoginAt:zl()},{merge:!0})}else await ce(Tr,B,ie)}catch(se){console.error(se),k(se.message.replace("Firebase: ",""))}finally{j(!1)}},Xe=async Q=>{const se=Po(Eh,"users",Q.uid),ce=await wp(se),Ce=!!window.Android,I={uid:Q.uid,email:Q.email,displayName:Q.displayName,photoURL:Q.photoURL,provider:"google",lastLoginAt:zl(),deviceType:Ce?"android":"web",appVersion:"90.90.721"};if(ce.exists())try{await Ro(se,I,{merge:!0}),console.log("User profile updated for",Q.uid)}catch(X){console.error("Error updating user profile:",X)}else try{await Ro(se,{...I,firstLoginAt:zl(),createdAt:zl()}),console.log("User profile created for",Q.uid)}catch(X){console.error("Error creating user profile:",X)}};te.useEffect(()=>{const Q=x1(Tr,async se=>{se?(e(se),await Xe(se),Y(!1)):(e(null),d([])),r(!1)});return()=>Q()},[]);const et={sendAdd:async Q=>{const se={action:"add",items:Q.map(ce=>({hiragana:ce.japanese,kanji:ce.kanji,bangla:ce.bangla,lesson:ce.lesson,cando:ce.cando,is_problem:ce.isMarked,mistake_count:ce.mistakes,confidence:ce.confidence,last_practiced:ce.lastPracticed}))};await fetch(sm,{method:"POST",body:JSON.stringify(se)})},sendUpdate:async Q=>{await fetch(sm,{method:"POST",body:JSON.stringify({action:"update",updates:Q})})}},Y=async(Q=!1)=>{!Q&&u.length===0&&D(!0);try{const se=await fetch(sm);if(!se.ok)throw new Error("Network response was not ok");const ce=await se.json();let Ce=[];if(typeof ce=="object"&&!Array.isArray(ce)&&!ce.data?Object.keys(ce).forEach(I=>{Array.isArray(ce[I])&&ce[I].forEach(X=>{Ce.push({...X,book:I})})}):Ce=Array.isArray(ce)?ce:ce.data||[],Ce.length>0){const I=Ce.map((he,_e)=>ON(he,_e)),re=[...new Set(I.map(he=>he.book))].filter(he=>he).map(he=>({id:he,name:he,parentId:"root"}));y(re);const le=localStorage.getItem("vocabList");if(le)try{const he=new Map(JSON.parse(le).map(_e=>[_e.localId,_e]));I.forEach(_e=>{const ve=he.get(_e.localId);ve&&(_e.isMarked=ve.isMarked)})}catch(he){console.error("Merge error",he)}try{const he=await WN();he&&Object.keys(he).length>0&&(I.forEach(_e=>{if(_e.id&&he[_e.id]){const ve=he[_e.id];ve.isMarked!==void 0&&(_e.isMarked=ve.isMarked)}}),console.log("[App] Merged Firestore progress into vocabList"))}catch(he){console.error("[App] Failed to merge Firestore progress",he)}d(I)}else console.error("Unexpected data format:",ce)}catch(se){console.error("Fetch error:",se)}finally{Q||D(!1)}};return te.useEffect(()=>{u.length>0&&localStorage.setItem("vocabList",JSON.stringify(u))},[u]),te.useEffect(()=>{const Q=()=>{if(window.AudioContext||window.webkitAudioContext){const se=window.AudioContext||window.webkitAudioContext,ce=new se;ce.state==="suspended"&&ce.resume().then(()=>console.log("AudioContext resumed"));const Ce=ce.createBuffer(1,1,22050),I=ce.createBufferSource();I.buffer=Ce,I.connect(ce.destination),I.start(0)}window.speechSynthesis&&window.speechSynthesis.cancel(),console.log("Audio subsystem unlocked via user interaction"),document.removeEventListener("click",Q),document.removeEventListener("touchstart",Q),document.removeEventListener("keydown",Q)};return document.addEventListener("click",Q),document.addEventListener("touchstart",Q),document.addEventListener("keydown",Q),()=>{document.removeEventListener("click",Q),document.removeEventListener("keydown",Q)}},[]),te.useEffect(()=>(window.Android&&window.Android.onWebReady&&(console.log("Sending onWebReady signal to Native..."),window.Android.onWebReady()),window.onNativeLoginSuccess=async Q=>{console.log("Native Token Received. Length:",Q?Q.length:0);try{const{GoogleAuthProvider:se,signInWithCredential:ce}=await n_(async()=>{const{GoogleAuthProvider:X,signInWithCredential:re}=await Promise.resolve().then(()=>O_);return{GoogleAuthProvider:X,signInWithCredential:re}},void 0,import.meta.url),Ce=se.credential(Q);console.log("Signing in with Credential...");const I=await ce(Tr,Ce);console.log("Firebase Auth SUCCESS. User:",I.user.uid)}catch(se){console.error("Firebase Auth FAILED:",se),alert("Auth Error: "+se.code+" - "+se.message)}},window.onNativeLoginError=Q=>{console.error("Native Login Error from Java:",Q),alert("Login Failed: "+Q)},()=>{}),[]),E.jsxs("div",{className:"relative h-screen w-screen overflow-hidden bg-[#1e1e1e]",children:[E.jsx(i4,{}),n?E.jsx("div",{className:"flex h-screen w-screen items-center justify-center text-white",children:"Loading IrodoriAI..."}):s?E.jsx(e4,{vocabList:u,setVocabList:d,folders:p,setFolders:y,currentFolderId:g,setCurrentFolderId:T,isLoading:S,setIsLoading:D,isSyncing:V,setIsSyncing:q,apiService:et,fetchSheetData:Y,user:s}):E.jsxs("div",{className:"flex h-screen w-screen items-center justify-center bg-gray-900 flex-col gap-4",children:[E.jsx("h1",{className:"text-2xl text-white font-bold",children:"Welcome to IrodoriAI"}),!l&&E.jsxs("div",{className:"flex flex-col gap-6 w-full max-w-sm",children:[E.jsxs("button",{onClick:async()=>{try{await s4()}catch(Q){console.error(Q),alert("Login Error: "+Q.message)}},className:"bg-white hover:bg-gray-100 text-gray-800 font-bold py-3 px-6 rounded-lg flex items-center justify-center gap-3 shadow-md transition-all transform hover:scale-105",children:[E.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[E.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),E.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),E.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.26.81-.58z"}),E.jsx("path",{fill:"#EA4335",d:"M12 4.66c1.61 0 3.06.56 4.21 1.64l3.15-3.15C17.45 1.09 14.97 0 12 0 7.7 0 3.99 2.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),E.jsx("span",{children:"Sign in with Google"})]}),E.jsxs("div",{className:"relative flex items-center justify-center w-full",children:[E.jsx("div",{className:"absolute inset-0 flex items-center",children:E.jsx("div",{className:"w-full border-t border-gray-600"})}),E.jsx("span",{className:"relative z-10 bg-gray-900 px-4 text-gray-400 text-sm font-medium",children:"OR"})]}),E.jsxs("form",{onSubmit:R,className:"w-full bg-gray-800 p-6 rounded-lg shadow-lg flex flex-col gap-4",children:[E.jsx("h2",{className:"text-xl text-white font-semibold text-center",children:Ee?"Create Account":"Sign In with Email"}),x&&E.jsx("div",{className:"bg-red-500/20 text-red-200 p-2 rounded text-sm text-center border border-red-500/50",children:x}),Ee&&E.jsx("input",{type:"text",placeholder:"First Name",value:me,onChange:Q=>Oe(Q.target.value),className:"bg-gray-700 text-white p-3 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),E.jsx("input",{type:"email",placeholder:"Email Address",value:B,onChange:Q=>F(Q.target.value),className:"bg-gray-700 text-white p-3 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),E.jsxs("div",{className:"relative",children:[E.jsx("input",{type:C?"text":"password",placeholder:"Password",value:ie,onChange:Q=>fe(Q.target.value),className:"bg-gray-700 text-white p-3 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 w-full",required:!0}),E.jsx("button",{type:"button",onClick:()=>A(!C),className:"absolute right-3 top-3 text-gray-400 hover:text-white",children:C?E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),E.jsx("button",{type:"submit",disabled:O,className:`font-bold py-3 px-4 rounded transition-colors ${O?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-500 text-white"}`,children:O?E.jsxs("span",{className:"flex items-center justify-center gap-2",children:[E.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[E.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),E.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Ee?"Creating account...":"Signing in..."]}):Ee?"Sign Up":"Login"}),E.jsx("div",{className:"text-center mt-2",children:E.jsx("button",{type:"button",onClick:()=>{we(!Ee),k("")},className:"text-blue-400 hover:text-blue-300 text-sm underline",children:Ee?"Already have an account? Login":"Need an account? Sign Up"})})]})]}),l&&E.jsxs("form",{onSubmit:R,className:"w-full max-w-sm bg-gray-800 p-6 rounded-lg shadow-lg flex flex-col gap-4 border-2 border-green-500",children:[E.jsx("div",{className:"bg-green-900 text-green-100 text-xs font-bold p-2 text-center uppercase tracking-widest mb-2 rounded",children:"ANDROID EMAIL LOGIN ACTIVE"}),E.jsx("h2",{className:"text-xl text-white font-semibold text-center",children:Ee?"Create Account":"Sign In"}),x&&E.jsx("div",{className:"bg-red-500/20 text-red-200 p-2 rounded text-sm text-center border border-red-500/50",children:x}),Ee&&E.jsx("input",{type:"text",placeholder:"First Name",value:me,onChange:Q=>Oe(Q.target.value),className:"bg-gray-700 text-white p-3 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),E.jsx("input",{type:"email",placeholder:"Email Address",value:B,onChange:Q=>F(Q.target.value),className:"bg-gray-700 text-white p-3 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),E.jsxs("div",{className:"relative",children:[E.jsx("input",{type:C?"text":"password",placeholder:"Password",value:ie,onChange:Q=>fe(Q.target.value),className:"bg-gray-700 text-white p-3 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 w-full",required:!0}),E.jsx("button",{type:"button",onClick:()=>A(!C),className:"absolute right-3 top-3 text-gray-400 hover:text-white",children:C?E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),E.jsx("button",{type:"submit",disabled:O,className:`font-bold py-3 px-4 rounded transition-colors ${O?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-500 text-white"}`,children:O?E.jsxs("span",{className:"flex items-center justify-center gap-2",children:[E.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[E.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),E.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Ee?"Creating account...":"Signing in..."]}):Ee?"Sign Up":"Login"}),E.jsx("div",{className:"text-center mt-2",children:E.jsx("button",{type:"button",onClick:()=>{we(!Ee),k("")},className:"text-blue-400 hover:text-blue-300 text-sm underline",children:Ee?"Already have an account? Login":"Need an account? Sign Up"})})]})]})]})}gw.createRoot(document.getElementById("root")).render(E.jsx(te.StrictMode,{children:E.jsx(r4,{})}));
